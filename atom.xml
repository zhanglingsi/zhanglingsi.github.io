<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>EthenのBlog</title>
  
  <subtitle>记录工作学习的日志及遇到问题的解决方案</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://zhanglingsi.github.io/"/>
  <updated>2019-09-10T02:53:38.956Z</updated>
  <id>http://zhanglingsi.github.io/</id>
  
  <author>
    <name>Ethen</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Dozer工具类使用-属性复制框架</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/Dozer%E5%B7%A5%E5%85%B7%E7%B1%BB%E4%BD%BF%E7%94%A8-%E5%B1%9E%E6%80%A7%E5%A4%8D%E5%88%B6%E6%A1%86%E6%9E%B6.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/Dozer工具类使用-属性复制框架.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="Dozer工具类使用-属性复制框架"><a href="#Dozer工具类使用-属性复制框架" class="headerlink" title="Dozer工具类使用-属性复制框架"></a>Dozer工具类使用-属性复制框架</h2><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Dozer配置"><a href="#Dozer配置" class="headerlink" title="Dozer配置"></a>Dozer配置</h3><p>[Maven]<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;net.sf.dozer&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;dozer&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;5.4.0&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><p>[官方文档] (<a href="http://dozer.sourceforge.net/documentation/about.html" target="_blank" rel="noopener">http://dozer.sourceforge.net/documentation/about.html</a>)</p><a id="more"></a><h3 id="第一个示例-Map转换JavaBean"><a href="#第一个示例-Map转换JavaBean" class="headerlink" title="第一个示例  Map转换JavaBean"></a>第一个示例  Map转换JavaBean</h3><p>假设由request得到了页面参数map，想将其转为领域对象–Product。<br>Product有如下几个属性：<br>private Long id;<br>private String name;<br>private String description;<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String,Object&gt; map = Maps.newHashMap();</span><br><span class="line">map.put(<span class="string">"id"</span>, 10001L);</span><br><span class="line">map.put(<span class="string">"name"</span>, <span class="string">"张三"</span>);</span><br><span class="line">map.put(<span class="string">"description"</span>, <span class="string">"吉祥如意"</span>);</span><br><span class="line"></span><br><span class="line">DozerBeanMapper mapper = new DozerBeanMapper();</span><br><span class="line">Product product = mapper.map(map, Product.class);</span><br><span class="line">assertThat(product.getId()).isEqualTo(10001);</span><br><span class="line">assertThat(product.getName()).isEqualTo(<span class="string">"张三"</span>);</span><br><span class="line">assertThat(product.getDescription()).isEqualTo(<span class="string">"吉祥如意"</span>);</span><br></pre></td></tr></table></figure></p><h3 id="第二个示例-JavaBean转换DTO"><a href="#第二个示例-JavaBean转换DTO" class="headerlink" title="第二个示例  JavaBean转换DTO"></a>第二个示例  JavaBean转换DTO</h3><p>如下定义了一个DTO对象，但属性名并不匹配Product对象中的属性名，如下所示：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">private long productId;</span><br><span class="line">private String productName;</span><br><span class="line">private String desc;</span><br></pre></td></tr></table></figure><p>这时简单的在相关属性上加一个注解即可，如下所示：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">@Mapping(<span class="string">"id"</span>)</span><br><span class="line">private long productId;</span><br><span class="line"></span><br><span class="line">@Mapping(<span class="string">"name"</span>)</span><br><span class="line">private String productName;</span><br><span class="line">@Mapping(<span class="string">"description"</span>)</span><br><span class="line">private String desc;</span><br><span class="line"></span><br><span class="line">完整代码示例见：</span><br><span class="line"></span><br><span class="line">Product product = new Product();</span><br><span class="line">product.setId(10201L);</span><br><span class="line">product.setName(<span class="string">"Ethen"</span>);</span><br><span class="line">product.setDescription(<span class="string">"吉祥如意"</span>);</span><br><span class="line">DozerBeanMapper mapper = new DozerBeanMapper();</span><br><span class="line">ProductDTO productDTO = mapper.map(product, ProductDTO.class);</span><br><span class="line">assertThat(productDTO.getProductId()).isEqualTo(10201L);</span><br><span class="line">assertThat(productDTO.getProductName()).isEqualTo(<span class="string">"Ethen"</span>);</span><br><span class="line">assertThat(productDTO.getDesc()).isEqualTo(<span class="string">"吉祥如意"</span>);</span><br></pre></td></tr></table></figure></p><p>附：工具类完整代码<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * &lt;ul&gt;</span><br><span class="line"> * &lt;li&gt;简单封装Dozer, 实现深度转换Bean&lt;-&gt;Bean的Mapper.实现:&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;1、持有Mapper的单例.&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;2、泛型返回值转换.&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;3、批量转换Collection中的所有对象.&lt;/li&gt;</span><br><span class="line"> * &lt;li&gt;4、区分创建新的B对象与将对象A值复制到已存在的B对象两种函数.&lt;/li&gt;</span><br><span class="line"> * &lt;/ul&gt;</span><br><span class="line"> */</span><br><span class="line">public class BeanCopier &#123;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 持有Dozer单例, 避免重复创建DozerMapper消耗资源.</span><br><span class="line"> */</span><br><span class="line">private static DozerBeanMapper dozer = new DozerBeanMapper();</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 基于Dozer转换对象的类型.</span><br><span class="line"> */</span><br><span class="line">public static &lt;T&gt; T copy(Object <span class="built_in">source</span>, Class&lt;T&gt; destinationClass) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">source</span> == null)&#123;</span><br><span class="line">            <span class="built_in">return</span> null;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="built_in">return</span> dozer.map(<span class="built_in">source</span>, destinationClass);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * 基于Dozer将对象A的值拷贝到对象B中.</span><br><span class="line"> */</span><br><span class="line">public static void copy(Object <span class="built_in">source</span>, Object destinationObject) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">source</span> != null)</span><br><span class="line">        &#123;</span><br><span class="line">dozer.map(<span class="built_in">source</span>, destinationObject);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    public static &lt;T&gt; List&lt;T&gt; mapList(Collection sourceList, Class&lt;T&gt; destinationClass) &#123;</span><br><span class="line">        List destinationList = Lists.newArrayList();</span><br><span class="line">        <span class="keyword">for</span> (Iterator i$ = sourceList.iterator(); i$.hasNext(); ) &#123; Object sourceObject = i$.next();</span><br><span class="line">            Object destinationObject = dozer.map(sourceObject, destinationClass);</span><br><span class="line">            destinationList.add(destinationObject);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> destinationList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 将源集合转换为目标集合,注意:目标集合是新建的</span><br><span class="line">     * @param &lt;T&gt;</span><br><span class="line">     * @param srcList 源集合</span><br><span class="line">     * @param descType 目标集合中元素的类型</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; List&lt;T&gt; copyList(List srcList, Class&lt;T&gt; descType)&#123;</span><br><span class="line">        <span class="keyword">if</span>(srcList == null)&#123;</span><br><span class="line">            <span class="built_in">return</span> null;</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;T&gt; descList = Lists.newArrayList();</span><br><span class="line">        <span class="keyword">for</span>(Object obj : srcList)&#123;</span><br><span class="line">            T t = copy(obj, descType);</span><br><span class="line">            descList.add(t);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> descList;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static &lt;T&gt; Map&lt;String, T&gt; toMap(Object target) &#123;</span><br><span class="line">        <span class="built_in">return</span> toMap(target,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 将目标对象的所有属性转换成Map对象</span><br><span class="line">     *</span><br><span class="line">     * @param target 目标对象</span><br><span class="line">     * @param ignoreParent 是否忽略父类的属性</span><br><span class="line">     *</span><br><span class="line">     * @<span class="built_in">return</span> Map</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Map&lt;String, T&gt; toMap(Object target,boolean ignoreParent) &#123;</span><br><span class="line">        <span class="built_in">return</span> toMap(target,ignoreParent,<span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 将目标对象的所有属性转换成Map对象</span><br><span class="line">     *</span><br><span class="line">     * @param target 目标对象</span><br><span class="line">     * @param ignoreParent 是否忽略父类的属性</span><br><span class="line">     * @param ignoreEmptyValue 是否不把空值添加到Map中</span><br><span class="line">     *</span><br><span class="line">     * @<span class="built_in">return</span> Map</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Map&lt;String, T&gt; toMap(Object target,boolean ignoreParent,boolean ignoreEmptyValue) &#123;</span><br><span class="line">        <span class="built_in">return</span> toMap(target,ignoreParent,ignoreEmptyValue,new String[0]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    public static List&lt;Field&gt; getFields(Class&lt;?&gt; clazz, Boolean ignoreParent) &#123;</span><br><span class="line"></span><br><span class="line">        Field[] fields = null;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (ignoreParent)&#123;</span><br><span class="line">            //获得某个类的所有声明的字段，即包括public、private和proteced，但是不包括父类的申明字段。</span><br><span class="line">            fields = clazz.getDeclaredFields();</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            //获得某个类的所有的公共（public）的字段，包括父类中的字段。</span><br><span class="line">            fields = clazz.getFields();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        int len = fields.length;</span><br><span class="line"></span><br><span class="line">        List&lt;Field&gt; list = Lists.newArrayList();</span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; len; i++) &#123;</span><br><span class="line">            list.add(fields[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">return</span> list;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 将目标对象的所有属性转换成Map对象</span><br><span class="line">     *</span><br><span class="line">     * @param target 目标对象</span><br><span class="line">     * @param ignoreParent 是否忽略父类的属性</span><br><span class="line">     * @param ignoreEmptyValue 是否不把空值添加到Map中</span><br><span class="line">     * @param ignoreProperties 不需要添加到Map的属性名</span><br><span class="line">     */</span><br><span class="line">    public static &lt;T&gt; Map&lt;String, T&gt; toMap(Object target,boolean ignoreParent,boolean ignoreEmptyValue,String... ignoreProperties) &#123;</span><br><span class="line">        Map&lt;String, T&gt; map = new HashMap&lt;String, T&gt;();</span><br><span class="line"></span><br><span class="line">        List&lt;Field&gt; fields = getFields(target.getClass(), ignoreParent);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Iterator&lt;Field&gt; it = fields.iterator(); it.hasNext();) &#123;</span><br><span class="line">            Field field = it.next();</span><br><span class="line">            T value = null;</span><br><span class="line"></span><br><span class="line">            try &#123;</span><br><span class="line">                value = (T) field.get(target);</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (ignoreEmptyValue</span><br><span class="line">                    &amp;&amp; ((value == null || value.toString().equals(<span class="string">""</span>))</span><br><span class="line">                    || (value instanceof Collection &amp;&amp; ((Collection&lt;?&gt;) value).isEmpty())</span><br><span class="line">                    || (value instanceof Map &amp;&amp; ((Map&lt;?,?&gt;)value).isEmpty()))) &#123;</span><br><span class="line">                <span class="built_in">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            boolean flag = <span class="literal">true</span>;</span><br><span class="line">            String key = field.getName();</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span> (String ignoreProperty:ignoreProperties) &#123;</span><br><span class="line">                <span class="keyword">if</span> (key.equals(ignoreProperty)) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="built_in">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">                map.put(key, value);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">return</span> map;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Dozer工具类使用-属性复制框架&quot;&gt;&lt;a href=&quot;#Dozer工具类使用-属性复制框架&quot; class=&quot;headerlink&quot; title=&quot;Dozer工具类使用-属性复制框架&quot;&gt;&lt;/a&gt;Dozer工具类使用-属性复制框架&lt;/h2&gt;&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Dozer配置&quot;&gt;&lt;a href=&quot;#Dozer配置&quot; class=&quot;headerlink&quot; title=&quot;Dozer配置&quot;&gt;&lt;/a&gt;Dozer配置&lt;/h3&gt;&lt;p&gt;[Maven]&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;net.sf.dozer&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;dozer&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;5.4.0&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;[官方文档] (&lt;a href=&quot;http://dozer.sourceforge.net/documentation/about.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://dozer.sourceforge.net/documentation/about.html&lt;/a&gt;)&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>Java对象校验框架之Oval-VerifyUtil</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/Java%E5%AF%B9%E8%B1%A1%E6%A0%A1%E9%AA%8C%E6%A1%86%E6%9E%B6%E4%B9%8BOval-VerifyUtil.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/Java对象校验框架之Oval-VerifyUtil.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="Java对象校验框架之Oval-VerifyUtil"><a href="#Java对象校验框架之Oval-VerifyUtil" class="headerlink" title="Java对象校验框架之Oval-VerifyUtil"></a>Java对象校验框架之Oval-VerifyUtil</h2><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Oval框架"><a href="#Oval框架" class="headerlink" title="Oval框架"></a>Oval框架</h3><p>[Maven]<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;net.sf.oval&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;oval&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.81&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure></p><p>[官方文档] (<a href="http://dozer.sourceforge.net/documentation/about.html" target="_blank" rel="noopener">http://dozer.sourceforge.net/documentation/about.html</a>)</p><a id="more"></a><h3 id="VerifyUtil-java"><a href="#VerifyUtil-java" class="headerlink" title="VerifyUtil.java"></a>VerifyUtil.java</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">import lombok.extern.slf4j.Slf4j;</span><br><span class="line">import net.sf.oval.ConstraintViolation;</span><br><span class="line">import net.sf.oval.Validator;</span><br><span class="line"></span><br><span class="line">import java.lang.reflect.Field;</span><br><span class="line">import java.util.List;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> * Created by Administrator on 2017-01-02.</span><br><span class="line"> */</span><br><span class="line">@Slf4j</span><br><span class="line">public class VerifyUtil &#123;</span><br><span class="line"></span><br><span class="line">    private static Validator validator = new Validator();</span><br><span class="line"></span><br><span class="line">    public static void validateObject(Object object) &#123;</span><br><span class="line">        List&lt;ConstraintViolation&gt; list = validator.validate(object);</span><br><span class="line">        <span class="keyword">if</span> (null != list &amp;&amp; !list.isEmpty()) &#123;</span><br><span class="line">            log.info(<span class="string">"校验参数异常:&#123;&#125;"</span>, list.get(0).getMessage());</span><br><span class="line">            throw new RuntimeException(list.get(0).getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void validateObject(Object object, String[] profiles) &#123;</span><br><span class="line">        validator.disableAllProfiles();</span><br><span class="line">        <span class="keyword">for</span> (int i = 0; i &lt; profiles.length; i++) &#123;</span><br><span class="line">            validator.enableProfile(profiles[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        List&lt;ConstraintViolation&gt; list = validator.validate(object);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (null != list &amp;&amp; !list.isEmpty()) &#123;</span><br><span class="line">            log.info(<span class="string">"校验参数异常:&#123;&#125;"</span>, list.get(0).getMessage());</span><br><span class="line">            throw new RuntimeException(list.get(0).getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public static void validateObject(Class clazz, String filedName, Object filedValue) &#123;</span><br><span class="line"></span><br><span class="line">        try&#123;</span><br><span class="line">            Field f = clazz.getDeclaredField(filedName);</span><br><span class="line">            List&lt;ConstraintViolation&gt; list = validator.validateFieldValue(clazz.newInstance(), clazz.getDeclaredField(filedName), filedValue);</span><br><span class="line">            <span class="keyword">if</span> (null != list &amp;&amp; !list.isEmpty()) &#123;</span><br><span class="line">                log.info(<span class="string">"校验参数异常:&#123;&#125;"</span>, list.get(0).getMessage());</span><br><span class="line">                throw new RuntimeException(list.get(0).getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e)&#123;</span><br><span class="line">            log.error(<span class="string">"校验参数，反射异常：&#123;&#125;"</span>, e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="配置JavaBean中的注解"><a href="#配置JavaBean中的注解" class="headerlink" title="配置JavaBean中的注解"></a>配置JavaBean中的注解</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">@NotNull @NotEmpty</span><br><span class="line">private String id;</span><br><span class="line"></span><br><span class="line">@Length(min=5,max=20,profiles=<span class="string">"nc2"</span>)</span><br><span class="line">private String userName;</span><br><span class="line">@NotNull @NotEmpty</span><br><span class="line">private String userCode;</span><br><span class="line">@Length(min=5,max=20,profiles=<span class="string">"nc"</span>)</span><br><span class="line">private String loginName;</span><br></pre></td></tr></table></figure><h3 id="调用示例"><a href="#调用示例" class="headerlink" title="调用示例"></a>调用示例</h3><p>1、完全验证  VerifyUtil.validateObject(user);</p><p>2、选择性验证（多个验证中选择性验证） VerifyUtil.validateObject(user, profiles);<br>   注：根据profiles进行选择性验证entity对象，可以指定多个profiles，String[] profiles。</p><p>3、验证对象的某个字段<br>   public List<constraintviolation> validateFieldValue(final Object validatedObject, final Field validatedField,final Object fieldValueToValidate) </constraintviolation></p><p>三种方法在实际都能用到，oval设计的真是堪称完美！</p><h3 id="复杂一些的注解验证写法，可以参考"><a href="#复杂一些的注解验证写法，可以参考" class="headerlink" title="复杂一些的注解验证写法，可以参考"></a>复杂一些的注解验证写法，可以参考</h3><p>参考博文：（<a href="https://www.cnblogs.com/koal/p/6871742.html）" target="_blank" rel="noopener">https://www.cnblogs.com/koal/p/6871742.html）</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br></pre></td><td class="code"><pre><span class="line">@Data</span><br><span class="line">public class NewHouseInputParam &#123;</span><br><span class="line"></span><br><span class="line">    @NotNull(errorCode = <span class="string">"-10001"</span>, message = <span class="string">"orderId不能为空"</span>)</span><br><span class="line">    private Long orderId;// 订单Id</span><br><span class="line">    @NotNull(errorCode = <span class="string">"-1"</span>, message = <span class="string">"INPUT订单状态不能为空"</span>)</span><br><span class="line">    private Integer status; //(1,<span class="string">"录入报备"</span>,<span class="string">""</span>),(2,<span class="string">"录入到访"</span>,<span class="string">""</span>),(3,<span class="string">"录入无效"</span>,<span class="string">""</span>),(4,<span class="string">"录入下定"</span>,<span class="string">""</span>),(5,<span class="string">"录入成交"</span>,<span class="string">""</span>),(6,<span class="string">"录入开票"</span>,<span class="string">""</span>),(7,<span class="string">"录入结佣"</span>,<span class="string">""</span>),</span><br><span class="line"></span><br><span class="line">    //报备录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_1"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"报备日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_1"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class, errorCode = <span class="string">"-1"</span>, message = <span class="string">"报备日期不合法"</span>)</span><br><span class="line">    private String applyDate;// 报备日期</span><br><span class="line"></span><br><span class="line">    //到访录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_2"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"到访日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_2"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class, errorCode = <span class="string">"-1"</span>, message = <span class="string">"到访日期不合法"</span>)</span><br><span class="line">    private String visitDate;// 到访日期</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_2"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"到访确认单照片不能为空"</span>)</span><br><span class="line">    private String visitImgKey;// 到访确认单照片</span><br><span class="line"></span><br><span class="line">    //下定录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_4"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定合同照片不能为空"</span>)</span><br><span class="line">    private String bookImgKey;// 下定合同照片</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_4"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"产品id不能为空"</span>)</span><br><span class="line">    private Long bookProductId;// 产品id</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_4"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定合同编号不能为空"</span>)</span><br><span class="line">    @MaxLength(value = 20,profiles = &#123;<span class="string">"profile_4"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定合同编号不合法"</span>)</span><br><span class="line">    private String bookContractCode;// 下定合同编号</span><br><span class="line"></span><br><span class="line">    @NotNull(profiles = <span class="string">"profile_4"</span>,errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定金额不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_4"</span>&#125;,methodName = <span class="string">"isValid6Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定金额不合法"</span>)</span><br><span class="line">    private String bookPrice;// 下定金额</span><br><span class="line">    @NotNull(profiles = <span class="string">"profile_4"</span>,errorCode = <span class="string">"-1"</span>, message = <span class="string">"购房总价不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_4"</span>&#125;,methodName = <span class="string">"isValid9Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"购房总价不合法"</span>)</span><br><span class="line">    private String bookTotalPrice;// 购房总价</span><br><span class="line">    @NotNull(profiles = <span class="string">"profile_4"</span>,errorCode = <span class="string">"-1"</span>, message = <span class="string">"预计佣金不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_4"</span>&#125;,methodName = <span class="string">"isValid9Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"预计佣金不合法"</span>)</span><br><span class="line">    private String bookPossibleCommission;// 预计佣金</span><br><span class="line">    @NotNull(profiles = <span class="string">"profile_4"</span>,errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_4"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"下定日期不合法"</span>)</span><br><span class="line">    private String bookDate;// 下定日期</span><br><span class="line"></span><br><span class="line">    //成交录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"合同照片不能为空"</span>)</span><br><span class="line">    @MinLength(profiles = <span class="string">"profile_5"</span>,value = 1,errorCode = <span class="string">"-1"</span>,message = <span class="string">"合同照片不能为空"</span>)</span><br><span class="line">    private String dealImgKey;// 合同照片</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"合同总价不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_5"</span>&#125;,methodName = <span class="string">"isValid6Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"合同总价不合法"</span>)</span><br><span class="line">    private String dealContractPrice;// 合同总价</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"产品Id不能为空"</span>)</span><br><span class="line">    private Long dealProductId;// 产品Id</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"合同编号不能为空"</span>)</span><br><span class="line">    @MinLength(profiles = <span class="string">"profile_5"</span>,value = 1,errorCode = <span class="string">"-1"</span>,message = <span class="string">"合同编号不能为空"</span>)</span><br><span class="line">    private String dealContractCode;// 合同编号</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"应收佣金不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_5"</span>&#125;,methodName = <span class="string">"isValid6Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"应收佣金不合法"</span>)</span><br><span class="line">    private String dealReceivableCommission;// 应收佣金</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"成交日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_5"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"成交日期不合法"</span>)</span><br><span class="line">    private String dealDate;// 成交日期</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"室不能为空"</span>)</span><br><span class="line">    @Range(profiles = &#123;<span class="string">"profile_5"</span>&#125;,min = 0,max = 9,errorCode = <span class="string">"-1"</span>, message = <span class="string">"室不合法"</span>)</span><br><span class="line">    private Integer bedroomSum;// 室</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"厅不能为空"</span>)</span><br><span class="line">    @Range(profiles = &#123;<span class="string">"profile_5"</span>&#125;,min = 0,max = 9,errorCode = <span class="string">"-1"</span>, message = <span class="string">"厅不合法"</span>)</span><br><span class="line">    private Integer livingRoomSum;// 厅</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"卫不能为空"</span>)</span><br><span class="line">    @Range(profiles = &#123;<span class="string">"profile_5"</span>&#125;,min = 0,max = 9,errorCode = <span class="string">"-1"</span>, message = <span class="string">"卫不合法"</span>)</span><br><span class="line">    private Integer wcSum;// 卫</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"面积不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_5"</span>&#125;,methodName = <span class="string">"isValid4Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"面积不合法"</span>)</span><br><span class="line">    private String spaceArea;// 面积</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"室号不能为空"</span>)</span><br><span class="line">    @MaxLength(profiles = &#123;<span class="string">"profile_5"</span>&#125;,value = 10,errorCode = <span class="string">"-1"</span>, message = <span class="string">"室号非法"</span>)</span><br><span class="line">    private String room;// 室号</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_5"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"楼栋号不能为空"</span>)</span><br><span class="line">    @MaxLength(profiles = &#123;<span class="string">"profile_5"</span>&#125;,value = 10,errorCode = <span class="string">"-1"</span>, message = <span class="string">"楼栋号非法"</span>)</span><br><span class="line">    private String building;// 楼栋号</span><br><span class="line"></span><br><span class="line">    //开票录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_6"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"开票金额不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_6"</span>&#125;,methodName = <span class="string">"isValid6Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"开票金额不合法"</span>)</span><br><span class="line">    private String invoicePrice;// 开票金额</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_6"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"开票日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_6"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"开票日期不合法"</span>)</span><br><span class="line">    private String invoiceDate;// 开票日期</span><br><span class="line"></span><br><span class="line">    //结佣录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_7"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"结佣金额不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_7"</span>&#125;,methodName = <span class="string">"isValid6Money"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"结佣金额不合法"</span>)</span><br><span class="line">    private String commissionPrice;// 结佣金额</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_7"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"结佣日期不能为空"</span>)</span><br><span class="line">    @ValidateWithMethod(profiles = &#123;<span class="string">"profile_7"</span>&#125;,methodName = <span class="string">"isValidDate"</span>,parameterType = String.class,</span><br><span class="line">            errorCode = <span class="string">"-1"</span>, message = <span class="string">"结佣日期不合法"</span>)</span><br><span class="line">    private String commissionDate;// 结佣日期</span><br><span class="line"></span><br><span class="line">    //失效录入</span><br><span class="line">    @NotNull(profiles = &#123;<span class="string">"profile_3"</span>&#125;,errorCode = <span class="string">"-1"</span>, message = <span class="string">"失效原因不能为空"</span>)</span><br><span class="line">    @MaxLength(profiles = &#123;<span class="string">"profile_3"</span>&#125;,value = 100,errorCode = <span class="string">"-1"</span>, message = <span class="string">"失效原因不合法"</span>)</span><br><span class="line">    private String invalidDesc;// 失效原因</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验证日期格式是否合法</span><br><span class="line">     * @param date</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    public boolean isValidDate(String date)&#123;</span><br><span class="line">        Date d = DateUtil.stringToDate(date, <span class="string">"YYYY-MM-dd"</span>);</span><br><span class="line">        <span class="built_in">return</span> d != null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验证范围&#123;0.00-9999.99&#125;</span><br><span class="line">     * @param money</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    private boolean isValid4Money(String money)&#123;</span><br><span class="line">        money = numericalMax2Points(money);</span><br><span class="line">        <span class="keyword">if</span>(money != null)&#123;</span><br><span class="line">            <span class="built_in">float</span> f = Float.parseFloat(money);</span><br><span class="line">            <span class="keyword">if</span>(f &gt;= 0 &amp;&amp; f &lt; 10000)&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验证范围&#123;0.00-999999.99&#125;</span><br><span class="line">     * @param money</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    private boolean isValid6Money(String money)&#123;</span><br><span class="line">        money = numericalMax2Points(money);</span><br><span class="line">        <span class="keyword">if</span>(money != null)&#123;</span><br><span class="line">            <span class="built_in">float</span> f = Float.parseFloat(money);</span><br><span class="line">            <span class="keyword">if</span>(f &gt;= 0 &amp;&amp; f &lt; 1000000)&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 验证范围&#123;0.00-999,999,999.99&#125;</span><br><span class="line">     * @param money</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    private boolean isValid9Money(String money)&#123;</span><br><span class="line">        money = numericalMax2Points(money);</span><br><span class="line">        <span class="keyword">if</span>(money != null)&#123;</span><br><span class="line">            <span class="built_in">float</span> f = Float.parseFloat(money);</span><br><span class="line">            <span class="keyword">if</span>(f &gt;= 0 &amp;&amp; f &lt; 1000000000)&#123;</span><br><span class="line">                <span class="built_in">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 判断在去除<span class="string">","</span>后是否是数字，并且最多两位小数</span><br><span class="line">     * 正确则返回处理后的money</span><br><span class="line">     * 否则返回null</span><br><span class="line">     * @param money</span><br><span class="line">     * @<span class="built_in">return</span></span><br><span class="line">     */</span><br><span class="line">    private String numericalMax2Points(String money)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            <span class="keyword">if</span> (money != null) &#123;</span><br><span class="line">                <span class="keyword">if</span> (money.indexOf(<span class="string">","</span>) &gt; 0 || money.indexOf(<span class="string">"，"</span>) &gt; 0) &#123;</span><br><span class="line">                    money = StringUtil.remove(money, <span class="string">','</span>);</span><br><span class="line">                    money = StringUtil.remove(money, <span class="string">'，'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (money.matches(<span class="string">"-?[0-9]+.?([0-9]&#123;0,2&#125;)"</span>)) &#123;</span><br><span class="line">                    <span class="built_in">return</span> money;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;catch (Exception e)&#123;&#125;</span><br><span class="line">        <span class="built_in">return</span> null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Java对象校验框架之Oval-VerifyUtil&quot;&gt;&lt;a href=&quot;#Java对象校验框架之Oval-VerifyUtil&quot; class=&quot;headerlink&quot; title=&quot;Java对象校验框架之Oval-VerifyUtil&quot;&gt;&lt;/a&gt;Java对象校验框架之Oval-VerifyUtil&lt;/h2&gt;&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;Oval框架&quot;&gt;&lt;a href=&quot;#Oval框架&quot; class=&quot;headerlink&quot; title=&quot;Oval框架&quot;&gt;&lt;/a&gt;Oval框架&lt;/h3&gt;&lt;p&gt;[Maven]&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;groupId&amp;gt;net.sf.oval&amp;lt;/groupId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;artifactId&amp;gt;oval&amp;lt;/artifactId&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;version&amp;gt;1.81&amp;lt;/version&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;[官方文档] (&lt;a href=&quot;http://dozer.sourceforge.net/documentation/about.html&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;http://dozer.sourceforge.net/documentation/about.html&lt;/a&gt;)&lt;/p&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>使用python中的tinify模块压缩图片</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E4%BD%BF%E7%94%A8python%E4%B8%AD%E7%9A%84tinify%E6%A8%A1%E5%9D%97%E5%8E%8B%E7%BC%A9%E5%9B%BE%E7%89%87.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/使用python中的tinify模块压缩图片.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="tinify模块"><a href="#tinify模块" class="headerlink" title="tinify模块"></a>tinify模块</h2><p>相关资料：</p><ol><li><a href="https://tinypng.com/" target="_blank" rel="noopener">tinypng官网</a>    压缩PNG图片</li><li><a href="https://tinyjpg.com/" target="_blank" rel="noopener">tinyjpg官网</a>    压缩JPG图片</li><li><a href="https://tinypng.com/developers/reference/python" target="_blank" rel="noopener">tinify官网</a> 开发参考文档</li></ol><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="安装-python-的-tinify-模块"><a href="#安装-python-的-tinify-模块" class="headerlink" title="安装 python 的 tinify 模块"></a>安装 python 的 tinify 模块</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ pip install --upgrade tinify</span><br></pre></td></tr></table></figure><p>重要: <a href="https://tinyjpg.com/developers" target="_blank" rel="noopener">申请API KEY</a><br><a id="more"></a></p><h3 id="编写Python代码"><a href="#编写Python代码" class="headerlink" title="编写Python代码"></a>编写Python代码</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"><span class="comment"># /usr/bin/python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># author by zhangls</span></span><br><span class="line"></span><br><span class="line">import os</span><br><span class="line">import sys</span><br><span class="line">import os.path</span><br><span class="line">import shutil</span><br><span class="line">import tinify</span><br><span class="line"></span><br><span class="line">temPath = os.getcwd()+<span class="string">'/'</span>+<span class="string">'temDir'</span>                  <span class="comment">#临时目录,注意该脚本最后是要删掉这个临时目录的</span></span><br><span class="line">tinify.key = <span class="string">"FVWYUsGfJyaFQvGtFXIlZrzWsk1voGQx"</span><span class="comment">#刚刚申请的API KEY</span></span><br><span class="line">version = <span class="string">"0.0.1"</span>  <span class="comment">#版本</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩的主函数</span></span><br><span class="line"><span class="string">""</span><span class="string">"</span></span><br><span class="line"><span class="string">1. scale：如果method参数设置为scale，则只需要提供width或者height其中的一个。服务器会根据原比例缩小图片。如果同时提供width和height将会报错</span></span><br><span class="line"><span class="string">2. fit：如果method参数设置为fit，则需要同时提供width和height以确定一个范围，缩小后的图片会保证尽量填充该区域。</span></span><br><span class="line"><span class="string">3. cover：如果method参数设置为cover，缩小后的图片会填满width和height提供的区域，在必要的情况下服务器会根据一套算法保留他们认为的主要内容，其他部分会被裁剪。</span></span><br><span class="line"><span class="string">"</span><span class="string">""</span></span><br><span class="line">def compress_core(inputFile, outputFile, img_width):</span><br><span class="line">    <span class="built_in">source</span> = tinify.from_file(inputFile)</span><br><span class="line">    <span class="keyword">if</span> img_width is not -1:</span><br><span class="line">        resized = source.resize(method=<span class="string">"scale"</span>, width=img_width)</span><br><span class="line">        resized.to_file(outputFile)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        copyrighted = source.preserve(<span class="string">"copyright"</span>, <span class="string">"creation"</span>, <span class="string">"location"</span>)</span><br><span class="line">        copyrighted.to_file(outputFile)</span><br><span class="line">    <span class="comment"># source.to_file(outputFile)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 压缩一个文件夹下的图片</span></span><br><span class="line">def compress_path(path, width):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"compress_path-------------------------------------"</span>)</span><br><span class="line">    fromfilepath = path  <span class="comment">#源路径</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"fromFilePath=%s"</span> % fromfilepath)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> root, <span class="built_in">dirs</span>, files <span class="keyword">in</span> os.walk(fromfilepath):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"root = %s"</span> % root)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"dirs = %s"</span> % <span class="built_in">dirs</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"files= %s"</span> % files)</span><br><span class="line">        <span class="keyword">for</span> name <span class="keyword">in</span> files:</span><br><span class="line">            filename, filesuffix = os.path.splitext(name)</span><br><span class="line">            <span class="keyword">if</span> filesuffix == <span class="string">'.png'</span> or filesuffix == <span class="string">'.JPG'</span> or filesuffix == <span class="string">'.jpg'</span> or filesuffix == <span class="string">'.jpeg'</span>:</span><br><span class="line">                fromfile = os.path.join(root, name)</span><br><span class="line">                tofile = os.path.join(temPath, name)</span><br><span class="line">                <span class="built_in">print</span>(fromfile)</span><br><span class="line">                <span class="built_in">print</span>(tofile)</span><br><span class="line">                <span class="built_in">print</span>(filename)</span><br><span class="line">                compress_core(fromfile, tofile, width)</span><br><span class="line">                shutil.copy2(tofile, fromfile)  <span class="comment"># 将压缩后的文件覆盖原文件</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">if</span> not os.path.exists(temPath):</span><br><span class="line">        os.mkdir(temPath)</span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) == 2:</span><br><span class="line">        compress_path(sys.argv[1], -1)</span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) == 3:</span><br><span class="line">        compress_path(sys.argv[1], sys.argv[2])</span><br><span class="line">    shutil.rmtree(temPath)</span><br></pre></td></tr></table></figure><p>保存文件名: comtest.py</p><h3 id="如何调用"><a href="#如何调用" class="headerlink" title="如何调用"></a>如何调用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python comtest.py d:\image</span><br></pre></td></tr></table></figure><ol><li>存放待压缩的图片源文件: d:\image</li><li>压缩完毕后的文件，会自动替换源目录的源文件。如想保存源文件，请做好备份工作。</li><li>我使用的python是3.5版本</li></ol><h3 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h3><p><a href="https://blog.csdn.net/jy692405180/article/details/52409369" target="_blank" rel="noopener">https://blog.csdn.net/jy692405180/article/details/52409369</a><br><a href="https://tinypng.com/developers/reference/python" target="_blank" rel="noopener">https://tinypng.com/developers/reference/python</a></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;tinify模块&quot;&gt;&lt;a href=&quot;#tinify模块&quot; class=&quot;headerlink&quot; title=&quot;tinify模块&quot;&gt;&lt;/a&gt;tinify模块&lt;/h2&gt;&lt;p&gt;相关资料：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&quot;https://tinypng.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;tinypng官网&lt;/a&gt;    压缩PNG图片&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://tinyjpg.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;tinyjpg官网&lt;/a&gt;    压缩JPG图片&lt;/li&gt;
&lt;li&gt;&lt;a href=&quot;https://tinypng.com/developers/reference/python&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;tinify官网&lt;/a&gt; 开发参考文档&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;安装-python-的-tinify-模块&quot;&gt;&lt;a href=&quot;#安装-python-的-tinify-模块&quot; class=&quot;headerlink&quot; title=&quot;安装 python 的 tinify 模块&quot;&gt;&lt;/a&gt;安装 python 的 tinify 模块&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;$ pip install --upgrade tinify&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;重要: &lt;a href=&quot;https://tinyjpg.com/developers&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;申请API KEY&lt;/a&gt;&lt;br&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（一）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（一）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（一）"><a href="#我的-Python-笔记（一）" class="headerlink" title="我的 Python 笔记（一）"></a>我的 Python 笔记（一）</h1><h2 id="初识Python"><a href="#初识Python" class="headerlink" title="初识Python"></a>初识Python</h2><ol><li>Python 越来越火，各种领域都在发力，大数据，机器学习，人工智能等。</li><li>让我这个JAVA Coder开始关注这门语言，听说高中、大学毕业都要开始考试科目里加上这门语言，成为必修语言。</li><li>只是在Python介绍里面，知道python和JavaScript一样是解释型的语言，也是和JAVA一样，需要被预编译成字节码执行的，也需要像JVM一样的环境，做到可移植性。</li></ol><h3 id="安装Python-选择V2-7-？还是V3-6-？"><a href="#安装Python-选择V2-7-？还是V3-6-？" class="headerlink" title="安装Python 选择V2.7 ？还是V3.6 ？"></a>安装Python 选择V2.7 ？还是V3.6 ？</h3><ol><li>这两个版本完全不能兼容，所以我安装了windows版的python V3.6</li><li>突然发现学习的时候很多程序都基于V2.7，就去学V2.7 ，又卸载V3.6 </li><li>搞环境的时候，发现有个软件Anaconda可以管理什么python的虚拟环境？</li><li>下载安装来玩玩，Anaconda3可以方便的切换python运行时版本环境。</li><li>教程选择廖雪峰大神的Python3教程，每个语言都是从基础语法开始。发现很多好用的东东。激发自己的学习兴趣。<a href="https://www.liaoxuefeng.com/" target="_blank" rel="noopener">https://www.liaoxuefeng.com/</a></li></ol><h3 id="Anaconda3-安装配置"><a href="#Anaconda3-安装配置" class="headerlink" title="Anaconda3 安装配置"></a>Anaconda3 安装配置</h3><blockquote><p>介绍： Anaconda 是一个用于科学计算的 Python 发行版，支持 Linux, Mac, Windows,包含了众多流行的科学计算、数据分析的 Python 包。</p></blockquote><blockquote><p>Anaconda 安装包可以到 <a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/</a> 下载。</p></blockquote><ol><li>去官网下载安装包，windowns和Mac 安装步骤都一样，一路下一步即可。<blockquote><p>注：安装后比较占用空间，我安装到C盘，居然有9个G，还好我C盘比较大，安装Anaconda之前不用安装python，自带的。</p></blockquote></li><li>验证安装，cmd进去，分别输入python、ipython、conda等命令，会看到相应的结果，说明安装成功。</li><li><p>Anaconda3安装成功之后，我们需要修改其包管理镜像为国内源。执行以下命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</span><br><span class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/</span><br><span class="line">conda config --set show_channel_urls yes</span><br></pre></td></tr></table></figure></li><li><p>在 Windows 上，会随 Anaconda 一起安装一批应用程序：</p><ul><li>Anaconda Navigator，它是用于管理环境和包的 GUI</li><li>Anaconda Prompt 终端，它可让你使用命令行界面来管理环境和包</li><li>Spyder，它是面向科学开发的 IDE</li></ul></li><li>为了避免报错，我推荐在默认环境下更新所有的包。打开 Anaconda Prompt （或者 Mac 下的终端），键入：<code>conda upgrade --all</code>  <a id="more"></a></li></ol><h3 id="Anaconda3-命令操作"><a href="#Anaconda3-命令操作" class="headerlink" title="Anaconda3 命令操作"></a>Anaconda3 命令操作</h3><blockquote><ol><li>安装包命令<br> $&gt; <strong>conda install pymysql</strong></li></ol></blockquote><blockquote><ol><li>安装多个包命令 安装时anaconda会自动管理依赖无需干预<br> $&gt; <strong>conda install pymysql django</strong> </li></ol></blockquote><blockquote><ol><li>指定版本<br> $&gt; <strong>conda install numpy=1.10</strong> </li></ol></blockquote><blockquote><ol><li>如果使用pip是这样滴，注意区别<br> $&gt; <strong>pip install numpy==1.10</strong> </li></ol></blockquote><blockquote><ol><li>列出环境下已安装的包<br> $&gt; <strong>conda list</strong>     </li></ol></blockquote><blockquote><ol><li>更新包<br> $&gt; <strong>conda update django</strong>     </li></ol></blockquote><blockquote><ol><li>搜索包<br> $&gt; <strong>conda search djan</strong> </li></ol></blockquote><blockquote><ol><li>conda 创建虚拟环境  -n / -name 创建环境名称 list packages 为新建的环境安装包<br> $&gt; <strong>conda create -n learn_env django</strong> </li></ol></blockquote><blockquote><ol><li>conda 指定创建的环境的python版本<br> $&gt; <strong>conda create -n learn_env python=3.6</strong> </li></ol></blockquote><blockquote><ol><li>进入创建的虚拟环境 在cmd和Mac中<br>$&gt; <strong>source activate learn_env</strong> </li></ol></blockquote><blockquote><ol><li>进入创建的虚拟环境 在Anaconda Prompt 终端<br>$&gt; <strong>activate learn_env</strong> </li></ol></blockquote><blockquote><ol><li>可查看当前的激活的环境<br>$&gt; <strong>conda env list</strong> </li></ol></blockquote><blockquote><ol><li>保存导出环境信息文件<br>$&gt; <strong>conda env export &gt; environment.yaml</strong> </li></ol></blockquote><blockquote><ol><li>加载导入环境信息文件<br>$&gt; <strong>conda env create -f environment.yaml</strong> </li></ol></blockquote><blockquote><ol><li>删除虚拟环境<br>$&gt; <strong>conda env remove -n learn_env</strong> </li></ol></blockquote><ul><li><p>另：为我从事的每个项目创建环境很有用。这对于与数据不相关的项目（例如使用 Flask 开发的 Web 应用）也很有用。例如，个人博客Pelican [<a href="http://docs.getpelican.com/en/stable/#]" target="_blank" rel="noopener">http://docs.getpelican.com/en/stable/#]</a> Python的静态网站生成器   </p></li><li><p>共享环境 : 在 GitHub上共享代码时，最好同样创建环境文件并将其包括在代码库中。这能让其他人更轻松地安装你的代码的所有依赖项。</p></li><li><p>对于不使用 conda的用户，我通常还会使用 pip freeze [<a href="https://pip.pypa.io/en/stable/reference/pip_freeze/]" target="_blank" rel="noopener">https://pip.pypa.io/en/stable/reference/pip_freeze/]</a> 将一个 pip requirements.txt 文件导出并包括在其中。</p></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（一）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（一）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（一）&quot;&gt;&lt;/a&gt;我的 Python 笔记（一）&lt;/h1&gt;&lt;h2 id=&quot;初识Python&quot;&gt;&lt;a href=&quot;#初识Python&quot; class=&quot;headerlink&quot; title=&quot;初识Python&quot;&gt;&lt;/a&gt;初识Python&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;Python 越来越火，各种领域都在发力，大数据，机器学习，人工智能等。&lt;/li&gt;
&lt;li&gt;让我这个JAVA Coder开始关注这门语言，听说高中、大学毕业都要开始考试科目里加上这门语言，成为必修语言。&lt;/li&gt;
&lt;li&gt;只是在Python介绍里面，知道python和JavaScript一样是解释型的语言，也是和JAVA一样，需要被预编译成字节码执行的，也需要像JVM一样的环境，做到可移植性。&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;安装Python-选择V2-7-？还是V3-6-？&quot;&gt;&lt;a href=&quot;#安装Python-选择V2-7-？还是V3-6-？&quot; class=&quot;headerlink&quot; title=&quot;安装Python 选择V2.7 ？还是V3.6 ？&quot;&gt;&lt;/a&gt;安装Python 选择V2.7 ？还是V3.6 ？&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;这两个版本完全不能兼容，所以我安装了windows版的python V3.6&lt;/li&gt;
&lt;li&gt;突然发现学习的时候很多程序都基于V2.7，就去学V2.7 ，又卸载V3.6 &lt;/li&gt;
&lt;li&gt;搞环境的时候，发现有个软件Anaconda可以管理什么python的虚拟环境？&lt;/li&gt;
&lt;li&gt;下载安装来玩玩，Anaconda3可以方便的切换python运行时版本环境。&lt;/li&gt;
&lt;li&gt;教程选择廖雪峰大神的Python3教程，每个语言都是从基础语法开始。发现很多好用的东东。激发自己的学习兴趣。&lt;a href=&quot;https://www.liaoxuefeng.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.liaoxuefeng.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;Anaconda3-安装配置&quot;&gt;&lt;a href=&quot;#Anaconda3-安装配置&quot; class=&quot;headerlink&quot; title=&quot;Anaconda3 安装配置&quot;&gt;&lt;/a&gt;Anaconda3 安装配置&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;介绍： Anaconda 是一个用于科学计算的 Python 发行版，支持 Linux, Mac, Windows,包含了众多流行的科学计算、数据分析的 Python 包。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Anaconda 安装包可以到 &lt;a href=&quot;https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://mirrors.tuna.tsinghua.edu.cn/anaconda/archive/&lt;/a&gt; 下载。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;去官网下载安装包，windowns和Mac 安装步骤都一样，一路下一步即可。&lt;blockquote&gt;
&lt;p&gt;注：安装后比较占用空间，我安装到C盘，居然有9个G，还好我C盘比较大，安装Anaconda之前不用安装python，自带的。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;验证安装，cmd进去，分别输入python、ipython、conda等命令，会看到相应的结果，说明安装成功。&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Anaconda3安装成功之后，我们需要修改其包管理镜像为国内源。执行以下命令&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;conda config --set show_channel_urls yes&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;在 Windows 上，会随 Anaconda 一起安装一批应用程序：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Anaconda Navigator，它是用于管理环境和包的 GUI&lt;/li&gt;
&lt;li&gt;Anaconda Prompt 终端，它可让你使用命令行界面来管理环境和包&lt;/li&gt;
&lt;li&gt;Spyder，它是面向科学开发的 IDE&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;为了避免报错，我推荐在默认环境下更新所有的包。打开 Anaconda Prompt （或者 Mac 下的终端），键入：&lt;code&gt;conda upgrade --all&lt;/code&gt;
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（三）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%89%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（三）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（三）"><a href="#我的-Python-笔记（三）" class="headerlink" title="我的 Python 笔记（三）"></a>我的 Python 笔记（三）</h1><h2 id="Urllib库-是Python-内置的Http请求库"><a href="#Urllib库-是Python-内置的Http请求库" class="headerlink" title="Urllib库   是Python 内置的Http请求库"></a>Urllib库   是Python 内置的Http请求库</h2><h3 id="包含以下4个模块"><a href="#包含以下4个模块" class="headerlink" title="包含以下4个模块"></a>包含以下4个模块</h3><ul><li>urllib.request   请求模块</li><li>urlib.error            异常处理模块</li><li>urllib.parse      url解析模块</li><li>urllib.robotparser    robots.txt解析模块</li></ul><h2 id="urlopen方法"><a href="#urlopen方法" class="headerlink" title="urlopen方法"></a>urlopen方法</h2><h3 id="urllib-request-urlopen-url-data-None-timeout-cafile-None-capath-None-cadefault-False-context-None"><a href="#urllib-request-urlopen-url-data-None-timeout-cafile-None-capath-None-cadefault-False-context-None" class="headerlink" title="urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)"></a>urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">print(response.read().decode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">data = bytes(urllib.parse.urlencode(&#123;<span class="string">'word'</span>: <span class="string">'hello'</span>&#125;), encoding=<span class="string">'utf8'</span>)</span><br><span class="line">response = urllib.request.urlopen(<span class="string">'http://httpbin.org/post'</span>, data=data)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure><pre><code>b&apos;{\n  &quot;args&quot;: {}, \n  &quot;data&quot;: &quot;&quot;, \n  &quot;files&quot;: {}, \n  &quot;form&quot;: {\n    &quot;word&quot;: &quot;hello&quot;\n  }, \n  &quot;headers&quot;: {\n    &quot;Accept-Encoding&quot;: &quot;identity&quot;, \n    &quot;Connect-Time&quot;: &quot;1&quot;, \n    &quot;Connection&quot;: &quot;close&quot;, \n    &quot;Content-Length&quot;: &quot;10&quot;, \n    &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;, \n    &quot;Host&quot;: &quot;httpbin.org&quot;, \n    &quot;Total-Route-Time&quot;: &quot;0&quot;, \n    &quot;User-Agent&quot;: &quot;Python-urllib/3.5&quot;, \n    &quot;Via&quot;: &quot;1.1 vegur&quot;, \n    &quot;X-Request-Id&quot;: &quot;89667a57-c909-475a-9870-f01181e8c85d&quot;\n  }, \n  &quot;json&quot;: null, \n  &quot;origin&quot;: &quot;219.238.82.169&quot;, \n  &quot;url&quot;: &quot;http://httpbin.org/post&quot;\n}\n&apos;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">'http://httpbin.org/get'</span>, timeout=<span class="number">1</span>)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure><pre><code>b&apos;{\n  &quot;args&quot;: {}, \n  &quot;headers&quot;: {\n    &quot;Accept-Encoding&quot;: &quot;identity&quot;, \n    &quot;Host&quot;: &quot;httpbin.org&quot;, \n    &quot;User-Agent&quot;: &quot;Python-urllib/3.6&quot;\n  }, \n  &quot;origin&quot;: &quot;211.138.20.169, 211.138.20.169&quot;, \n  &quot;url&quot;: &quot;https://httpbin.org/get&quot;\n}\n&apos;</code></pre><a id="more"></a><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.error</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = urllib.request.urlopen(<span class="string">'http://httpbin.org/get'</span>, timeout=<span class="number">0.1</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    <span class="keyword">if</span> isinstance(e.reason, socket.timeout):</span><br><span class="line">        print(<span class="string">'TIME OUT'</span>)</span><br></pre></td></tr></table></figure><pre><code>TIME OUT</code></pre><h2 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h2><h3 id="响应类型"><a href="#响应类型" class="headerlink" title="响应类型"></a>响应类型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">'https://www.python.org'</span>)</span><br><span class="line">print(type(response))</span><br></pre></td></tr></table></figure><pre><code>&lt;class &apos;http.client.HTTPResponse&apos;&gt;</code></pre><h3 id="状态码、响应头"><a href="#状态码、响应头" class="headerlink" title="状态码、响应头"></a>状态码、响应头</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">'https://www.python.org'</span>)</span><br><span class="line">print(response.status)</span><br><span class="line">print(response.getheaders())</span><br><span class="line">print(response.getheader(<span class="string">'Server'</span>))</span><br></pre></td></tr></table></figure><pre><code>200[(&apos;Server&apos;, &apos;nginx&apos;), (&apos;Content-Type&apos;, &apos;text/html; charset=utf-8&apos;), (&apos;X-Frame-Options&apos;, &apos;SAMEORIGIN&apos;), (&apos;x-xss-protection&apos;, &apos;1; mode=block&apos;), (&apos;X-Clacks-Overhead&apos;, &apos;GNU Terry Pratchett&apos;), (&apos;Content-Length&apos;, &apos;49283&apos;), (&apos;Accept-Ranges&apos;, &apos;bytes&apos;), (&apos;Date&apos;, &apos;Mon, 18 Feb 2019 06:31:31 GMT&apos;), (&apos;Via&apos;, &apos;1.1 varnish&apos;), (&apos;Age&apos;, &apos;834&apos;), (&apos;Connection&apos;, &apos;close&apos;), (&apos;X-Served-By&apos;, &apos;cache-lax8626-LAX&apos;), (&apos;X-Cache&apos;, &apos;HIT&apos;), (&apos;X-Cache-Hits&apos;, &apos;35&apos;), (&apos;X-Timer&apos;, &apos;S1550471492.850098,VS0,VE0&apos;), (&apos;Vary&apos;, &apos;Cookie&apos;), (&apos;Strict-Transport-Security&apos;, &apos;max-age=63072000; includeSubDomains&apos;)]nginx</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">response = urllib.request.urlopen(<span class="string">'https://www.python.org'</span>)</span><br><span class="line">print(response.read().decode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, parse</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://httpbin.org/post'</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'</span>,</span><br><span class="line">    <span class="string">'Host'</span>: <span class="string">'httpbin.org'</span></span><br><span class="line">&#125;</span><br><span class="line">dict = &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Germey'</span></span><br><span class="line">&#125;</span><br><span class="line">data = bytes(parse.urlencode(dict), encoding=<span class="string">'utf8'</span>)</span><br><span class="line">req = request.Request(url=url, data=data, headers=headers, method=<span class="string">'POST'</span>)</span><br><span class="line">response = request.urlopen(req)</span><br><span class="line">print(response.read().decode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure><pre><code>{  &quot;args&quot;: {},   &quot;data&quot;: &quot;&quot;,   &quot;files&quot;: {},   &quot;form&quot;: {    &quot;name&quot;: &quot;Germey&quot;  },   &quot;headers&quot;: {    &quot;Accept-Encoding&quot;: &quot;identity&quot;,     &quot;Connect-Time&quot;: &quot;1&quot;,     &quot;Connection&quot;: &quot;close&quot;,     &quot;Content-Length&quot;: &quot;11&quot;,     &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;,     &quot;Host&quot;: &quot;httpbin.org&quot;,     &quot;Total-Route-Time&quot;: &quot;0&quot;,     &quot;User-Agent&quot;: &quot;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&quot;,     &quot;Via&quot;: &quot;1.1 vegur&quot;,     &quot;X-Request-Id&quot;: &quot;f96e736e-0b8a-4ab4-9dcc-a970fcd2fbbf&quot;  },   &quot;json&quot;: null,   &quot;origin&quot;: &quot;219.238.82.169&quot;,   &quot;url&quot;: &quot;http://httpbin.org/post&quot;}</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, parse</span><br><span class="line"></span><br><span class="line">url = <span class="string">'http://httpbin.org/post'</span></span><br><span class="line">dict = &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'Germey'</span></span><br><span class="line">&#125;</span><br><span class="line">data = bytes(parse.urlencode(dict), encoding=<span class="string">'utf8'</span>)</span><br><span class="line">req = request.Request(url=url, data=data, method=<span class="string">'POST'</span>)</span><br><span class="line">req.add_header(<span class="string">'User-Agent'</span>, <span class="string">'Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)'</span>)</span><br><span class="line">response = request.urlopen(req)</span><br><span class="line">print(response.read().decode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure><pre><code>{  &quot;args&quot;: {},   &quot;data&quot;: &quot;&quot;,   &quot;files&quot;: {},   &quot;form&quot;: {    &quot;name&quot;: &quot;Germey&quot;  },   &quot;headers&quot;: {    &quot;Accept-Encoding&quot;: &quot;identity&quot;,     &quot;Connect-Time&quot;: &quot;0&quot;,     &quot;Connection&quot;: &quot;close&quot;,     &quot;Content-Length&quot;: &quot;11&quot;,     &quot;Content-Type&quot;: &quot;application/x-www-form-urlencoded&quot;,     &quot;Host&quot;: &quot;httpbin.org&quot;,     &quot;Total-Route-Time&quot;: &quot;0&quot;,     &quot;User-Agent&quot;: &quot;Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)&quot;,     &quot;Via&quot;: &quot;1.1 vegur&quot;,     &quot;X-Request-Id&quot;: &quot;a624bcaa-3581-4b93-84b0-037940338e71&quot;  },   &quot;json&quot;: null,   &quot;origin&quot;: &quot;219.238.82.169&quot;,   &quot;url&quot;: &quot;http://httpbin.org/post&quot;}</code></pre><h2 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h2><h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"></span><br><span class="line">proxy_handler = urllib.request.ProxyHandler(&#123;</span><br><span class="line">    <span class="string">'http'</span>: <span class="string">'http://127.0.0.1:9743'</span>,</span><br><span class="line">    <span class="string">'https'</span>: <span class="string">'https://127.0.0.1:9743'</span></span><br><span class="line">&#125;)</span><br><span class="line">opener = urllib.request.build_opener(proxy_handler)</span><br><span class="line">response = opener.open(<span class="string">'http://httpbin.org/get'</span>)</span><br><span class="line">print(response.read())</span><br></pre></td></tr></table></figure><pre><code>b&apos;{\n  &quot;args&quot;: {}, \n  &quot;headers&quot;: {\n    &quot;Accept-Encoding&quot;: &quot;identity&quot;, \n    &quot;Connect-Time&quot;: &quot;2&quot;, \n    &quot;Connection&quot;: &quot;close&quot;, \n    &quot;Host&quot;: &quot;httpbin.org&quot;, \n    &quot;Total-Route-Time&quot;: &quot;0&quot;, \n    &quot;User-Agent&quot;: &quot;Python-urllib/3.5&quot;, \n    &quot;Via&quot;: &quot;1.1 vegur&quot;, \n    &quot;X-Request-Id&quot;: &quot;b0e2272d-1663-4192-ac45-eb958279afd8&quot;\n  }, \n  &quot;origin&quot;: &quot;110.10.176.224&quot;, \n  &quot;url&quot;: &quot;http://httpbin.org/get&quot;\n}\n&apos;</code></pre><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http.cookiejar, urllib.request</span><br><span class="line"></span><br><span class="line">cookie = http.cookiejar.CookieJar()</span><br><span class="line">handler = urllib.request.HTTPCookieProcessor(cookie)</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.open(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> cookie:</span><br><span class="line">    print(item.name+<span class="string">"="</span>+item.value)</span><br></pre></td></tr></table></figure><pre><code>BAIDUID=E77BF84491E332F6F8F1D451AD0063D3:FG=1BIDUPSID=E77BF84491E332F6F8F1D451AD0063D3H_PS_PSSID=1466_21127_22075PSTM=1490198051BDSVRTM=0BD_HOME=0</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http.cookiejar, urllib.request</span><br><span class="line">filename = <span class="string">"cookie.txt"</span></span><br><span class="line">cookie = http.cookiejar.MozillaCookieJar(filename)</span><br><span class="line">handler = urllib.request.HTTPCookieProcessor(cookie)</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.open(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">cookie.save(ignore_discard=<span class="keyword">True</span>, ignore_expires=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http.cookiejar, urllib.request</span><br><span class="line">filename = <span class="string">'cookie.txt'</span></span><br><span class="line">cookie = http.cookiejar.LWPCookieJar(filename)</span><br><span class="line">handler = urllib.request.HTTPCookieProcessor(cookie)</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.open(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">cookie.save(ignore_discard=<span class="keyword">True</span>, ignore_expires=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> http.cookiejar, urllib.request</span><br><span class="line">cookie = http.cookiejar.LWPCookieJar()</span><br><span class="line">cookie.load(<span class="string">'cookie.txt'</span>, ignore_discard=<span class="keyword">True</span>, ignore_expires=<span class="keyword">True</span>)</span><br><span class="line">handler = urllib.request.HTTPCookieProcessor(cookie)</span><br><span class="line">opener = urllib.request.build_opener(handler)</span><br><span class="line">response = opener.open(<span class="string">'http://www.baidu.com'</span>)</span><br><span class="line">print(response.read().decode(<span class="string">'utf-8'</span>))</span><br></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, error</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = request.urlopen(<span class="string">'http://cuiqingcai.com/index.htm'</span>)</span><br><span class="line"><span class="keyword">except</span> error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    print(e.reason)</span><br></pre></td></tr></table></figure><pre><code>Not Found</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request, error</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = request.urlopen(<span class="string">'http://cuiqingcai.com/index.htm'</span>)</span><br><span class="line"><span class="keyword">except</span> error.HTTPError <span class="keyword">as</span> e:</span><br><span class="line">    print(e.reason, e.code, e.headers, sep=<span class="string">'\n'</span>)</span><br><span class="line"><span class="keyword">except</span> error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    print(e.reason)</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">'Request Successfully'</span>)</span><br></pre></td></tr></table></figure><pre><code>Not Found404Server: nginx/1.10.1Date: Wed, 22 Mar 2017 15:59:55 GMTContent-Type: text/html; charset=UTF-8Transfer-Encoding: chunkedConnection: closeVary: CookieExpires: Wed, 11 Jan 1984 05:00:00 GMTCache-Control: no-cache, must-revalidate, max-age=0Link: &lt;http://cuiqingcai.com/wp-json/&gt;; rel=&quot;https://api.w.org/&quot;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.error</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = urllib.request.urlopen(<span class="string">'https://www.baidu.com'</span>, timeout=<span class="number">0.01</span>)</span><br><span class="line"><span class="keyword">except</span> urllib.error.URLError <span class="keyword">as</span> e:</span><br><span class="line">    print(type(e.reason))</span><br><span class="line">    <span class="keyword">if</span> isinstance(e.reason, socket.timeout):</span><br><span class="line">        print(<span class="string">'TIME OUT'</span>)</span><br></pre></td></tr></table></figure><pre><code>&lt;class &apos;socket.timeout&apos;&gt;TIME OUT</code></pre><h2 id="URL解析"><a href="#URL解析" class="headerlink" title="URL解析"></a>URL解析</h2><h3 id="urlparse方法"><a href="#urlparse方法" class="headerlink" title="urlparse方法"></a>urlparse方法</h3><h4 id="urllib-parse-urlparse-urlstring-scheme-’’-allow-fragments-True"><a href="#urllib-parse-urlparse-urlstring-scheme-’’-allow-fragments-True" class="headerlink" title="urllib.parse.urlparse(urlstring, scheme=’’, allow_fragments=True)"></a>urllib.parse.urlparse(urlstring, scheme=’’, allow_fragments=True)</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line">result = urlparse(<span class="string">'http://www.baidu.com/index.html;user?id=5#comment'</span>)</span><br><span class="line">print(type(result), result)</span><br></pre></td></tr></table></figure><pre><code>&lt;class &apos;urllib.parse.ParseResult&apos;&gt; ParseResult(scheme=&apos;http&apos;, netloc=&apos;www.baidu.com&apos;, path=&apos;/index.html&apos;, params=&apos;user&apos;, query=&apos;id=5&apos;, fragment=&apos;comment&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line">result = urlparse(<span class="string">'www.baidu.com/index.html;user?id=5#comment'</span>, scheme=<span class="string">'https'</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>ParseResult(scheme=&apos;https&apos;, netloc=&apos;&apos;, path=&apos;www.baidu.com/index.html&apos;, params=&apos;user&apos;, query=&apos;id=5&apos;, fragment=&apos;comment&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line">result = urlparse(<span class="string">'http://www.baidu.com/index.html;user?id=5#comment'</span>, scheme=<span class="string">'https'</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>ParseResult(scheme=&apos;http&apos;, netloc=&apos;www.baidu.com&apos;, path=&apos;/index.html&apos;, params=&apos;user&apos;, query=&apos;id=5&apos;, fragment=&apos;comment&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line">result = urlparse(<span class="string">'http://www.baidu.com/index.html;user?id=5#comment'</span>, allow_fragments=<span class="keyword">False</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>ParseResult(scheme=&apos;http&apos;, netloc=&apos;www.baidu.com&apos;, path=&apos;/index.html&apos;, params=&apos;user&apos;, query=&apos;id=5#comment&apos;, fragment=&apos;&apos;)</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlparse</span><br><span class="line"></span><br><span class="line">result = urlparse(<span class="string">'http://www.baidu.com/index.html#comment'</span>, allow_fragments=<span class="keyword">False</span>)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>ParseResult(scheme=&apos;http&apos;, netloc=&apos;www.baidu.com&apos;, path=&apos;/index.html#comment&apos;, params=&apos;&apos;, query=&apos;&apos;, fragment=&apos;&apos;)</code></pre><h3 id="urlunparse"><a href="#urlunparse" class="headerlink" title="urlunparse"></a>urlunparse</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlunparse</span><br><span class="line"></span><br><span class="line">data = [<span class="string">'http'</span>, <span class="string">'www.baidu.com'</span>, <span class="string">'index.html'</span>, <span class="string">'user'</span>, <span class="string">'a=6'</span>, <span class="string">'comment'</span>]</span><br><span class="line">print(urlunparse(data))</span><br></pre></td></tr></table></figure><pre><code>http://www.baidu.com/index.html;user?a=6#comment</code></pre><h3 id="urljoin"><a href="#urljoin" class="headerlink" title="urljoin"></a>urljoin</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urljoin</span><br><span class="line"></span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com'</span>, <span class="string">'FAQ.html'</span>))</span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com'</span>, <span class="string">'https://cuiqingcai.com/FAQ.html'</span>))</span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com/about.html'</span>, <span class="string">'https://cuiqingcai.com/FAQ.html'</span>))</span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com/about.html'</span>, <span class="string">'https://cuiqingcai.com/FAQ.html?question=2'</span>))</span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com?wd=abc'</span>, <span class="string">'https://cuiqingcai.com/index.php'</span>))</span><br><span class="line">print(urljoin(<span class="string">'http://www.baidu.com'</span>, <span class="string">'?category=2#comment'</span>))</span><br><span class="line">print(urljoin(<span class="string">'www.baidu.com'</span>, <span class="string">'?category=2#comment'</span>))</span><br><span class="line">print(urljoin(<span class="string">'www.baidu.com#comment'</span>, <span class="string">'?category=2'</span>))</span><br></pre></td></tr></table></figure><pre><code>http://www.baidu.com/FAQ.htmlhttps://cuiqingcai.com/FAQ.htmlhttps://cuiqingcai.com/FAQ.htmlhttps://cuiqingcai.com/FAQ.html?question=2https://cuiqingcai.com/index.phphttp://www.baidu.com?category=2#commentwww.baidu.com?category=2#commentwww.baidu.com?category=2</code></pre><h3 id="urlencode"><a href="#urlencode" class="headerlink" title="urlencode"></a>urlencode</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> urllib.parse <span class="keyword">import</span> urlencode</span><br><span class="line"></span><br><span class="line">params = &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'germey'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line">base_url = <span class="string">'http://www.baidu.com?'</span></span><br><span class="line">url = base_url + urlencode(params)</span><br><span class="line">print(url)</span><br></pre></td></tr></table></figure><pre><code>http://www.baidu.com?name=germey&amp;age=22</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（三）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（三）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（三）&quot;&gt;&lt;/a&gt;我的 Python 笔记（三）&lt;/h1&gt;&lt;h2 id=&quot;Urllib库-是Python-内置的Http请求库&quot;&gt;&lt;a href=&quot;#Urllib库-是Python-内置的Http请求库&quot; class=&quot;headerlink&quot; title=&quot;Urllib库   是Python 内置的Http请求库&quot;&gt;&lt;/a&gt;Urllib库   是Python 内置的Http请求库&lt;/h2&gt;&lt;h3 id=&quot;包含以下4个模块&quot;&gt;&lt;a href=&quot;#包含以下4个模块&quot; class=&quot;headerlink&quot; title=&quot;包含以下4个模块&quot;&gt;&lt;/a&gt;包含以下4个模块&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;urllib.request   请求模块&lt;/li&gt;
&lt;li&gt;urlib.error            异常处理模块&lt;/li&gt;
&lt;li&gt;urllib.parse      url解析模块&lt;/li&gt;
&lt;li&gt;urllib.robotparser    robots.txt解析模块&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;urlopen方法&quot;&gt;&lt;a href=&quot;#urlopen方法&quot; class=&quot;headerlink&quot; title=&quot;urlopen方法&quot;&gt;&lt;/a&gt;urlopen方法&lt;/h2&gt;&lt;h3 id=&quot;urllib-request-urlopen-url-data-None-timeout-cafile-None-capath-None-cadefault-False-context-None&quot;&gt;&lt;a href=&quot;#urllib-request-urlopen-url-data-None-timeout-cafile-None-capath-None-cadefault-False-context-None&quot; class=&quot;headerlink&quot; title=&quot;urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)&quot;&gt;&lt;/a&gt;urllib.request.urlopen(url, data=None, [timeout, ]*, cafile=None, capath=None, cadefault=False, context=None)&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; urllib.request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = urllib.request.urlopen(&lt;span class=&quot;string&quot;&gt;&#39;http://www.baidu.com&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.read().decode(&lt;span class=&quot;string&quot;&gt;&#39;utf-8&#39;&lt;/span&gt;))&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; urllib.parse&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; urllib.request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data = bytes(urllib.parse.urlencode(&amp;#123;&lt;span class=&quot;string&quot;&gt;&#39;word&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;hello&#39;&lt;/span&gt;&amp;#125;), encoding=&lt;span class=&quot;string&quot;&gt;&#39;utf8&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = urllib.request.urlopen(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/post&#39;&lt;/span&gt;, data=data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.read())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;b&amp;apos;{\n  &amp;quot;args&amp;quot;: {}, \n  &amp;quot;data&amp;quot;: &amp;quot;&amp;quot;, \n  &amp;quot;files&amp;quot;: {}, \n  &amp;quot;form&amp;quot;: {\n    &amp;quot;word&amp;quot;: &amp;quot;hello&amp;quot;\n  }, \n  &amp;quot;headers&amp;quot;: {\n    &amp;quot;Accept-Encoding&amp;quot;: &amp;quot;identity&amp;quot;, \n    &amp;quot;Connect-Time&amp;quot;: &amp;quot;1&amp;quot;, \n    &amp;quot;Connection&amp;quot;: &amp;quot;close&amp;quot;, \n    &amp;quot;Content-Length&amp;quot;: &amp;quot;10&amp;quot;, \n    &amp;quot;Content-Type&amp;quot;: &amp;quot;application/x-www-form-urlencoded&amp;quot;, \n    &amp;quot;Host&amp;quot;: &amp;quot;httpbin.org&amp;quot;, \n    &amp;quot;Total-Route-Time&amp;quot;: &amp;quot;0&amp;quot;, \n    &amp;quot;User-Agent&amp;quot;: &amp;quot;Python-urllib/3.5&amp;quot;, \n    &amp;quot;Via&amp;quot;: &amp;quot;1.1 vegur&amp;quot;, \n    &amp;quot;X-Request-Id&amp;quot;: &amp;quot;89667a57-c909-475a-9870-f01181e8c85d&amp;quot;\n  }, \n  &amp;quot;json&amp;quot;: null, \n  &amp;quot;origin&amp;quot;: &amp;quot;219.238.82.169&amp;quot;, \n  &amp;quot;url&amp;quot;: &amp;quot;http://httpbin.org/post&amp;quot;\n}\n&amp;apos;
&lt;/code&gt;&lt;/pre&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; urllib.request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = urllib.request.urlopen(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/get&#39;&lt;/span&gt;, timeout=&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.read())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;b&amp;apos;{\n  &amp;quot;args&amp;quot;: {}, \n  &amp;quot;headers&amp;quot;: {\n    &amp;quot;Accept-Encoding&amp;quot;: &amp;quot;identity&amp;quot;, \n    &amp;quot;Host&amp;quot;: &amp;quot;httpbin.org&amp;quot;, \n    &amp;quot;User-Agent&amp;quot;: &amp;quot;Python-urllib/3.6&amp;quot;\n  }, \n  &amp;quot;origin&amp;quot;: &amp;quot;211.138.20.169, 211.138.20.169&amp;quot;, \n  &amp;quot;url&amp;quot;: &amp;quot;https://httpbin.org/get&amp;quot;\n}\n&amp;apos;
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（二）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（二）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（二）"><a href="#我的-Python-笔记（二）" class="headerlink" title="我的 Python 笔记（二）"></a>我的 Python 笔记（二）</h1><h2 id="搭建-Django-开发环境"><a href="#搭建-Django-开发环境" class="headerlink" title="搭建 Django 开发环境"></a>搭建 Django 开发环境</h2><blockquote><p>学习了Python的语法和基础知识，对于老程序员来说，可直接上手学习web全能型Python框架Django</p></blockquote><h3 id="基础环境"><a href="#基础环境" class="headerlink" title="基础环境"></a>基础环境</h3><ul><li>system : windows 10 </li><li>python : anaconda3 并创建虚拟环境 conda create -n leanrn python=3.6</li><li>Django : V2.1  Django 2.1支持Python 3.5及以后版本。</li><li>查看Django版本信息 : python -m django –version</li></ul><blockquote><p><strong>打开Anaconda Prompt 终端</strong></p></blockquote><ol><li><p>创建虚拟环境</p><blockquote><p>$&gt; conda create -n learn python=3.6<br>注：我的windows10 里面 创建的虚拟环境对应的目录是在~.conda\envs\learn\python.exe</p></blockquote></li><li><p>查看当前环境</p><blockquote><p>$&gt; conda env list</p></blockquote></li><li><p>激活创建的新环境 learn</p><blockquote><p>$&gt; activate learn</p></blockquote></li><li><p>查看当前环境下安装的包</p><blockquote><p>$&gt; conda list</p></blockquote></li><li><p>安装Django包</p><blockquote><p>$&gt; conda install django=2.=1   或者  pip install django==2.1</p></blockquote></li><li><p>安装pymysql包</p><blockquote><p>$&gt; conda install pymysql</p></blockquote></li></ol><h3 id="配置开发环境-pycharm"><a href="#配置开发环境-pycharm" class="headerlink" title="配置开发环境 pycharm"></a>配置开发环境 pycharm</h3><ol><li>使用Django创建项目骨架, learn_site是项目名称 <blockquote><p>$&gt; django-admin startproject learn_site<br>注: </p><ol><li>也可以使用pycharm新建项目，选择New Project，在左面选择Django，右面Location路径填写你的项目目录，我的是D:\py_code\learn_site</li><li>Project Interpreter &gt; Existing interpreter &gt; interpreter 里面选择你新建的环境的python.exe</li><li>在More Settings &gt; Application name: 给模块起个名字  blog</li><li>django中的基本概念，一个项目中包含多个Application应用，这里建的blog是建立项目时一起新建一个应用。当然这里可以不新建应用，不是必须的 </li><li>记得选中Enable Django admin,这个是Django自带的非常强大的web后台管理平台。<a id="more"></a></li></ol></blockquote></li><li><p>启动项目，验证 进入项目的根目录 </p><blockquote><p>$&gt; python manage.py runserver<br>注：</p><ol><li>点击其中的链接，或使用浏览器访问<a href="http://127.0.0.1:8000/即可看到Django的欢迎页面" target="_blank" rel="noopener">http://127.0.0.1:8000/即可看到Django的欢迎页面</a></li><li>这是Django开发服务器展现的网页，官方不建议在生产环境中使用开发服务器，所以在生产环境中仍需要使用Apache、Nginx等Web服务器。生产环境必须在项目根目录的settings.py关闭DEBUG = False</li><li>Django开发服务器会自动加载更新后的Python代码，无需重启。但增加文件后需要重启Django开发服务器。</li><li>指定IP和端口 python manage.py runserver 0:8000</li></ol></blockquote></li><li><p>创建应用  在项目根目录（manage.py）</p><blockquote><p>$&gt; python manage.py startapp blog</p></blockquote></li><li><p>修改learn_site/settings.py 文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    .....</span><br><span class="line">    &apos;blog&apos;, # 添加应用 或者使用 &apos;blog.apps.BlogConfig&apos;,</span><br><span class="line">]</span><br><span class="line">DATABASES = &#123;</span><br><span class="line">    &apos;default&apos;: &#123;</span><br><span class="line">        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,</span><br><span class="line">        &apos;NAME&apos;: &apos;blog&apos;,  # mysql中创建数据库 create database blog</span><br><span class="line">        &apos;USER&apos;: &apos;root&apos;,</span><br><span class="line">        &apos;PASSWORD&apos;: &apos;123456&apos;,</span><br><span class="line">        &apos;HOST&apos;: &apos;127.0.0.1&apos;,</span><br><span class="line">        &apos;PORT&apos;: &apos;3306&apos;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">LANGUAGE_CODE = &apos;zh_Hans&apos;  # 修改语言</span><br><span class="line"></span><br><span class="line">TIME_ZONE = &apos;Asia/Shanghai&apos;  #修改时区</span><br></pre></td></tr></table></figure></li><li><p>打开blog/views.py，输入以下代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">from django.http import HttpResponse</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">def index(request):</span><br><span class="line">    return HttpResponse(&quot;Hello, world.&quot;)</span><br></pre></td></tr></table></figure></li><li><p>修改learn_site/urls.py文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">app_name = &apos;blog&apos;  # 命名空间</span><br><span class="line">urlpatterns = [</span><br><span class="line">    url(r&apos;^admin/&apos;, admin.site.urls),</span><br><span class="line">    url(r&apos;blog/&apos;, include((&apos;blog.urls&apos;, &apos;blog&apos;), namespace=&apos;blog&apos;)),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>修改 learn_site/ <strong>init</strong>.py文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import pymysql</span><br><span class="line">pymysql.install_as_MySQLdb()</span><br></pre></td></tr></table></figure></li><li><p>修改blog\urls.py文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">from django.urls import path</span><br><span class="line"> </span><br><span class="line">from . import views</span><br><span class="line"> </span><br><span class="line">urlpatterns = [</span><br><span class="line">    path(&apos;&apos;, views.index, name=&apos;index&apos;),</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>启动django  </p><blockquote><p>$&gt; python manage.py runserver </p></blockquote></li><li><p>访问 <a href="http://127.0.0.1:8000/blog" target="_blank" rel="noopener">http://127.0.0.1:8000/blog</a> 即可显示Hello world.</p></li></ol><h3 id="Django-命令操作"><a href="#Django-命令操作" class="headerlink" title="Django 命令操作"></a>Django 命令操作</h3><blockquote><ol><li>创建管理员账号<br> $&gt; <strong>python manage.py createsuperuser –username=admin <a href="mailto:--email=admin@qq.com" target="_blank" rel="noopener">--email=admin@qq.com</a></strong></li></ol></blockquote><blockquote><ol><li>模型生成sql脚本 appname 是应用名称  如果不写表示生成所有应用的sql<br> $&gt; <strong>python manage.py makemigrations appname</strong> </li></ol></blockquote><blockquote><ol><li>模型orm到mysql<br> $&gt; <strong>python manage.py migrate</strong>   </li></ol></blockquote><blockquote><ol><li>清空数据库<br> $&gt; <strong>python manage.py flush</strong> </li></ol></blockquote><blockquote><ol><li>项目终端<br> $&gt; <strong>python manage.py shell</strong> </li></ol></blockquote><blockquote><ol><li>修改管理员密码<br> $&gt; <strong>python manage.py changepassword username</strong>     </li></ol></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（二）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（二）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（二）&quot;&gt;&lt;/a&gt;我的 Python 笔记（二）&lt;/h1&gt;&lt;h2 id=&quot;搭建-Django-开发环境&quot;&gt;&lt;a href=&quot;#搭建-Django-开发环境&quot; class=&quot;headerlink&quot; title=&quot;搭建 Django 开发环境&quot;&gt;&lt;/a&gt;搭建 Django 开发环境&lt;/h2&gt;&lt;blockquote&gt;
&lt;p&gt;学习了Python的语法和基础知识，对于老程序员来说，可直接上手学习web全能型Python框架Django&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;基础环境&quot;&gt;&lt;a href=&quot;#基础环境&quot; class=&quot;headerlink&quot; title=&quot;基础环境&quot;&gt;&lt;/a&gt;基础环境&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;system : windows 10 &lt;/li&gt;
&lt;li&gt;python : anaconda3 并创建虚拟环境 conda create -n leanrn python=3.6&lt;/li&gt;
&lt;li&gt;Django : V2.1  Django 2.1支持Python 3.5及以后版本。&lt;/li&gt;
&lt;li&gt;查看Django版本信息 : python -m django –version&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;打开Anaconda Prompt 终端&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;&lt;p&gt;创建虚拟环境&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; conda create -n learn python=3.6&lt;br&gt;注：我的windows10 里面 创建的虚拟环境对应的目录是在~.conda\envs\learn\python.exe&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看当前环境&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; conda env list&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;激活创建的新环境 learn&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; activate learn&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;查看当前环境下安装的包&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; conda list&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装Django包&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; conda install django=2.=1   或者  pip install django==2.1&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;安装pymysql包&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;$&amp;gt; conda install pymysql&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;配置开发环境-pycharm&quot;&gt;&lt;a href=&quot;#配置开发环境-pycharm&quot; class=&quot;headerlink&quot; title=&quot;配置开发环境 pycharm&quot;&gt;&lt;/a&gt;配置开发环境 pycharm&lt;/h3&gt;&lt;ol&gt;
&lt;li&gt;使用Django创建项目骨架, learn_site是项目名称 &lt;blockquote&gt;
&lt;p&gt;$&amp;gt; django-admin startproject learn_site&lt;br&gt;注: &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;也可以使用pycharm新建项目，选择New Project，在左面选择Django，右面Location路径填写你的项目目录，我的是D:\py_code\learn_site&lt;/li&gt;
&lt;li&gt;Project Interpreter &amp;gt; Existing interpreter &amp;gt; interpreter 里面选择你新建的环境的python.exe&lt;/li&gt;
&lt;li&gt;在More Settings &amp;gt; Application name: 给模块起个名字  blog&lt;/li&gt;
&lt;li&gt;django中的基本概念，一个项目中包含多个Application应用，这里建的blog是建立项目时一起新建一个应用。当然这里可以不新建应用，不是必须的 &lt;/li&gt;
&lt;li&gt;记得选中Enable Django admin,这个是Django自带的非常强大的web后台管理平台。
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（五）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%94%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（五）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（五）"><a href="#我的-Python-笔记（五）" class="headerlink" title="我的 Python 笔记（五）"></a>我的 Python 笔记（五）</h1><h2 id="Python-中的-正则表达式-爬虫"><a href="#Python-中的-正则表达式-爬虫" class="headerlink" title="Python 中的 正则表达式 爬虫"></a>Python 中的 正则表达式 爬虫</h2><h3 id="常见匹配模式"><a href="#常见匹配模式" class="headerlink" title="常见匹配模式"></a>常见匹配模式</h3><table><thead><tr><th>模式</th><th>描述</th></tr></thead><tbody><tr><td>\w</td><td>匹配字母数字及下划线</td></tr><tr><td>\W</td><td>匹配非字母数字下划线</td></tr><tr><td>\s</td><td>匹配任意空白字符，等价于 [\t\n\r\f].</td></tr><tr><td>\S</td><td>匹配任意非空字符</td></tr><tr><td>\d</td><td>匹配任意数字，等价于 [0-9]</td></tr><tr><td>\D</td><td>匹配任意非数字</td></tr><tr><td>\A</td><td>匹配字符串开始</td></tr><tr><td>\Z</td><td>匹配字符串结束，如果是存在换行，只匹配到换行前的结束字符串</td></tr><tr><td>\z</td><td>匹配字符串结束</td></tr><tr><td>\G</td><td>匹配最后匹配完成的位置</td></tr><tr><td>\n</td><td>匹配一个换行符</td></tr><tr><td>\t</td><td>匹配一个制表符</td></tr><tr><td>^</td><td>匹配字符串的开头</td></tr><tr><td>$</td><td>匹配字符串的末尾。</td></tr><tr><td>.</td><td>匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。</td></tr><tr><td>[…]</td><td>用来表示一组字符,单独列出：[amk] 匹配 ‘a’，’m’或’k’</td></tr><tr><td>[^…]</td><td>不在[]中的字符：[^abc] 匹配除了a,b,c之外的字符。</td></tr><tr><td>*</td><td>匹配0个或多个的表达式。</td></tr><tr><td>+</td><td>匹配1个或多个的表达式。</td></tr><tr><td>?</td><td>匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式</td></tr><tr><td>{n}</td><td>精确匹配n个前面表达式。</td></tr><tr><td>{n, m}</td><td>匹配 n 到 m 次由前面的正则表达式定义的片段，贪婪方式</td></tr><tr><td>a&#124;b</td><td>匹配a或b</td></tr><tr><td>( )</td><td>匹配括号内的表达式，也表示一个组</td></tr></tbody></table><h3 id="re-match"><a href="#re-match" class="headerlink" title="re.match"></a>re.match</h3><p>re.match 尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。<br>re.match(pattern, string, flags=0)</p><h3 id="最常规的匹配"><a href="#最常规的匹配" class="headerlink" title="最常规的匹配"></a>最常规的匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Hello 123 4567 World_This is a Regex Demo'</span></span><br><span class="line">print(len(content))</span><br><span class="line">result = re.match(<span class="string">'^Hello\s\d\d\d\s\d&#123;4&#125;\s\w&#123;10&#125;.*Demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group())</span><br><span class="line">print(result.span())</span><br></pre></td></tr></table></figure><pre><code>41&lt;_sre.SRE_Match object; span=(0, 41), match=&apos;Hello 123 4567 World_This is a Regex Demo&apos;&gt;Hello 123 4567 World_This is a Regex Demo(0, 41)</code></pre><h3 id="泛匹配"><a href="#泛匹配" class="headerlink" title="泛匹配"></a>泛匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Hello 123 4567 World_This is a Regex Demo'</span></span><br><span class="line">result = re.match(<span class="string">'^Hello.*Demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group())</span><br><span class="line">print(result.span())</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 41), match=&apos;Hello 123 4567 World_This is a Regex Demo&apos;&gt;Hello 123 4567 World_This is a Regex Demo(0, 41)</code></pre><a id="more"></a><h3 id="匹配目标"><a href="#匹配目标" class="headerlink" title="匹配目标"></a>匹配目标</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Hello 1234567 World_This is a Regex Demo'</span></span><br><span class="line">result = re.match(<span class="string">'^Hello\s(\d+)\sWorld.*Demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br><span class="line">print(result.span())</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 40), match=&apos;Hello 1234567 World_This is a Regex Demo&apos;&gt;1234567(0, 40)</code></pre><h3 id="贪婪匹配"><a href="#贪婪匹配" class="headerlink" title="贪婪匹配"></a>贪婪匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Hello 1234567 World_This is a Regex Demo'</span></span><br><span class="line">result = re.match(<span class="string">'^He.*(\d+).*Demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 40), match=&apos;Hello 1234567 World_This is a Regex Demo&apos;&gt;7</code></pre><h3 id="非贪婪匹配"><a href="#非贪婪匹配" class="headerlink" title="非贪婪匹配"></a>非贪婪匹配</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Hello 1234567 World_This is a Regex Demo'</span></span><br><span class="line">result = re.match(<span class="string">'^He.*?(\d+).*Demo$'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 40), match=&apos;Hello 1234567 World_This is a Regex Demo&apos;&gt;1234567</code></pre><h3 id="匹配模式"><a href="#匹配模式" class="headerlink" title="匹配模式"></a>匹配模式</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'''Hello 1234567 World_This</span></span><br><span class="line"><span class="string">is a Regex Demo</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">result = re.match(<span class="string">'^He.*?(\d+).*?Demo$'</span>, content, re.S)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><pre><code>1234567</code></pre><h3 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'price is $5.00'</span></span><br><span class="line">result = re.match(<span class="string">'price is $5.00'</span>, content)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>None</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'price is $5.00'</span></span><br><span class="line">result = re.match(<span class="string">'price is \$5\.00'</span>, content)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 14), match=&apos;price is $5.00&apos;&gt;</code></pre><p>总结：尽量使用泛匹配、使用括号得到匹配目标、尽量使用非贪婪模式、有换行符就用re.S</p><h2 id="re-search"><a href="#re-search" class="headerlink" title="re.search"></a>re.search</h2><p>re.search 扫描整个字符串并返回第一个成功的匹配。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Extra stings Hello 1234567 World_This is a Regex Demo Extra stings'</span></span><br><span class="line">result = re.match(<span class="string">'Hello.*?(\d+).*?Demo'</span>, content)</span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>None</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Extra stings Hello 1234567 World_This is a Regex Demo Extra stings'</span></span><br><span class="line">result = re.search(<span class="string">'Hello.*?(\d+).*?Demo'</span>, content)</span><br><span class="line">print(result)</span><br><span class="line">print(result.group(<span class="number">1</span>))</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(13, 53), match=&apos;Hello 1234567 World_This is a Regex Demo&apos;&gt;1234567</code></pre><p>总结：为匹配方便，能用search就不用match</p><h3 id="匹配演练"><a href="#匹配演练" class="headerlink" title="匹配演练"></a>匹配演练</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;&lt;i class="fa fa-user"&gt;&lt;/i&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">result = re.search(<span class="string">'&lt;li.*?active.*?singer="(.*?)"&gt;(.*?)&lt;/a&gt;'</span>, html, re.S)</span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">    print(result.group(<span class="number">1</span>), result.group(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><pre><code>齐秦 往事随风</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">result = re.search(<span class="string">'&lt;li.*?singer="(.*?)"&gt;(.*?)&lt;/a&gt;'</span>, html, re.S)</span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">    print(result.group(<span class="number">1</span>), result.group(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><pre><code>任贤齐 沧海一声笑</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">result = re.search(<span class="string">'&lt;li.*?singer="(.*?)"&gt;(.*?)&lt;/a&gt;'</span>, html)</span><br><span class="line"><span class="keyword">if</span> result:</span><br><span class="line">    print(result.group(<span class="number">1</span>), result.group(<span class="number">2</span>))</span><br></pre></td></tr></table></figure><pre><code>beyond 光辉岁月</code></pre><h2 id="re-findall"><a href="#re-findall" class="headerlink" title="re.findall"></a>re.findall</h2><p>搜索字符串，以列表形式返回全部能匹配的子串。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">results = re.findall(<span class="string">'&lt;li.*?href="(.*?)".*?singer="(.*?)"&gt;(.*?)&lt;/a&gt;'</span>, html, re.S)</span><br><span class="line">print(results)</span><br><span class="line">print(type(results))</span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    print(result)</span><br><span class="line">    print(result[<span class="number">0</span>], result[<span class="number">1</span>], result[<span class="number">2</span>])</span><br></pre></td></tr></table></figure><pre><code>[(&apos;/2.mp3&apos;, &apos;任贤齐&apos;, &apos;沧海一声笑&apos;), (&apos;/3.mp3&apos;, &apos;齐秦&apos;, &apos;往事随风&apos;), (&apos;/4.mp3&apos;, &apos;beyond&apos;, &apos;光辉岁月&apos;), (&apos;/5.mp3&apos;, &apos;陈慧琳&apos;, &apos;记事本&apos;), (&apos;/6.mp3&apos;, &apos;邓丽君&apos;, &apos;但愿人长久&apos;)]&lt;class &apos;list&apos;&gt;(&apos;/2.mp3&apos;, &apos;任贤齐&apos;, &apos;沧海一声笑&apos;)/2.mp3 任贤齐 沧海一声笑(&apos;/3.mp3&apos;, &apos;齐秦&apos;, &apos;往事随风&apos;)/3.mp3 齐秦 往事随风(&apos;/4.mp3&apos;, &apos;beyond&apos;, &apos;光辉岁月&apos;)/4.mp3 beyond 光辉岁月(&apos;/5.mp3&apos;, &apos;陈慧琳&apos;, &apos;记事本&apos;)/5.mp3 陈慧琳 记事本(&apos;/6.mp3&apos;, &apos;邓丽君&apos;, &apos;但愿人长久&apos;)/6.mp3 邓丽君 但愿人长久</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">results = re.findall(<span class="string">'&lt;li.*?&gt;\s*?(&lt;a.*?&gt;)?(\w+)(&lt;/a&gt;)?\s*?&lt;/li&gt;'</span>, html, re.S)</span><br><span class="line">print(results)</span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    print(result[<span class="number">1</span>])</span><br></pre></td></tr></table></figure><pre><code>[(&apos;&apos;, &apos;一路上有你&apos;, &apos;&apos;), (&apos;&lt;a href=&quot;/2.mp3&quot; singer=&quot;任贤齐&quot;&gt;&apos;, &apos;沧海一声笑&apos;, &apos;&lt;/a&gt;&apos;), (&apos;&lt;a href=&quot;/3.mp3&quot; singer=&quot;齐秦&quot;&gt;&apos;, &apos;往事随风&apos;, &apos;&lt;/a&gt;&apos;), (&apos;&lt;a href=&quot;/4.mp3&quot; singer=&quot;beyond&quot;&gt;&apos;, &apos;光辉岁月&apos;, &apos;&lt;/a&gt;&apos;), (&apos;&lt;a href=&quot;/5.mp3&quot; singer=&quot;陈慧琳&quot;&gt;&apos;, &apos;记事本&apos;, &apos;&lt;/a&gt;&apos;), (&apos;&lt;a href=&quot;/6.mp3&quot; singer=&quot;邓丽君&quot;&gt;&apos;, &apos;但愿人长久&apos;, &apos;&lt;/a&gt;&apos;)]一路上有你沧海一声笑往事随风光辉岁月记事本但愿人长久</code></pre><h3 id="re-sub"><a href="#re-sub" class="headerlink" title="re.sub"></a>re.sub</h3><p>替换字符串中每一个匹配的子串后返回替换后的字符串。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Extra stings Hello 1234567 World_This is a Regex Demo Extra stings'</span></span><br><span class="line">content = re.sub(<span class="string">'\d+'</span>, <span class="string">''</span>, content)</span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure><pre><code>Extra stings Hello  World_This is a Regex Demo Extra stings</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Extra stings Hello 1234567 World_This is a Regex Demo Extra stings'</span></span><br><span class="line">content = re.sub(<span class="string">'\d+'</span>, <span class="string">'Replacement'</span>, content)</span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure><pre><code>Extra stings Hello Replacement World_This is a Regex Demo Extra stings</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'Extra stings Hello 1234567 World_This is a Regex Demo Extra stings'</span></span><br><span class="line">content = re.sub(<span class="string">'(\d+)'</span>, <span class="string">r'\1 8910'</span>, content)</span><br><span class="line">print(content)</span><br></pre></td></tr></table></figure><pre><code>Extra stings Hello 1234567 8910 World_This is a Regex Demo Extra stings</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">html = <span class="string">'''&lt;div id="songs-list"&gt;</span></span><br><span class="line"><span class="string">    &lt;h2 class="title"&gt;经典老歌&lt;/h2&gt;</span></span><br><span class="line"><span class="string">    &lt;p class="introduction"&gt;</span></span><br><span class="line"><span class="string">        经典老歌列表</span></span><br><span class="line"><span class="string">    &lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;ul id="list" class="list-group"&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="2"&gt;一路上有你&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="7"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/2.mp3" singer="任贤齐"&gt;沧海一声笑&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="4" class="active"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/3.mp3" singer="齐秦"&gt;往事随风&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="6"&gt;&lt;a href="/4.mp3" singer="beyond"&gt;光辉岁月&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;&lt;a href="/5.mp3" singer="陈慧琳"&gt;记事本&lt;/a&gt;&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;li data-view="5"&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="/6.mp3" singer="邓丽君"&gt;但愿人长久&lt;/a&gt;</span></span><br><span class="line"><span class="string">        &lt;/li&gt;</span></span><br><span class="line"><span class="string">    &lt;/ul&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;'''</span></span><br><span class="line">html = re.sub(<span class="string">'&lt;a.*?&gt;|&lt;/a&gt;'</span>, <span class="string">''</span>, html)</span><br><span class="line">print(html)</span><br><span class="line">results = re.findall(<span class="string">'&lt;li.*?&gt;(.*?)&lt;/li&gt;'</span>, html, re.S)</span><br><span class="line">print(results)</span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    print(result.strip())</span><br></pre></td></tr></table></figure><pre><code>&lt;div id=&quot;songs-list&quot;&gt;    &lt;h2 class=&quot;title&quot;&gt;经典老歌&lt;/h2&gt;    &lt;p class=&quot;introduction&quot;&gt;        经典老歌列表    &lt;/p&gt;    &lt;ul id=&quot;list&quot; class=&quot;list-group&quot;&gt;        &lt;li data-view=&quot;2&quot;&gt;一路上有你&lt;/li&gt;        &lt;li data-view=&quot;7&quot;&gt;            沧海一声笑        &lt;/li&gt;        &lt;li data-view=&quot;4&quot; class=&quot;active&quot;&gt;            往事随风        &lt;/li&gt;        &lt;li data-view=&quot;6&quot;&gt;光辉岁月&lt;/li&gt;        &lt;li data-view=&quot;5&quot;&gt;记事本&lt;/li&gt;        &lt;li data-view=&quot;5&quot;&gt;            但愿人长久        &lt;/li&gt;    &lt;/ul&gt;&lt;/div&gt;[&apos;一路上有你&apos;, &apos;\n            沧海一声笑\n        &apos;, &apos;\n            往事随风\n        &apos;, &apos;光辉岁月&apos;, &apos;记事本&apos;, &apos;\n            但愿人长久\n        &apos;]一路上有你沧海一声笑往事随风光辉岁月记事本但愿人长久</code></pre><h2 id="re-compile"><a href="#re-compile" class="headerlink" title="re.compile"></a>re.compile</h2><p>将正则字符串编译成正则表达式对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将一个正则表达式串编译成正则对象，以便于复用该匹配模式</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">content = <span class="string">'''Hello 1234567 World_This</span></span><br><span class="line"><span class="string">is a Regex Demo'''</span></span><br><span class="line">pattern = re.compile(<span class="string">'Hello.*Demo'</span>, re.S)</span><br><span class="line">result = re.match(pattern, content)</span><br><span class="line"><span class="comment">#result = re.match('Hello.*Demo', content, re.S)</span></span><br><span class="line">print(result)</span><br></pre></td></tr></table></figure><pre><code>&lt;_sre.SRE_Match object; span=(0, 40), match=&apos;Hello 1234567 World_This\nis a Regex Demo&apos;&gt;</code></pre><h2 id="实战练习"><a href="#实战练习" class="headerlink" title="实战练习"></a>实战练习</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line">content = requests.get(<span class="string">'https://book.douban.com/'</span>).text</span><br><span class="line">pattern = re.compile(<span class="string">'&lt;li.*?cover.*?href="(.*?)".*?title="(.*?)".*?more-meta.*?author"&gt;(.*?)&lt;/span&gt;.*?year"&gt;(.*?)&lt;/span&gt;.*?&lt;/li&gt;'</span>, re.S)</span><br><span class="line">results = re.findall(pattern, content)</span><br><span class="line"><span class="keyword">for</span> result <span class="keyword">in</span> results:</span><br><span class="line">    url, name, author, date = result</span><br><span class="line">    author = re.sub(<span class="string">'\s'</span>, <span class="string">''</span>, author)</span><br><span class="line">    date = re.sub(<span class="string">'\s'</span>, <span class="string">''</span>, date)</span><br><span class="line">    print(url, name, author, date)</span><br></pre></td></tr></table></figure><pre><code>https://book.douban.com/subject/26925834/?icn=index-editionrecommend 别走出这一步 [英]S.J.沃森 2017-1https://book.douban.com/subject/26953532/?icn=index-editionrecommend 白先勇细说红楼梦 白先勇 2017-2-1https://book.douban.com/subject/26959159/?icn=index-editionrecommend 岁月凶猛 冯仑 2017-2https://book.douban.com/subject/26949210/?icn=index-editionrecommend 如果没有今天，明天会不会有昨天？ [瑞士]伊夫·博萨尔特（YvesBossart） 2017-1https://book.douban.com/subject/27001447/?icn=index-editionrecommend 人类这100年 阿夏 2017-2https://book.douban.com/subject/26864566/?icn=index-latestbook-subject 眼泪的化学 [澳]彼得·凯里 2017-2https://book.douban.com/subject/26991064/?icn=index-latestbook-subject 青年斯大林 [英]西蒙·蒙蒂菲奥里 2017-3https://book.douban.com/subject/26938056/?icn=index-latestbook-subject 带艾伯特回家 [美]霍默·希卡姆 2017-3https://book.douban.com/subject/26954757/?icn=index-latestbook-subject 乳房 [美]弗洛伦斯·威廉姆斯 2017-2https://book.douban.com/subject/26956479/?icn=index-latestbook-subject 草原动物园 马伯庸 2017-3https://book.douban.com/subject/26956018/?icn=index-latestbook-subject 贩卖音乐 [美]大卫·伊斯曼 2017-3-1https://book.douban.com/subject/26703649/?icn=index-latestbook-subject 被占的宅子 [阿根廷]胡利奥·科塔萨尔 2017-3https://book.douban.com/subject/26578402/?icn=index-latestbook-subject 信仰与观看 [法]罗兰·雷希特(RolandRecht) 2017-2-17https://book.douban.com/subject/26939171/?icn=index-latestbook-subject 妹妹的坟墓 [美]罗伯特·杜格尼(RobertDugoni) 2017-3-1https://book.douban.com/subject/26972465/?icn=index-latestbook-subject 全栈市场人 Lydia 2017-2-1https://book.douban.com/subject/26986928/?icn=index-latestbook-subject 终极X战警2 [英]马克·米勒&amp;nbsp;/&amp;nbsp;[美]亚当·库伯特 2017-3-15https://book.douban.com/subject/26948144/?icn=index-latestbook-subject 格调（修订第3版） [美]保罗·福塞尔（PaulFussell） 2017-2https://book.douban.com/subject/26945792/?icn=index-latestbook-subject 原谅石 [美]洛里·斯皮尔曼 2017-2https://book.douban.com/subject/26974207/?icn=index-latestbook-subject 庇护二世闻见录 [意]皮科洛米尼 2017-2https://book.douban.com/subject/26983143/?icn=index-latestbook-subject 遇见野兔的那一年 [芬]阿托·帕西林纳 2017-3-1https://book.douban.com/subject/26976429/?icn=index-latestbook-subject 鲍勃·迪伦：诗人之歌 [法]让-多米尼克·布里埃 2017-4https://book.douban.com/subject/26962860/?icn=index-latestbook-subject 牙医谋杀案 [英]阿加莎·克里斯蒂 2017-3https://book.douban.com/subject/26923022/?icn=index-latestbook-subject 石挥谈艺录：把生命交给舞台 石挥 2017-2https://book.douban.com/subject/26897190/?icn=index-latestbook-subject 理想 [美]安·兰德 2017-2https://book.douban.com/subject/26985981/?icn=index-latestbook-subject 青苔不会消失 袁凌 2017-4https://book.douban.com/subject/26984949/?icn=index-latestbook-subject 地下铁道 [美]科尔森·怀特黑德（ColsonWhitehead） 2017-3https://book.douban.com/subject/26944012/?icn=index-latestbook-subject 极简进步史 [英]罗纳德·赖特 2017-4-1https://book.douban.com/subject/26969002/?icn=index-latestbook-subject 驻马店伤心故事集 郑在欢 2017-2https://book.douban.com/subject/26854223/?icn=index-latestbook-subject 致薇拉 [美]弗拉基米尔·纳博科夫 2017-3https://book.douban.com/subject/26841616/?icn=index-latestbook-subject 北方档案 [法]玛格丽特·尤瑟纳尔 2017-2https://book.douban.com/subject/26980391/?icn=index-latestbook-subject 食帖15：便当灵感集 林江 2017-2https://book.douban.com/subject/26958882/?icn=index-latestbook-subject 生火 [法]克里斯多夫·夏布特（ChristopheChabouté）编绘 2017-3https://book.douban.com/subject/26989163/?icn=index-latestbook-subject 文明之光（第四册） 吴军 2017-3-1https://book.douban.com/subject/26878906/?icn=index-latestbook-subject 公牛山 [美]布赖恩·帕诺威奇 2017-2https://book.douban.com/subject/26989534/?icn=index-latestbook-subject 几乎消失的偷闲艺术 [加拿大]达尼·拉费里埃 2017-4https://book.douban.com/subject/26939973/?icn=index-latestbook-subject 散步去 [日]谷口治郎 2017-3https://book.douban.com/subject/26865333/?icn=index-latestbook-subject 中国1945 [美]理查德·伯恩斯坦(RichardBernstein) 2017-3-1https://book.douban.com/subject/26989242/?icn=index-latestbook-subject 有匪2：离恨楼 Priest 2017-3https://book.douban.com/subject/26985790/?icn=index-latestbook-subject 女人、火与危险事物 [美]乔治·莱考夫 2017-3https://book.douban.com/subject/26972277/?icn=index-latestbook-subject 寻找时间的人 [爱尔兰]凯特·汤普森 2017-3https://www.douban.com/note/610758170/ 白先勇细说红楼梦【全二册】 白先勇 2017-2-1https://read.douban.com/ebook/31540864/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 奇爱博士 [英]彼得·乔治 2016-8-1https://read.douban.com/ebook/31433872/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 在时光中盛开的女子 李筱懿 2017-3https://read.douban.com/ebook/31178635/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 如何高效记忆（原书第2版） [美]肯尼思•希格比（KennethL.Higbee） 2017-3-5https://read.douban.com/ebook/31358183/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 愿无岁月可回头 回忆专用小马甲 2016-9https://read.douban.com/ebook/31341636/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 走神的艺术与科学 [新西兰]迈克尔·C.科尔巴里斯 2017-3-1https://read.douban.com/ebook/27621094/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 神秘的量子生命 [英]吉姆•艾尔－哈利利/约翰乔•麦克法登 2016-8https://read.douban.com/ebook/31221966/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 寻找时间的人 [爱尔兰]凯特·汤普森 2017-3https://read.douban.com/ebook/31481323/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 山之四季 [日]高村光太郎 2017-1https://read.douban.com/ebook/31154855/?dcs=book-hot&amp;amp;dcm=douban&amp;amp;dct=read-subject 东北游记 [美]迈克尔·麦尔 2017-1</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（五）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（五）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（五）&quot;&gt;&lt;/a&gt;我的 Python 笔记（五）&lt;/h1&gt;&lt;h2 id=&quot;Python-中的-正则表达式-爬虫&quot;&gt;&lt;a href=&quot;#Python-中的-正则表达式-爬虫&quot; class=&quot;headerlink&quot; title=&quot;Python 中的 正则表达式 爬虫&quot;&gt;&lt;/a&gt;Python 中的 正则表达式 爬虫&lt;/h2&gt;&lt;h3 id=&quot;常见匹配模式&quot;&gt;&lt;a href=&quot;#常见匹配模式&quot; class=&quot;headerlink&quot; title=&quot;常见匹配模式&quot;&gt;&lt;/a&gt;常见匹配模式&lt;/h3&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;模式&lt;/th&gt;
&lt;th&gt;描述&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;\w&lt;/td&gt;
&lt;td&gt;匹配字母数字及下划线&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\W&lt;/td&gt;
&lt;td&gt;匹配非字母数字下划线&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\s&lt;/td&gt;
&lt;td&gt;匹配任意空白字符，等价于 [\t\n\r\f].&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\S&lt;/td&gt;
&lt;td&gt;匹配任意非空字符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\d&lt;/td&gt;
&lt;td&gt;匹配任意数字，等价于 [0-9]&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\D&lt;/td&gt;
&lt;td&gt;匹配任意非数字&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\A&lt;/td&gt;
&lt;td&gt;匹配字符串开始&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\Z&lt;/td&gt;
&lt;td&gt;匹配字符串结束，如果是存在换行，只匹配到换行前的结束字符串&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\z&lt;/td&gt;
&lt;td&gt;匹配字符串结束&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\G&lt;/td&gt;
&lt;td&gt;匹配最后匹配完成的位置&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\n&lt;/td&gt;
&lt;td&gt;匹配一个换行符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;\t&lt;/td&gt;
&lt;td&gt;匹配一个制表符&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;^&lt;/td&gt;
&lt;td&gt;匹配字符串的开头&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;$&lt;/td&gt;
&lt;td&gt;匹配字符串的末尾。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;.&lt;/td&gt;
&lt;td&gt;匹配任意字符，除了换行符，当re.DOTALL标记被指定时，则可以匹配包括换行符的任意字符。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[…]&lt;/td&gt;
&lt;td&gt;用来表示一组字符,单独列出：[amk] 匹配 ‘a’，’m’或’k’&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;[^…]&lt;/td&gt;
&lt;td&gt;不在[]中的字符：[^abc] 匹配除了a,b,c之外的字符。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;*&lt;/td&gt;
&lt;td&gt;匹配0个或多个的表达式。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;+&lt;/td&gt;
&lt;td&gt;匹配1个或多个的表达式。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;?&lt;/td&gt;
&lt;td&gt;匹配0个或1个由前面的正则表达式定义的片段，非贪婪方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n}&lt;/td&gt;
&lt;td&gt;精确匹配n个前面表达式。&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;{n, m}&lt;/td&gt;
&lt;td&gt;匹配 n 到 m 次由前面的正则表达式定义的片段，贪婪方式&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;a&amp;#124;b&lt;/td&gt;
&lt;td&gt;匹配a或b&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;( )&lt;/td&gt;
&lt;td&gt;匹配括号内的表达式，也表示一个组&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;re-match&quot;&gt;&lt;a href=&quot;#re-match&quot; class=&quot;headerlink&quot; title=&quot;re.match&quot;&gt;&lt;/a&gt;re.match&lt;/h3&gt;&lt;p&gt;re.match 尝试从字符串的起始位置匹配一个模式，如果不是起始位置匹配成功的话，match()就返回none。&lt;br&gt;re.match(pattern, string, flags=0)&lt;/p&gt;
&lt;h3 id=&quot;最常规的匹配&quot;&gt;&lt;a href=&quot;#最常规的匹配&quot; class=&quot;headerlink&quot; title=&quot;最常规的匹配&quot;&gt;&lt;/a&gt;最常规的匹配&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;content = &lt;span class=&quot;string&quot;&gt;&#39;Hello 123 4567 World_This is a Regex Demo&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(len(content))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;result = re.match(&lt;span class=&quot;string&quot;&gt;&#39;^Hello\s\d\d\d\s\d&amp;#123;4&amp;#125;\s\w&amp;#123;10&amp;#125;.*Demo$&#39;&lt;/span&gt;, content)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result.group())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result.span())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;41
&amp;lt;_sre.SRE_Match object; span=(0, 41), match=&amp;apos;Hello 123 4567 World_This is a Regex Demo&amp;apos;&amp;gt;
Hello 123 4567 World_This is a Regex Demo
(0, 41)
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;泛匹配&quot;&gt;&lt;a href=&quot;#泛匹配&quot; class=&quot;headerlink&quot; title=&quot;泛匹配&quot;&gt;&lt;/a&gt;泛匹配&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; re&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;content = &lt;span class=&quot;string&quot;&gt;&#39;Hello 123 4567 World_This is a Regex Demo&#39;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;result = re.match(&lt;span class=&quot;string&quot;&gt;&#39;^Hello.*Demo$&#39;&lt;/span&gt;, content)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result.group())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(result.span())&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;_sre.SRE_Match object; span=(0, 41), match=&amp;apos;Hello 123 4567 World_This is a Regex Demo&amp;apos;&amp;gt;
Hello 123 4567 World_This is a Regex Demo
(0, 41)
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（六）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E5%85%AD%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（六）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（六）"><a href="#我的-Python-笔记（六）" class="headerlink" title="我的 Python 笔记（六）"></a>我的 Python 笔记（六）</h1><h1 id="BeautifulSoup"><a href="#BeautifulSoup" class="headerlink" title="BeautifulSoup"></a>BeautifulSoup</h1><h2 id="解析库"><a href="#解析库" class="headerlink" title="解析库"></a>解析库</h2><table><thead><tr><th>解析器</th><th>使用方法</th><th>优势</th><th>劣势</th></tr></thead><tbody><tr><td>Python标准库</td><td>BeautifulSoup(markup, “html.parser”)</td><td>Python的内置标准库、执行速度适中 、文档容错能力强</td><td>Python 2.7.3 or 3.2.2)前的版本中文容错能力差</td></tr><tr><td>lxml HTML 解析器</td><td>BeautifulSoup(markup, “lxml”)</td><td>速度快、文档容错能力强</td><td>需要安装C语言库</td></tr><tr><td>lxml XML 解析器</td><td>BeautifulSoup(markup, “xml”)</td><td>速度快、唯一支持XML的解析器</td><td>需要安装C语言库</td></tr><tr><td>html5lib</td><td>BeautifulSoup(markup, “html5lib”)</td><td>最好的容错性、以浏览器的方式解析文档、生成HTML5格式的文档</td><td>速度慢、不依赖外部扩展</td></tr></tbody></table><h2 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.prettify())</span><br><span class="line">print(soup.title.string)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"> &lt;head&gt;</span><br><span class="line">  &lt;title&gt;</span><br><span class="line">   The Dormouse&apos;s story</span><br><span class="line">  &lt;/title&gt;</span><br><span class="line"> &lt;/head&gt;</span><br><span class="line"> &lt;body&gt;</span><br><span class="line">  &lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;</span><br><span class="line">   &lt;b&gt;</span><br><span class="line">    The Dormouse&apos;s story</span><br><span class="line">   &lt;/b&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">   Once upon a time there were three little sisters; and their names were</span><br><span class="line">   &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">    &lt;!-- Elsie --&gt;</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   ,</span><br><span class="line">   &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;</span><br><span class="line">    Lacie</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   and</span><br><span class="line">   &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;</span><br><span class="line">    Tillie</span><br><span class="line">   &lt;/a&gt;</span><br><span class="line">   ;</span><br><span class="line">and they lived at the bottom of a well.</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">   ...</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line"> &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><h2 id="标签选择器"><a href="#标签选择器" class="headerlink" title="标签选择器"></a>标签选择器</h2><h3 id="选择元素"><a href="#选择元素" class="headerlink" title="选择元素"></a>选择元素</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.title)</span><br><span class="line">print(type(soup.title))</span><br><span class="line">print(soup.head)</span><br><span class="line">print(soup.p)</span><br></pre></td></tr></table></figure><pre><code>&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;class &apos;bs4.element.Tag&apos;&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&apos;s story&lt;/b&gt;&lt;/p&gt;</code></pre><h3 id="获取名称"><a href="#获取名称" class="headerlink" title="获取名称"></a>获取名称</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.title.name)</span><br></pre></td></tr></table></figure><pre><code>title</code></pre><a id="more"></a><h3 id="获取属性"><a href="#获取属性" class="headerlink" title="获取属性"></a>获取属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.p.attrs[<span class="string">'name'</span>])</span><br><span class="line">print(soup.p[<span class="string">'name'</span>])</span><br></pre></td></tr></table></figure><h3 id="获取内容"><a href="#获取内容" class="headerlink" title="获取内容"></a>获取内容</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p clss="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.p.string)</span><br></pre></td></tr></table></figure><h3 id="嵌套选择"><a href="#嵌套选择" class="headerlink" title="嵌套选择"></a>嵌套选择</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse's story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class="title" name="dromouse"&gt;&lt;b&gt;The Dormouse's story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.head.title.string)</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line"><span class="comment">### 子节点和子孙节点</span></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;</span></span><br><span class="line"><span class="string">            Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;</span></span><br><span class="line"><span class="string">                &lt;span&gt;Elsie&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; </span></span><br><span class="line"><span class="string">            and</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">            and they lived at the bottom of a well.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.p.contents)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">    [&apos;\n            Once upon a time there were three little sisters; and their names were\n            &apos;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">    &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;, &apos;\n&apos;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;, &apos; \n            and\n            &apos;, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;, &apos;\n            and they lived at the bottom of a well.\n        &apos;]</span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">----------</span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">html = &quot;&quot;&quot;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">            Once upon a time there were three little sisters; and their names were</span><br><span class="line">            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">                &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; </span><br><span class="line">            and</span><br><span class="line">            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line">            and they lived at the bottom of a well.</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, &apos;lxml&apos;)</span><br><span class="line">print(soup.p.children)</span><br><span class="line">for i, child in enumerate(soup.p.children):</span><br><span class="line">    print(i, child)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">    &lt;list_iterator object at 0x1064f7dd8&gt;</span><br><span class="line">    0 </span><br><span class="line">                Once upon a time there were three little sisters; and their names were</span><br><span class="line">                </span><br><span class="line">    1 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">    &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    2 </span><br><span class="line">    </span><br><span class="line">    3 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span><br><span class="line">    4  </span><br><span class="line">                and</span><br><span class="line">                </span><br><span class="line">    5 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line">    6 </span><br><span class="line">                and they lived at the bottom of a well.</span><br><span class="line">            </span><br><span class="line">```   </span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">html = &quot;&quot;&quot;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">            Once upon a time there were three little sisters; and their names were</span><br><span class="line">            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">                &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; </span><br><span class="line">            and</span><br><span class="line">            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line">            and they lived at the bottom of a well.</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, &apos;lxml&apos;)</span><br><span class="line">print(soup.p.descendants)</span><br><span class="line">for i, child in enumerate(soup.p.descendants):</span><br><span class="line">    print(i, child)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">    &lt;generator object descendants at 0x10650e678&gt;</span><br><span class="line">    0 </span><br><span class="line">                Once upon a time there were three little sisters; and their names were</span><br><span class="line">                </span><br><span class="line">    1 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">    &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">    &lt;/a&gt;</span><br><span class="line">    2 </span><br><span class="line">    </span><br><span class="line">    3 &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">    4 Elsie</span><br><span class="line">    5 </span><br><span class="line">    </span><br><span class="line">    6 </span><br><span class="line">    </span><br><span class="line">    7 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;</span><br><span class="line">    8 Lacie</span><br><span class="line">    9  </span><br><span class="line">                and</span><br><span class="line">                </span><br><span class="line">    10 &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line">    11 Tillie</span><br><span class="line">    12 </span><br><span class="line">                and they lived at the bottom of a well.</span><br><span class="line">            </span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">### 父节点和祖先节点</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">```python</span><br><span class="line">html = &quot;&quot;&quot;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;</span><br><span class="line">            Once upon a time there were three little sisters; and their names were</span><br><span class="line">            &lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;</span><br><span class="line">                &lt;span&gt;Elsie&lt;/span&gt;</span><br><span class="line">            &lt;/a&gt;</span><br><span class="line">            &lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; </span><br><span class="line">            and</span><br><span class="line">            &lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;</span><br><span class="line">            and they lived at the bottom of a well.</span><br><span class="line">        &lt;/p&gt;</span><br><span class="line">        &lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span><br><span class="line">&quot;&quot;&quot;</span><br><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, &apos;lxml&apos;)</span><br><span class="line">print(soup.a.parent)</span><br></pre></td></tr></table></figure><pre><code>&lt;p class=&quot;story&quot;&gt;            Once upon a time there were three little sisters; and their names were            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;span&gt;Elsie&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;             and            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;            and they lived at the bottom of a well.        &lt;/p&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;</span></span><br><span class="line"><span class="string">            Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;</span></span><br><span class="line"><span class="string">                &lt;span&gt;Elsie&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; </span></span><br><span class="line"><span class="string">            and</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">            and they lived at the bottom of a well.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(list(enumerate(soup.a.parents)))</span><br></pre></td></tr></table></figure><pre><code>[(0, &lt;p class=&quot;story&quot;&gt;            Once upon a time there were three little sisters; and their names were            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;span&gt;Elsie&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;             and            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;            and they lived at the bottom of a well.        &lt;/p&gt;), (1, &lt;body&gt;&lt;p class=&quot;story&quot;&gt;            Once upon a time there were three little sisters; and their names were            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;span&gt;Elsie&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;             and            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;            and they lived at the bottom of a well.        &lt;/p&gt;&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;&lt;/body&gt;), (2, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p class=&quot;story&quot;&gt;            Once upon a time there were three little sisters; and their names were            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;span&gt;Elsie&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;             and            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;            and they lived at the bottom of a well.        &lt;/p&gt;&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;), (3, &lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&apos;s story&lt;/title&gt;&lt;/head&gt;&lt;body&gt;&lt;p class=&quot;story&quot;&gt;            Once upon a time there were three little sisters; and their names were            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/elsie&quot; id=&quot;link1&quot;&gt;&lt;span&gt;Elsie&lt;/span&gt;&lt;/a&gt;&lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;             and            &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;            and they lived at the bottom of a well.        &lt;/p&gt;&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;)]</code></pre><h3 id="兄弟节点"><a href="#兄弟节点" class="headerlink" title="兄弟节点"></a>兄弟节点</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html = <span class="string">"""</span></span><br><span class="line"><span class="string">&lt;html&gt;</span></span><br><span class="line"><span class="string">    &lt;head&gt;</span></span><br><span class="line"><span class="string">        &lt;title&gt;The Dormouse's story&lt;/title&gt;</span></span><br><span class="line"><span class="string">    &lt;/head&gt;</span></span><br><span class="line"><span class="string">    &lt;body&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;</span></span><br><span class="line"><span class="string">            Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/elsie" class="sister" id="link1"&gt;</span></span><br><span class="line"><span class="string">                &lt;span&gt;Elsie&lt;/span&gt;</span></span><br><span class="line"><span class="string">            &lt;/a&gt;</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/lacie" class="sister" id="link2"&gt;Lacie&lt;/a&gt; </span></span><br><span class="line"><span class="string">            and</span></span><br><span class="line"><span class="string">            &lt;a href="http://example.com/tillie" class="sister" id="link3"&gt;Tillie&lt;/a&gt;</span></span><br><span class="line"><span class="string">            and they lived at the bottom of a well.</span></span><br><span class="line"><span class="string">        &lt;/p&gt;</span></span><br><span class="line"><span class="string">        &lt;p class="story"&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(list(enumerate(soup.a.next_siblings)))</span><br><span class="line">print(list(enumerate(soup.a.previous_siblings)))</span><br></pre></td></tr></table></figure><pre><code>[(0, &apos;\n&apos;), (1, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/lacie&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt;), (2, &apos; \n            and\n            &apos;), (3, &lt;a class=&quot;sister&quot; href=&quot;http://example.com/tillie&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;), (4, &apos;\n            and they lived at the bottom of a well.\n        &apos;)][(0, &apos;\n            Once upon a time there were three little sisters; and their names were\n            &apos;)]</code></pre><h2 id="标准选择器"><a href="#标准选择器" class="headerlink" title="标准选择器"></a>标准选择器</h2><h3 id="find-all-name-attrs-recursive-text-kwargs"><a href="#find-all-name-attrs-recursive-text-kwargs" class="headerlink" title="find_all( name , attrs , recursive , text , **kwargs )"></a>find_all( name , attrs , recursive , text , **kwargs )</h3><p>可根据标签名、属性、内容查找文档</p><h4 id="name"><a href="#name" class="headerlink" title="name"></a>name</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.find_all(<span class="string">'ul'</span>))</span><br><span class="line">print(type(soup.find_all(<span class="string">'ul'</span>)[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure><pre><code>[&lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;&lt;/ul&gt;, &lt;ul class=&quot;list list-small&quot; id=&quot;list-2&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;/ul&gt;]&lt;class &apos;bs4.element.Tag&apos;&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="keyword">for</span> ul <span class="keyword">in</span> soup.find_all(<span class="string">'ul'</span>):</span><br><span class="line">    print(ul.find_all(<span class="string">'li'</span>))</span><br></pre></td></tr></table></figure><pre><code>[&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;][&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;]</code></pre><h4 id="attrs"><a href="#attrs" class="headerlink" title="attrs"></a>attrs</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1" name="elements"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.find_all(attrs=&#123;<span class="string">'id'</span>: <span class="string">'list-1'</span>&#125;))</span><br><span class="line">print(soup.find_all(attrs=&#123;<span class="string">'name'</span>: <span class="string">'elements'</span>&#125;))</span><br></pre></td></tr></table></figure><pre><code>[&lt;ul class=&quot;list&quot; id=&quot;list-1&quot; name=&quot;elements&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;&lt;/ul&gt;][&lt;ul class=&quot;list&quot; id=&quot;list-1&quot; name=&quot;elements&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;&lt;/ul&gt;]</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.find_all(id=<span class="string">'list-1'</span>))</span><br><span class="line">print(soup.find_all(class_=<span class="string">'element'</span>))</span><br></pre></td></tr></table></figure><pre><code>[&lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;&lt;/ul&gt;][&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;]</code></pre><h4 id="text"><a href="#text" class="headerlink" title="text"></a>text</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.find_all(text=<span class="string">'Foo'</span>))</span><br></pre></td></tr></table></figure><pre><code>[&apos;Foo&apos;, &apos;Foo&apos;]</code></pre><h3 id="find-name-attrs-recursive-text-kwargs"><a href="#find-name-attrs-recursive-text-kwargs" class="headerlink" title="find( name , attrs , recursive , text , **kwargs )"></a>find( name , attrs , recursive , text , **kwargs )</h3><p>find返回单个元素，find_all返回所有元素</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.find(<span class="string">'ul'</span>))</span><br><span class="line">print(type(soup.find(<span class="string">'ul'</span>)))</span><br><span class="line">print(soup.find(<span class="string">'page'</span>))</span><br></pre></td></tr></table></figure><pre><code>&lt;ul class=&quot;list&quot; id=&quot;list-1&quot;&gt;&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;&lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;&lt;/ul&gt;&lt;class &apos;bs4.element.Tag&apos;&gt;None</code></pre><h3 id="find-parents-find-parent"><a href="#find-parents-find-parent" class="headerlink" title="find_parents()  find_parent()"></a>find_parents()  find_parent()</h3><p>find_parents()返回所有祖先节点，find_parent()返回直接父节点。</p><h3 id="find-next-siblings-find-next-sibling"><a href="#find-next-siblings-find-next-sibling" class="headerlink" title="find_next_siblings()  find_next_sibling()"></a>find_next_siblings()  find_next_sibling()</h3><p>find_next_siblings()返回后面所有兄弟节点，find_next_sibling()返回后面第一个兄弟节点。</p><h3 id="find-previous-siblings-find-previous-sibling"><a href="#find-previous-siblings-find-previous-sibling" class="headerlink" title="find_previous_siblings()  find_previous_sibling()"></a>find_previous_siblings()  find_previous_sibling()</h3><p>find_previous_siblings()返回前面所有兄弟节点，find_previous_sibling()返回前面第一个兄弟节点。</p><h3 id="find-all-next-find-next"><a href="#find-all-next-find-next" class="headerlink" title="find_all_next()  find_next()"></a>find_all_next()  find_next()</h3><p>find_all_next()返回节点后所有符合条件的节点, find_next()返回第一个符合条件的节点</p><h3 id="find-all-previous-和-find-previous"><a href="#find-all-previous-和-find-previous" class="headerlink" title="find_all_previous() 和 find_previous()"></a>find_all_previous() 和 find_previous()</h3><p>find_all_previous()返回节点后所有符合条件的节点, find_previous()返回第一个符合条件的节点</p><h2 id="CSS选择器"><a href="#CSS选择器" class="headerlink" title="CSS选择器"></a>CSS选择器</h2><p>通过select()直接传入CSS选择器即可完成选择</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line">print(soup.select(<span class="string">'.panel .panel-heading'</span>))</span><br><span class="line">print(soup.select(<span class="string">'ul li'</span>))</span><br><span class="line">print(soup.select(<span class="string">'#list-2 .element'</span>))</span><br><span class="line">print(type(soup.select(<span class="string">'ul'</span>)[<span class="number">0</span>]))</span><br></pre></td></tr></table></figure><pre><code>[&lt;div class=&quot;panel-heading&quot;&gt;&lt;h4&gt;Hello&lt;/h4&gt;&lt;/div&gt;][&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;][&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;]&lt;class &apos;bs4.element.Tag&apos;&gt;</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="keyword">for</span> ul <span class="keyword">in</span> soup.select(<span class="string">'ul'</span>):</span><br><span class="line">    print(ul.select(<span class="string">'li'</span>))</span><br></pre></td></tr></table></figure><pre><code>[&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Jay&lt;/li&gt;][&lt;li class=&quot;element&quot;&gt;Foo&lt;/li&gt;, &lt;li class=&quot;element&quot;&gt;Bar&lt;/li&gt;]</code></pre><h3 id="获取属性-1"><a href="#获取属性-1" class="headerlink" title="获取属性"></a>获取属性</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="keyword">for</span> ul <span class="keyword">in</span> soup.select(<span class="string">'ul'</span>):</span><br><span class="line">    print(ul[<span class="string">'id'</span>])</span><br><span class="line">    print(ul.attrs[<span class="string">'id'</span>])</span><br></pre></td></tr></table></figure><pre><code>list-1list-1list-2list-2</code></pre><h3 id="获取内容-1"><a href="#获取内容-1" class="headerlink" title="获取内容"></a>获取内容</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">html=<span class="string">'''</span></span><br><span class="line"><span class="string">&lt;div class="panel"&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-heading"&gt;</span></span><br><span class="line"><span class="string">        &lt;h4&gt;Hello&lt;/h4&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    &lt;div class="panel-body"&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list" id="list-1"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Jay&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">        &lt;ul class="list list-small" id="list-2"&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Foo&lt;/li&gt;</span></span><br><span class="line"><span class="string">            &lt;li class="element"&gt;Bar&lt;/li&gt;</span></span><br><span class="line"><span class="string">        &lt;/ul&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"><span class="keyword">for</span> li <span class="keyword">in</span> soup.select(<span class="string">'li'</span>):</span><br><span class="line">    print(li.get_text())</span><br></pre></td></tr></table></figure><pre><code>FooBarJayFooBar</code></pre><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul><li>推荐使用lxml解析库，必要时使用html.parser</li><li>标签选择筛选功能弱但是速度快</li><li>建议使用find()、find_all() 查询匹配单个结果或者多个结果</li><li>如果对CSS选择器熟悉建议使用select()</li><li>记住常用的获取属性和文本值的方法</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（六）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（六）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（六）&quot;&gt;&lt;/a&gt;我的 Python 笔记（六）&lt;/h1&gt;&lt;h1 id=&quot;BeautifulSoup&quot;&gt;&lt;a href=&quot;#BeautifulSoup&quot; class=&quot;headerlink&quot; title=&quot;BeautifulSoup&quot;&gt;&lt;/a&gt;BeautifulSoup&lt;/h1&gt;&lt;h2 id=&quot;解析库&quot;&gt;&lt;a href=&quot;#解析库&quot; class=&quot;headerlink&quot; title=&quot;解析库&quot;&gt;&lt;/a&gt;解析库&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;解析器&lt;/th&gt;
&lt;th&gt;使用方法&lt;/th&gt;
&lt;th&gt;优势&lt;/th&gt;
&lt;th&gt;劣势&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;Python标准库&lt;/td&gt;
&lt;td&gt;BeautifulSoup(markup, “html.parser”)&lt;/td&gt;
&lt;td&gt;Python的内置标准库、执行速度适中 、文档容错能力强&lt;/td&gt;
&lt;td&gt;Python 2.7.3 or 3.2.2)前的版本中文容错能力差&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lxml HTML 解析器&lt;/td&gt;
&lt;td&gt;BeautifulSoup(markup, “lxml”)&lt;/td&gt;
&lt;td&gt;速度快、文档容错能力强&lt;/td&gt;
&lt;td&gt;需要安装C语言库&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;lxml XML 解析器&lt;/td&gt;
&lt;td&gt;BeautifulSoup(markup, “xml”)&lt;/td&gt;
&lt;td&gt;速度快、唯一支持XML的解析器&lt;/td&gt;
&lt;td&gt;需要安装C语言库&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;html5lib&lt;/td&gt;
&lt;td&gt;BeautifulSoup(markup, “html5lib”)&lt;/td&gt;
&lt;td&gt;最好的容错性、以浏览器的方式解析文档、生成HTML5格式的文档&lt;/td&gt;
&lt;td&gt;速度慢、不依赖外部扩展&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;基本使用&quot;&gt;&lt;a href=&quot;#基本使用&quot; class=&quot;headerlink&quot; title=&quot;基本使用&quot;&gt;&lt;/a&gt;基本使用&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&#39;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&#39;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&amp;gt;&amp;lt;!-- Elsie --&amp;gt;&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; bs4 &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html, &lt;span class=&quot;string&quot;&gt;&#39;lxml&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.prettify())&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.title.string)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/title&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;/head&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;p class=&amp;quot;title&amp;quot; name=&amp;quot;dromouse&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    The Dormouse&amp;apos;s story&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;/b&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/elsie&amp;quot; id=&amp;quot;link1&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;lt;!-- Elsie --&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/lacie&amp;quot; id=&amp;quot;link2&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Lacie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   and&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;a class=&amp;quot;sister&amp;quot; href=&amp;quot;http://example.com/tillie&amp;quot; id=&amp;quot;link3&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Tillie&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;lt;/a&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;and they lived at the bottom of a well.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;p class=&amp;quot;story&amp;quot;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;lt;/p&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;lt;/body&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;标签选择器&quot;&gt;&lt;a href=&quot;#标签选择器&quot; class=&quot;headerlink&quot; title=&quot;标签选择器&quot;&gt;&lt;/a&gt;标签选择器&lt;/h2&gt;&lt;h3 id=&quot;选择元素&quot;&gt;&lt;a href=&quot;#选择元素&quot; class=&quot;headerlink&quot; title=&quot;选择元素&quot;&gt;&lt;/a&gt;选择元素&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&#39;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&#39;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&amp;gt;&amp;lt;!-- Elsie --&amp;gt;&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; bs4 &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html, &lt;span class=&quot;string&quot;&gt;&#39;lxml&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.title)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(type(soup.title))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.head)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.p)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;
&amp;lt;class &amp;apos;bs4.element.Tag&amp;apos;&amp;gt;
&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;
&amp;lt;p class=&amp;quot;title&amp;quot; name=&amp;quot;dromouse&amp;quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&amp;apos;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;获取名称&quot;&gt;&lt;a href=&quot;#获取名称&quot; class=&quot;headerlink&quot; title=&quot;获取名称&quot;&gt;&lt;/a&gt;获取名称&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;html = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;The Dormouse&#39;s story&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;body&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&amp;gt;&amp;lt;b&amp;gt;The Dormouse&#39;s story&amp;lt;/b&amp;gt;&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;Once upon a time there were three little sisters; and their names were&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&amp;gt;&amp;lt;!-- Elsie --&amp;gt;&amp;lt;/a&amp;gt;,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&amp;gt;Lacie&amp;lt;/a&amp;gt; and&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&amp;gt;Tillie&amp;lt;/a&amp;gt;;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;and they lived at the bottom of a well.&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&amp;lt;p class=&quot;story&quot;&amp;gt;...&amp;lt;/p&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;string&quot;&gt;&quot;&quot;&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;from&lt;/span&gt; bs4 &lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; BeautifulSoup&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;soup = BeautifulSoup(html, &lt;span class=&quot;string&quot;&gt;&#39;lxml&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(soup.title.name)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;pre&gt;&lt;code&gt;title
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的 Python 笔记（四）</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84%20Python%20%E7%AC%94%E8%AE%B0%EF%BC%88%E5%9B%9B%EF%BC%89.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的 Python 笔记（四）.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="我的-Python-笔记（四）"><a href="#我的-Python-笔记（四）" class="headerlink" title="我的 Python 笔记（四）"></a>我的 Python 笔记（四）</h1><h2 id="Requests库"><a href="#Requests库" class="headerlink" title="Requests库"></a>Requests库</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><ul><li>pip install requests</li><li>conda install requests</li></ul><h2 id="实例引入"><a href="#实例引入" class="headerlink" title="实例引入"></a>实例引入</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'https://www.baidu.com/'</span>)</span><br><span class="line">print(type(response))</span><br><span class="line">print(response.status_code)</span><br><span class="line">print(type(response.text))</span><br><span class="line">print(response.text)</span><br><span class="line">print(response.cookies)</span><br></pre></td></tr></table></figure><h2 id="各种请求方式"><a href="#各种请求方式" class="headerlink" title="各种请求方式"></a>各种请求方式</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">requests.post(<span class="string">'http://httpbin.org/post'</span>)</span><br><span class="line">requests.put(<span class="string">'http://httpbin.org/put'</span>)</span><br><span class="line">requests.delete(<span class="string">'http://httpbin.org/delete'</span>)</span><br><span class="line">requests.head(<span class="string">'http://httpbin.org/get'</span>)</span><br><span class="line">requests.options(<span class="string">'http://httpbin.org/get'</span>)</span><br></pre></td></tr></table></figure><h1 id="请求"><a href="#请求" class="headerlink" title="请求"></a>请求</h1><h2 id="基本GET请求"><a href="#基本GET请求" class="headerlink" title="基本GET请求"></a>基本GET请求</h2><h3 id="基本写法"><a href="#基本写法" class="headerlink" title="基本写法"></a>基本写法</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'http://httpbin.org/get'</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><h3 id="带参数GET请求"><a href="#带参数GET请求" class="headerlink" title="带参数GET请求"></a>带参数GET请求</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">response = requests.get(<span class="string">"http://httpbin.org/get?name=germey&amp;age=22"</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">'name'</span>: <span class="string">'germey'</span>,</span><br><span class="line">    <span class="string">'age'</span>: <span class="number">22</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">"http://httpbin.org/get"</span>, params=data)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="解析json"><a href="#解析json" class="headerlink" title="解析json"></a>解析json</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"http://httpbin.org/get"</span>)</span><br><span class="line">print(type(response.text))</span><br><span class="line">print(response.json())</span><br><span class="line">print(json.loads(response.text))</span><br><span class="line">print(type(response.json()))</span><br></pre></td></tr></table></figure><h3 id="获取二进制数据"><a href="#获取二进制数据" class="headerlink" title="获取二进制数据"></a>获取二进制数据</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"https://github.com/favicon.ico"</span>)</span><br><span class="line">print(type(response.text), type(response.content))</span><br><span class="line">print(response.text)</span><br><span class="line">print(response.content)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"https://github.com/favicon.ico"</span>)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'favicon.ico'</span>, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(response.content)</span><br><span class="line">    f.close()</span><br></pre></td></tr></table></figure><h3 id="添加headers"><a href="#添加headers" class="headerlink" title="添加headers"></a>添加headers</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"https://www.zhihu.com/explore"</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">"https://www.zhihu.com/explore"</span>, headers=headers)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><h2 id="基本POST请求"><a href="#基本POST请求" class="headerlink" title="基本POST请求"></a>基本POST请求</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">'name'</span>: <span class="string">'germey'</span>, <span class="string">'age'</span>: <span class="string">'22'</span>&#125;</span><br><span class="line">response = requests.post(<span class="string">"http://httpbin.org/post"</span>, data=data)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">data = &#123;<span class="string">'name'</span>: <span class="string">'germey'</span>, <span class="string">'age'</span>: <span class="string">'22'</span>&#125;</span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/52.0.2743.116 Safari/537.36'</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(<span class="string">"http://httpbin.org/post"</span>, data=data, headers=headers)</span><br><span class="line">print(response.json())</span><br></pre></td></tr></table></figure><h1 id="响应"><a href="#响应" class="headerlink" title="响应"></a>响应</h1><h2 id="reponse属性"><a href="#reponse属性" class="headerlink" title="reponse属性"></a>reponse属性</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'http://www.jianshu.com'</span>)</span><br><span class="line">print(type(response.status_code), response.status_code)</span><br><span class="line">print(type(response.headers), response.headers)</span><br><span class="line">print(type(response.cookies), response.cookies)</span><br><span class="line">print(type(response.url), response.url)</span><br><span class="line">print(type(response.history), response.history)</span><br></pre></td></tr></table></figure><h2 id="状态码判断"><a href="#状态码判断" class="headerlink" title="状态码判断"></a>状态码判断</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'http://www.jianshu.com/hello.html'</span>)</span><br><span class="line">exit() <span class="keyword">if</span> <span class="keyword">not</span> response.status_code == requests.codes.not_found <span class="keyword">else</span> print(<span class="string">'404 Not Found'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'http://www.jianshu.com'</span>)</span><br><span class="line">exit() <span class="keyword">if</span> <span class="keyword">not</span> response.status_code == <span class="number">200</span> <span class="keyword">else</span> print(<span class="string">'Request Successfully'</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">100</span>: (<span class="string">'continue'</span>,),</span><br><span class="line"><span class="number">101</span>: (<span class="string">'switching_protocols'</span>,),</span><br><span class="line"><span class="number">102</span>: (<span class="string">'processing'</span>,),</span><br><span class="line"><span class="number">103</span>: (<span class="string">'checkpoint'</span>,),</span><br><span class="line"><span class="number">122</span>: (<span class="string">'uri_too_long'</span>, <span class="string">'request_uri_too_long'</span>),</span><br><span class="line"><span class="number">200</span>: (<span class="string">'ok'</span>, <span class="string">'okay'</span>, <span class="string">'all_ok'</span>, <span class="string">'all_okay'</span>, <span class="string">'all_good'</span>, <span class="string">'\\o/'</span>, <span class="string">'✓'</span>),</span><br><span class="line"><span class="number">201</span>: (<span class="string">'created'</span>,),</span><br><span class="line"><span class="number">202</span>: (<span class="string">'accepted'</span>,),</span><br><span class="line"><span class="number">203</span>: (<span class="string">'non_authoritative_info'</span>, <span class="string">'non_authoritative_information'</span>),</span><br><span class="line"><span class="number">204</span>: (<span class="string">'no_content'</span>,),</span><br><span class="line"><span class="number">205</span>: (<span class="string">'reset_content'</span>, <span class="string">'reset'</span>),</span><br><span class="line"><span class="number">206</span>: (<span class="string">'partial_content'</span>, <span class="string">'partial'</span>),</span><br><span class="line"><span class="number">207</span>: (<span class="string">'multi_status'</span>, <span class="string">'multiple_status'</span>, <span class="string">'multi_stati'</span>, <span class="string">'multiple_stati'</span>),</span><br><span class="line"><span class="number">208</span>: (<span class="string">'already_reported'</span>,),</span><br><span class="line"><span class="number">226</span>: (<span class="string">'im_used'</span>,),</span><br><span class="line"></span><br><span class="line"><span class="comment"># Redirection.</span></span><br><span class="line"><span class="number">300</span>: (<span class="string">'multiple_choices'</span>,),</span><br><span class="line"><span class="number">301</span>: (<span class="string">'moved_permanently'</span>, <span class="string">'moved'</span>, <span class="string">'\\o-'</span>),</span><br><span class="line"><span class="number">302</span>: (<span class="string">'found'</span>,),</span><br><span class="line"><span class="number">303</span>: (<span class="string">'see_other'</span>, <span class="string">'other'</span>),</span><br><span class="line"><span class="number">304</span>: (<span class="string">'not_modified'</span>,),</span><br><span class="line"><span class="number">305</span>: (<span class="string">'use_proxy'</span>,),</span><br><span class="line"><span class="number">306</span>: (<span class="string">'switch_proxy'</span>,),</span><br><span class="line"><span class="number">307</span>: (<span class="string">'temporary_redirect'</span>, <span class="string">'temporary_moved'</span>, <span class="string">'temporary'</span>),</span><br><span class="line"><span class="number">308</span>: (<span class="string">'permanent_redirect'</span>,</span><br><span class="line">      <span class="string">'resume_incomplete'</span>, <span class="string">'resume'</span>,), <span class="comment"># These 2 to be removed in 3.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Client Error.</span></span><br><span class="line"><span class="number">400</span>: (<span class="string">'bad_request'</span>, <span class="string">'bad'</span>),</span><br><span class="line"><span class="number">401</span>: (<span class="string">'unauthorized'</span>,),</span><br><span class="line"><span class="number">402</span>: (<span class="string">'payment_required'</span>, <span class="string">'payment'</span>),</span><br><span class="line"><span class="number">403</span>: (<span class="string">'forbidden'</span>,),</span><br><span class="line"><span class="number">404</span>: (<span class="string">'not_found'</span>, <span class="string">'-o-'</span>),</span><br><span class="line"><span class="number">405</span>: (<span class="string">'method_not_allowed'</span>, <span class="string">'not_allowed'</span>),</span><br><span class="line"><span class="number">406</span>: (<span class="string">'not_acceptable'</span>,),</span><br><span class="line"><span class="number">407</span>: (<span class="string">'proxy_authentication_required'</span>, <span class="string">'proxy_auth'</span>, <span class="string">'proxy_authentication'</span>),</span><br><span class="line"><span class="number">408</span>: (<span class="string">'request_timeout'</span>, <span class="string">'timeout'</span>),</span><br><span class="line"><span class="number">409</span>: (<span class="string">'conflict'</span>,),</span><br><span class="line"><span class="number">410</span>: (<span class="string">'gone'</span>,),</span><br><span class="line"><span class="number">411</span>: (<span class="string">'length_required'</span>,),</span><br><span class="line"><span class="number">412</span>: (<span class="string">'precondition_failed'</span>, <span class="string">'precondition'</span>),</span><br><span class="line"><span class="number">413</span>: (<span class="string">'request_entity_too_large'</span>,),</span><br><span class="line"><span class="number">414</span>: (<span class="string">'request_uri_too_large'</span>,),</span><br><span class="line"><span class="number">415</span>: (<span class="string">'unsupported_media_type'</span>, <span class="string">'unsupported_media'</span>, <span class="string">'media_type'</span>),</span><br><span class="line"><span class="number">416</span>: (<span class="string">'requested_range_not_satisfiable'</span>, <span class="string">'requested_range'</span>, <span class="string">'range_not_satisfiable'</span>),</span><br><span class="line"><span class="number">417</span>: (<span class="string">'expectation_failed'</span>,),</span><br><span class="line"><span class="number">418</span>: (<span class="string">'im_a_teapot'</span>, <span class="string">'teapot'</span>, <span class="string">'i_am_a_teapot'</span>),</span><br><span class="line"><span class="number">421</span>: (<span class="string">'misdirected_request'</span>,),</span><br><span class="line"><span class="number">422</span>: (<span class="string">'unprocessable_entity'</span>, <span class="string">'unprocessable'</span>),</span><br><span class="line"><span class="number">423</span>: (<span class="string">'locked'</span>,),</span><br><span class="line"><span class="number">424</span>: (<span class="string">'failed_dependency'</span>, <span class="string">'dependency'</span>),</span><br><span class="line"><span class="number">425</span>: (<span class="string">'unordered_collection'</span>, <span class="string">'unordered'</span>),</span><br><span class="line"><span class="number">426</span>: (<span class="string">'upgrade_required'</span>, <span class="string">'upgrade'</span>),</span><br><span class="line"><span class="number">428</span>: (<span class="string">'precondition_required'</span>, <span class="string">'precondition'</span>),</span><br><span class="line"><span class="number">429</span>: (<span class="string">'too_many_requests'</span>, <span class="string">'too_many'</span>),</span><br><span class="line"><span class="number">431</span>: (<span class="string">'header_fields_too_large'</span>, <span class="string">'fields_too_large'</span>),</span><br><span class="line"><span class="number">444</span>: (<span class="string">'no_response'</span>, <span class="string">'none'</span>),</span><br><span class="line"><span class="number">449</span>: (<span class="string">'retry_with'</span>, <span class="string">'retry'</span>),</span><br><span class="line"><span class="number">450</span>: (<span class="string">'blocked_by_windows_parental_controls'</span>, <span class="string">'parental_controls'</span>),</span><br><span class="line"><span class="number">451</span>: (<span class="string">'unavailable_for_legal_reasons'</span>, <span class="string">'legal_reasons'</span>),</span><br><span class="line"><span class="number">499</span>: (<span class="string">'client_closed_request'</span>,),</span><br><span class="line"></span><br><span class="line"><span class="comment"># Server Error.</span></span><br><span class="line"><span class="number">500</span>: (<span class="string">'internal_server_error'</span>, <span class="string">'server_error'</span>, <span class="string">'/o\\'</span>, <span class="string">'✗'</span>),</span><br><span class="line"><span class="number">501</span>: (<span class="string">'not_implemented'</span>,),</span><br><span class="line"><span class="number">502</span>: (<span class="string">'bad_gateway'</span>,),</span><br><span class="line"><span class="number">503</span>: (<span class="string">'service_unavailable'</span>, <span class="string">'unavailable'</span>),</span><br><span class="line"><span class="number">504</span>: (<span class="string">'gateway_timeout'</span>,),</span><br><span class="line"><span class="number">505</span>: (<span class="string">'http_version_not_supported'</span>, <span class="string">'http_version'</span>),</span><br><span class="line"><span class="number">506</span>: (<span class="string">'variant_also_negotiates'</span>,),</span><br><span class="line"><span class="number">507</span>: (<span class="string">'insufficient_storage'</span>,),</span><br><span class="line"><span class="number">509</span>: (<span class="string">'bandwidth_limit_exceeded'</span>, <span class="string">'bandwidth'</span>),</span><br><span class="line"><span class="number">510</span>: (<span class="string">'not_extended'</span>,),</span><br><span class="line"><span class="number">511</span>: (<span class="string">'network_authentication_required'</span>, <span class="string">'network_auth'</span>, <span class="string">'network_authentication'</span>),</span><br></pre></td></tr></table></figure><h1 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h1><h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">files = &#123;<span class="string">'file'</span>: open(<span class="string">'favicon.ico'</span>, <span class="string">'rb'</span>)&#125;</span><br><span class="line">response = requests.post(<span class="string">"http://httpbin.org/post"</span>, files=files)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><h2 id="获取cookie"><a href="#获取cookie" class="headerlink" title="获取cookie"></a>获取cookie</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"https://www.baidu.com"</span>)</span><br><span class="line">print(response.cookies)</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> response.cookies.items():</span><br><span class="line">    print(key + <span class="string">'='</span> + value)</span><br></pre></td></tr></table></figure><h2 id="会话维持"><a href="#会话维持" class="headerlink" title="会话维持"></a>会话维持</h2><p>模拟登录</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">requests.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">response = requests.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">s = requests.Session()</span><br><span class="line">s.get(<span class="string">'http://httpbin.org/cookies/set/number/123456789'</span>)</span><br><span class="line">response = s.get(<span class="string">'http://httpbin.org/cookies'</span>)</span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><h2 id="证书验证"><a href="#证书验证" class="headerlink" title="证书验证"></a>证书验证</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'https://www.12306.cn'</span>)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.packages <span class="keyword">import</span> urllib3</span><br><span class="line">urllib3.disable_warnings()</span><br><span class="line">response = requests.get(<span class="string">'https://www.12306.cn'</span>, verify=<span class="keyword">False</span>)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">'https://www.12306.cn'</span>, cert=(<span class="string">'/path/server.crt'</span>, <span class="string">'/path/key'</span>))</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><h2 id="代理设置"><a href="#代理设置" class="headerlink" title="代理设置"></a>代理设置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">  <span class="string">"http"</span>: <span class="string">"http://127.0.0.1:9743"</span>,</span><br><span class="line">  <span class="string">"https"</span>: <span class="string">"https://127.0.0.1:9743"</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">response = requests.get(<span class="string">"https://www.taobao.com"</span>, proxies=proxies)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">"http"</span>: <span class="string">"http://user:password@127.0.0.1:9743/"</span>,</span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">"https://www.taobao.com"</span>, proxies=proxies)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install <span class="string">'requests[socks]'</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">proxies = &#123;</span><br><span class="line">    <span class="string">'http'</span>: <span class="string">'socks5://127.0.0.1:9742'</span>,</span><br><span class="line">    <span class="string">'https'</span>: <span class="string">'socks5://127.0.0.1:9742'</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(<span class="string">"https://www.taobao.com"</span>, proxies=proxies)</span><br><span class="line">print(response.status_code)</span><br></pre></td></tr></table></figure><h2 id="超时设置"><a href="#超时设置" class="headerlink" title="超时设置"></a>超时设置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> ReadTimeout</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = requests.get(<span class="string">"http://httpbin.org/get"</span>, timeout = <span class="number">0.5</span>)</span><br><span class="line">    print(response.status_code)</span><br><span class="line"><span class="keyword">except</span> ReadTimeout:</span><br><span class="line">    print(<span class="string">'Timeout'</span>)</span><br></pre></td></tr></table></figure><h2 id="认证设置"><a href="#认证设置" class="headerlink" title="认证设置"></a>认证设置</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.auth <span class="keyword">import</span> HTTPBasicAuth</span><br><span class="line"></span><br><span class="line">r = requests.get(<span class="string">'http://120.27.34.24:9001'</span>, auth=HTTPBasicAuth(<span class="string">'user'</span>, <span class="string">'123'</span>))</span><br><span class="line">print(r.status_code)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">r = requests.get(<span class="string">'http://120.27.34.24:9001'</span>, auth=(<span class="string">'user'</span>, <span class="string">'123'</span>))</span><br><span class="line">print(r.status_code)</span><br></pre></td></tr></table></figure><h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> requests.exceptions <span class="keyword">import</span> ReadTimeout, ConnectionError, RequestException</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    response = requests.get(<span class="string">"http://httpbin.org/get"</span>, timeout = <span class="number">0.5</span>)</span><br><span class="line">    print(response.status_code)</span><br><span class="line"><span class="keyword">except</span> ReadTimeout:</span><br><span class="line">    print(<span class="string">'Timeout'</span>)</span><br><span class="line"><span class="keyword">except</span> ConnectionError:</span><br><span class="line">    print(<span class="string">'Connection error'</span>)</span><br><span class="line"><span class="keyword">except</span> RequestException:</span><br><span class="line">    print(<span class="string">'Error'</span>)</span><br></pre></td></tr></table></figure><pre><code>Connection error</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;我的-Python-笔记（四）&quot;&gt;&lt;a href=&quot;#我的-Python-笔记（四）&quot; class=&quot;headerlink&quot; title=&quot;我的 Python 笔记（四）&quot;&gt;&lt;/a&gt;我的 Python 笔记（四）&lt;/h1&gt;&lt;h2 id=&quot;Requests库&quot;&gt;&lt;a href=&quot;#Requests库&quot; class=&quot;headerlink&quot; title=&quot;Requests库&quot;&gt;&lt;/a&gt;Requests库&lt;/h2&gt;&lt;h3 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;pip install requests&lt;/li&gt;
&lt;li&gt;conda install requests&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;实例引入&quot;&gt;&lt;a href=&quot;#实例引入&quot; class=&quot;headerlink&quot; title=&quot;实例引入&quot;&gt;&lt;/a&gt;实例引入&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = requests.get(&lt;span class=&quot;string&quot;&gt;&#39;https://www.baidu.com/&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(type(response))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.status_code)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(type(response.text))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.text)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.cookies)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;各种请求方式&quot;&gt;&lt;a href=&quot;#各种请求方式&quot; class=&quot;headerlink&quot; title=&quot;各种请求方式&quot;&gt;&lt;/a&gt;各种请求方式&lt;/h2&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.post(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/post&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.put(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/put&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.delete(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/delete&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.head(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/get&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;requests.options(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/get&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h1 id=&quot;请求&quot;&gt;&lt;a href=&quot;#请求&quot; class=&quot;headerlink&quot; title=&quot;请求&quot;&gt;&lt;/a&gt;请求&lt;/h1&gt;&lt;h2 id=&quot;基本GET请求&quot;&gt;&lt;a href=&quot;#基本GET请求&quot; class=&quot;headerlink&quot; title=&quot;基本GET请求&quot;&gt;&lt;/a&gt;基本GET请求&lt;/h2&gt;&lt;h3 id=&quot;基本写法&quot;&gt;&lt;a href=&quot;#基本写法&quot; class=&quot;headerlink&quot; title=&quot;基本写法&quot;&gt;&lt;/a&gt;基本写法&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = requests.get(&lt;span class=&quot;string&quot;&gt;&#39;http://httpbin.org/get&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.text)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;带参数GET请求&quot;&gt;&lt;a href=&quot;#带参数GET请求&quot; class=&quot;headerlink&quot; title=&quot;带参数GET请求&quot;&gt;&lt;/a&gt;带参数GET请求&lt;/h3&gt;&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = requests.get(&lt;span class=&quot;string&quot;&gt;&quot;http://httpbin.org/get?name=germey&amp;amp;age=22&quot;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.text)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight python&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;import&lt;/span&gt; requests&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;data = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;name&#39;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;&#39;germey&#39;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;string&quot;&gt;&#39;age&#39;&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;22&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;response = requests.get(&lt;span class=&quot;string&quot;&gt;&quot;http://httpbin.org/get&quot;&lt;/span&gt;, params=data)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(response.text)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="python" scheme="http://zhanglingsi.github.io/categories/python/"/>
    
    
  </entry>
  
  <entry>
    <title>我的AutoHotkey配置文件</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%88%91%E7%9A%84AutoHotkey%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/我的AutoHotkey配置文件.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h2 id="AutoHotkey安装与配置"><a href="#AutoHotkey安装与配置" class="headerlink" title="AutoHotkey安装与配置"></a>AutoHotkey安装与配置</h2><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="AutoHotkey安装"><a href="#AutoHotkey安装" class="headerlink" title="AutoHotkey安装"></a>AutoHotkey安装</h3><p>[官方文档] (<a href="https://www.autohotkey.com/docs/Tutorial.htm" target="_blank" rel="noopener">https://www.autohotkey.com/docs/Tutorial.htm</a>)<br>[官方下载地址] (<a href="https://www.autohotkey.com/" target="_blank" rel="noopener">https://www.autohotkey.com/</a>) </p><h3 id="操作说明"><a href="#操作说明" class="headerlink" title="操作说明"></a>操作说明</h3><ul><li>可以使用/alt 打印alt键相关快捷键</li><li>可以使用/win 打印windows快捷键</li><li>可以使用/other 打印其他快捷键 </li><li>注意在脚本中回车用“`n”表示，加号用“{+}”表示</li><li>将上述脚本保存为my.ahk文件保存到你的工作目录，然后双击运行。</li><li>将my.ahk文件创建快捷方式，放到windows启动文件夹中，即可实现开机后自动运行AutoHotkey</li><li>马上丢掉你是鼠标，快来体验飞一般的感觉吧！你懂的！<a id="more"></a></li></ul><h3 id="我的配置文件"><a href="#我的配置文件" class="headerlink" title="我的配置文件"></a>我的配置文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br></pre></td><td class="code"><pre><span class="line">;Notes: <span class="comment">#==win !==Alt,  ^==Ctr, +==shift</span></span><br><span class="line"></span><br><span class="line">;===========================================</span><br><span class="line"><span class="comment">#t::Run https://www.travis-ci.org/</span></span><br><span class="line"><span class="comment">#b::Run https://www.baidu.com/</span></span><br><span class="line"><span class="comment">#h::Run https://zhanglingsi.github.io/</span></span><br><span class="line"><span class="comment">#c::Run http://zhanglingsi.coding.me/zhanglingsi/</span></span><br><span class="line"><span class="comment">#j::Run https://github.com/zhanglingsi/</span></span><br><span class="line">; 工作相关</span><br><span class="line"><span class="comment">#v::Run http://183.230.93.167:18082/dacp/login</span></span><br><span class="line"><span class="comment">#n::Run http://112.25.233.117:58080/OnlineServer/FrameAction_myResources.action</span></span><br><span class="line"><span class="comment">#i::Run https://tinypng.com/</span></span><br><span class="line"><span class="comment">#o::Run http://oa.asiainfo.com/</span></span><br><span class="line"><span class="comment">#s::winset,AlwaysOnTop,, A</span></span><br><span class="line"><span class="comment">#q::Send !&#123;F4&#125;</span></span><br><span class="line">;======================启动应用程序=====================</span><br><span class="line">!n::run notepad</span><br><span class="line">!b::run, D:\Program Files (x86)\cmd_markdown_win64\Cmd Markdown.exe</span><br><span class="line">!r::run, D:\Program Files\cmder\Cmder.exe</span><br><span class="line">!w::run, C:\Program Files (x86)\Tencent\WeChat\WeChat.exe</span><br><span class="line">!s::run, D:\Program Files\UltraEdit-32\Uedit32.exe</span><br><span class="line">!t::run, D:\Program Files\SecureCRT_x64\SecureCRTPortable.exe</span><br><span class="line">!i::run, D:\Program Files\JetBrains\IntelliJ IDEA 2017.1.4\bin\idea64.exe</span><br><span class="line">!m::run, C:\Program Files\SQLyog\SQLyog.exe</span><br><span class="line">!o::run, C:\Program Files (x86)\PLSQL Developer\plsqldev.exe</span><br><span class="line">!f::run, D:\Program Files\Foxmail 7.2\Foxmail.exe</span><br><span class="line">!e::run, C:\Program Files\internet explorer\iexplore.exe</span><br><span class="line">!d::run, D:\Program Files\Microsoft VS Code\Code.exe</span><br><span class="line">!q::run, C:\Program Files (x86)\Tencent\TIM\Bin\TIM.exe</span><br><span class="line">!x::WinMinimize A</span><br><span class="line">!z::WinMaximize A</span><br><span class="line">!c::WinRestore A</span><br><span class="line">!1::send <span class="comment">#&#123;Tab&#125; </span></span><br><span class="line">!3::send <span class="comment">#^&#123;right&#125; </span></span><br><span class="line">!2::send <span class="comment">#^&#123;left&#125; </span></span><br><span class="line">;===================拷贝文件路径============================</span><br><span class="line">^+c::</span><br><span class="line">; null= </span><br><span class="line">send ^c</span><br><span class="line">sleep,200</span><br><span class="line">clipboard=%clipboard% ;%null%</span><br><span class="line">tooltip,%clipboard%</span><br><span class="line">sleep,500</span><br><span class="line">tooltip,</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line">;================================================</span><br><span class="line">;replace CapsLock to LeftEnter; CapsLock = Alt CapsLock</span><br><span class="line"><span class="variable">$CapsLock</span>::Enter</span><br><span class="line">LAlt &amp; Capslock::SetCapsLockState, % GetKeyState(<span class="string">"CapsLock"</span>, <span class="string">"T"</span>) ? <span class="string">"Off"</span> : <span class="string">"On"</span></span><br><span class="line">!u::Send ^c !&#123;tab&#125; ^v</span><br><span class="line">;================================================</span><br><span class="line">::/cmail::zhanglingsi@asiainfo.com</span><br><span class="line">::/mail::zhanglingsi@aliyun.com</span><br><span class="line">::/sf::select * from  t ;</span><br><span class="line">::/sfw::select * from  t <span class="built_in">where</span> 1=1 and ;</span><br><span class="line">::/scf::select count(*) from  t ;</span><br><span class="line">::/scfg::select count(*) from  t <span class="built_in">where</span> 1=1 group by t.;</span><br><span class="line">::/js::javascript:;</span><br><span class="line">::/win:: Win &#123;+&#125; e：打开资源管理器;`nWin` &#123;+&#125; d：显示桌面;`nWin` &#123;+&#125; f：打开查找对话框;`nWin &#123;+&#125; r：打开运行对话框;`nWin &#123;+&#125; l：锁定电脑;`nWin &#123;+&#125; u: 打开控制面板－轻松使用设置中心;`n`nwin &#123;+&#125; t：打开网页travis-ci;`nwin &#123;+&#125; b：打开网页baidu;`nwin &#123;+&#125; h：打开网页blog <span class="keyword">for</span> github;`nwin &#123;+&#125; c：打开网页blog <span class="keyword">for</span> coding;`nwin &#123;+&#125; j：打开网页my github;`nwin &#123;+&#125; v：打开网页DACP;`nwin &#123;+&#125; i：打开网页tinypng;`nwin &#123;+&#125; o：打开网页OA;`nwin &#123;+&#125; s：置顶当前窗口;`nwin &#123;+&#125; q：关闭应用程序;`nwin &#123;+&#125; z：激活chrome窗口;`n</span><br><span class="line">::/alt:: ALT &#123;+&#125; n： 打开notepad;`nALT &#123;+&#125; b： 打开打开Markdown;`nALT &#123;+&#125; r： 打开Cmder;`nALT &#123;+&#125; w： 打开微信;`nALT &#123;+&#125; s： 打开Uedit32;`nALT &#123;+&#125; t： 打开CRT;`nALT &#123;+&#125; i： 打开idea;`nALT &#123;+&#125; m： 打开SQLyog;`nALT &#123;+&#125; o： 打开plsqldev;`nALT &#123;+&#125; f： 打开Foxmail;`nALT &#123;+&#125; e： 打开iexplore;`nALT &#123;+&#125; d： 打开VSCode;`nALT &#123;+&#125; q： 打开TIM;`nALT &#123;+&#125; x： 最小化当前窗口;`nALT &#123;+&#125; z： 最大化当前窗口;`nALT &#123;+&#125; c： 还原当前窗口;`nALT &#123;+&#125; 1： 打开虚拟桌面;`nALT &#123;+&#125; 3： 向右切换虚拟桌面;`nALT &#123;+&#125; 2： 向左切换虚拟桌面;`n</span><br><span class="line">::/other::  Ctrl &#123;+&#125; <span class="built_in">shift</span> &#123;+&#125; C：拷贝文件路径;`nCtrl &#123;+&#125;  Win &#123;+&#125;  C：拷贝取色;`n</span><br><span class="line">;=====================拷贝鼠标取色==============================</span><br><span class="line">^<span class="comment">#c::</span></span><br><span class="line">MouseGetPos, mouseX, mouseY</span><br><span class="line">PixelGetColor, color, %mouseX%, %mouseY%, RGB</span><br><span class="line">StringRight color,color,6</span><br><span class="line">clipboard = %color%</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line">;====================切换chrome===============================</span><br><span class="line"><span class="comment">#z::</span></span><br><span class="line">IfWinNotExist ahk_class Chrome_WidgetWin_1</span><br><span class="line">&#123;</span><br><span class="line">    Run <span class="string">"C:\Users\Administrator\AppData\Local\Google\Chrome\Application\chrome.exe"</span></span><br><span class="line">    WinActivate</span><br><span class="line">&#125;</span><br><span class="line">Else IfWinNotActive ahk_class Chrome_WidgetWin_1</span><br><span class="line">&#123;</span><br><span class="line">    WinActivate</span><br><span class="line">&#125;</span><br><span class="line">Else</span><br><span class="line">&#123;</span><br><span class="line">    WinMinimize</span><br><span class="line">&#125;</span><br><span class="line">Return</span><br><span class="line">;===================================================</span><br><span class="line">;左侧<span class="built_in">shift</span>+鼠标滚轮调整窗口透明度（设置30-255的透明度，低于30基本上就看不见了，如需要可自行修改)</span><br><span class="line">;</span><br><span class="line">;使用说明：</span><br><span class="line">;   ◆左侧<span class="built_in">shift</span>+滚轮下滑：减少透明度，一次10</span><br><span class="line">;   ◆左侧<span class="built_in">shift</span>+滚轮上滑：增加透明度，一次20</span><br><span class="line">;   ◆左侧<span class="built_in">shift</span>+中键按下：恢复透明度至255(完全不透明).</span><br><span class="line">;</span><br><span class="line">~LShift &amp; WheelUp::</span><br><span class="line">; 透明度调整，增加。</span><br><span class="line">WinGet, Transparent, Transparent,A</span><br><span class="line">If (Transparent=<span class="string">""</span>)</span><br><span class="line">    Transparent=255</span><br><span class="line">    ;Transparent_New:=Transparent+10</span><br><span class="line">    Transparent_New:=Transparent+20    ;◆透明度增加速度。</span><br><span class="line">    If (Transparent_New &gt; 254)</span><br><span class="line">                    Transparent_New =255</span><br><span class="line">    WinSet,Transparent,%Transparent_New%,A</span><br><span class="line"> </span><br><span class="line">    tooltip now: ▲%Transparent_New%`nmae: __%Transparent%  ;查看当前透明度（操作之后的）。</span><br><span class="line">    ;sleep 1500</span><br><span class="line">    SetTimer, RemoveToolTip_transparent_Lwin__2016.09.20, 1500  ;设置统一的这个格式，label在最后。</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line"> </span><br><span class="line">~LShift &amp; WheelDown::</span><br><span class="line">;透明度调整，减少。</span><br><span class="line">WinGet, Transparent, Transparent,A</span><br><span class="line">If (Transparent=<span class="string">""</span>)</span><br><span class="line">    Transparent=255</span><br><span class="line">    Transparent_New:=Transparent-10  ;◆透明度减少速度。</span><br><span class="line">    ;msgbox,Transparent_New=%Transparent_New%</span><br><span class="line">            If (Transparent_New &lt; 30)    ;◆最小透明度限制。</span><br><span class="line">                    Transparent_New = 30</span><br><span class="line">    WinSet,Transparent,%Transparent_New%,A</span><br><span class="line">    tooltip now: ▲%Transparent_New%`nmae: __%Transparent%  ;查看当前透明度（操作之后的）。</span><br><span class="line">    ;sleep 1500</span><br><span class="line">    SetTimer, RemoveToolTip_transparent_Lwin__2016.09.20, 1500  ;设置统一的这个格式，label在最后。</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line"> </span><br><span class="line">;设置Lwin &amp;Mbutton直接恢复透明度到255。</span><br><span class="line">~Lshift &amp; Mbutton:: </span><br><span class="line">WinGet, Transparent, Transparent,A</span><br><span class="line">WinSet,Transparent,255,A </span><br><span class="line">tooltip ▲Restored ;查看当前透明度（操作之后的）。</span><br><span class="line">;sleep 1500</span><br><span class="line">SetTimer, RemoveToolTip_transparent_Lwin__2016.09.20, 1500  ;设置统一的这个格式，label在最后。</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">removetooltip_transparent_Lwin__2016.09.20:     ;LABEL</span><br><span class="line">tooltip</span><br><span class="line">SetTimer, RemoveToolTip_transparent_Lwin__2016.09.20, Off</span><br><span class="line"><span class="built_in">return</span></span><br><span class="line">;===================================================</span><br><span class="line">; 按住空格不放，搭配edsf实现上下左右方向键，搭配cv实现backspace和del功能，搭配wr，实现home和end功能：</span><br><span class="line"></span><br><span class="line"><span class="comment">#NoEnv </span></span><br><span class="line">; <span class="comment">#Warn</span></span><br><span class="line">SendMode Input</span><br><span class="line">SetWorkingDir %A_ScriptDir% </span><br><span class="line"></span><br><span class="line">AnyKeyPressedOtherThanSpace(mode = <span class="string">"P"</span>) &#123;</span><br><span class="line">    keys = 1234567890-=qwertyuiop[]\asdfghjkl;<span class="string">'zxcvbnm,./</span></span><br><span class="line"><span class="string">    Loop, Parse, keys</span></span><br><span class="line"><span class="string">    &#123;        </span></span><br><span class="line"><span class="string">        isDown :=  GetKeyState(A_LoopField, mode)</span></span><br><span class="line"><span class="string">        if(isDown)</span></span><br><span class="line"><span class="string">            return True</span></span><br><span class="line"><span class="string">    &#125;   </span></span><br><span class="line"><span class="string">    return False</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Space Up::</span></span><br><span class="line"><span class="string">    space_up := true</span></span><br><span class="line"><span class="string">    Send, &#123;F18&#125;</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">Space::</span></span><br><span class="line"><span class="string">    if AnyKeyPressedOtherThanSpace()&#123;</span></span><br><span class="line"><span class="string">        SendInput, &#123;Blind&#125;&#123;Space&#125;</span></span><br><span class="line"><span class="string">        Return</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    space_up := False</span></span><br><span class="line"><span class="string">    inputed := False</span></span><br><span class="line"><span class="string">    input, UserInput, L1 T0.1, &#123;F18&#125;</span></span><br><span class="line"><span class="string">    if (space_up) &#123;</span></span><br><span class="line"><span class="string">        Send, &#123;Blind&#125;&#123;Space&#125;</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">    &#125;else if (StrLen(UserInput) == 1)&#123;</span></span><br><span class="line"><span class="string">        Send, &#123;Space&#125;%UserInput%</span></span><br><span class="line"><span class="string">        return</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    while true&#123;</span></span><br><span class="line"><span class="string">        input, UserInput, L1, &#123;F18&#125;</span></span><br><span class="line"><span class="string">        if (space_up) &#123;</span></span><br><span class="line"><span class="string">            if (!inputed)&#123;</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Space&#125;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            break</span></span><br><span class="line"><span class="string">        &#125;else if (StrLen(UserInput) == 1) &#123;</span></span><br><span class="line"><span class="string">            inputed := True</span></span><br><span class="line"><span class="string">            StringLower, UserInput, UserInput</span></span><br><span class="line"><span class="string">            if (UserInput == "e")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Up&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "d")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Down&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "s")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Left&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "f")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Right&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "w")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;Home&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "r")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;End&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "c")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;BS&#125;</span></span><br><span class="line"><span class="string">            else if (UserInput == "v")</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;&#123;DEL&#125;</span></span><br><span class="line"><span class="string">            else</span></span><br><span class="line"><span class="string">                Send, &#123;Blind&#125;%UserInput%</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">    return</span></span><br><span class="line"><span class="string">;===================================================</span></span><br><span class="line"><span class="string">~lbutton &amp; enter::  </span></span><br><span class="line"><span class="string">exitapp  </span></span><br><span class="line"><span class="string">~WheelUp::  </span></span><br><span class="line"><span class="string">if (existclass("ahk_class Shell_TrayWnd")=1)  </span></span><br><span class="line"><span class="string">Send,&#123;Volume_Up&#125;  </span></span><br><span class="line"><span class="string">Return  </span></span><br><span class="line"><span class="string">~WheelDown::  </span></span><br><span class="line"><span class="string">if (existclass("ahk_class Shell_TrayWnd")=1)  </span></span><br><span class="line"><span class="string">Send,&#123;Volume_Down&#125;  </span></span><br><span class="line"><span class="string">Return  </span></span><br><span class="line"><span class="string">~MButton::  </span></span><br><span class="line"><span class="string">if (existclass("ahk_class Shell_TrayWnd")=1)  </span></span><br><span class="line"><span class="string">Send,&#123;Volume_Mute&#125;  </span></span><br><span class="line"><span class="string">Return  </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Existclass(class)  </span></span><br><span class="line"><span class="string">&#123;  </span></span><br><span class="line"><span class="string">MouseGetPos,,,win  </span></span><br><span class="line"><span class="string">WinGet,winid,id,%class%  </span></span><br><span class="line"><span class="string">if win = %winid%  </span></span><br><span class="line"><span class="string">Return,1  </span></span><br><span class="line"><span class="string">Else  </span></span><br><span class="line"><span class="string">Return,0  </span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string">;===================================================</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;AutoHotkey安装与配置&quot;&gt;&lt;a href=&quot;#AutoHotkey安装与配置&quot; class=&quot;headerlink&quot; title=&quot;AutoHotkey安装与配置&quot;&gt;&lt;/a&gt;AutoHotkey安装与配置&lt;/h2&gt;&lt;h2 id=&quot;Quick-Start&quot;&gt;&lt;a href=&quot;#Quick-Start&quot; class=&quot;headerlink&quot; title=&quot;Quick Start&quot;&gt;&lt;/a&gt;Quick Start&lt;/h2&gt;&lt;h3 id=&quot;AutoHotkey安装&quot;&gt;&lt;a href=&quot;#AutoHotkey安装&quot; class=&quot;headerlink&quot; title=&quot;AutoHotkey安装&quot;&gt;&lt;/a&gt;AutoHotkey安装&lt;/h3&gt;&lt;p&gt;[官方文档] (&lt;a href=&quot;https://www.autohotkey.com/docs/Tutorial.htm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.autohotkey.com/docs/Tutorial.htm&lt;/a&gt;)&lt;br&gt;[官方下载地址] (&lt;a href=&quot;https://www.autohotkey.com/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://www.autohotkey.com/&lt;/a&gt;) &lt;/p&gt;
&lt;h3 id=&quot;操作说明&quot;&gt;&lt;a href=&quot;#操作说明&quot; class=&quot;headerlink&quot; title=&quot;操作说明&quot;&gt;&lt;/a&gt;操作说明&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;可以使用/alt 打印alt键相关快捷键&lt;/li&gt;
&lt;li&gt;可以使用/win 打印windows快捷键&lt;/li&gt;
&lt;li&gt;可以使用/other 打印其他快捷键 &lt;/li&gt;
&lt;li&gt;注意在脚本中回车用“`n”表示，加号用“{+}”表示&lt;/li&gt;
&lt;li&gt;将上述脚本保存为my.ahk文件保存到你的工作目录，然后双击运行。&lt;/li&gt;
&lt;li&gt;将my.ahk文件创建快捷方式，放到windows启动文件夹中，即可实现开机后自动运行AutoHotkey&lt;/li&gt;
&lt;li&gt;马上丢掉你是鼠标，快来体验飞一般的感觉吧！你懂的！
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>打印日志规范</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E6%89%93%E5%8D%B0%E6%97%A5%E5%BF%97%E8%A7%84%E8%8C%83.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/打印日志规范.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="打印日志规范"><a href="#打印日志规范" class="headerlink" title="打印日志规范"></a>打印日志规范</h1><h2 id="Framework"><a href="#Framework" class="headerlink" title="Framework"></a>Framework</h2><p><strong>Slf4j + Logback</strong></p><h2 id="Pattern"><a href="#Pattern" class="headerlink" title="Pattern"></a>Pattern</h2><p>格式：relative|time|ip|level|thread|packagename.classname|linenumber|msg</p><ol><li>relative：从程序启动到写入日志所耗费的时间。  </li><li>time：当前时间，如：2014-07-23 16:27:04.547。</li><li>ip：本机ip。</li><li>level：日志级别。  </li><li>thread：当前线程名称。 </li><li>packagename.classname：java包名.类名。 </li><li>linenumber：行数。  </li><li>msg：日志详细信息。</li></ol><a id="more"></a><h2 id="Msg"><a href="#Msg" class="headerlink" title="Msg"></a>Msg</h2><p>为了更好的管理和分析日志，所以对字段命名名进行统一，格式为json，字段名类型分为3 类。</p><ul><li>A类：必填，字段名和顺序必须一致。</li><li>B类：选填，字段名必须一致，顺序随意。 </li><li>C类：选填，字段名和顺序都没有要求。</li></ul><h3 id="A类"><a href="#A类" class="headerlink" title="A类"></a>A类</h3><p>A类中只有一个字段：TrackingID。该id主要是为了分析一个请求在各个平台运行的整体情况，通过这个id关联起来。<br>TrackingID由以下扩展的巴科斯范式（ABNF模板）定义<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">trackingid = sendertype uuid *nvpair *sequence</span><br><span class="line">sendertype = 1*ALPHA</span><br><span class="line">uuid = <span class="string">"_"</span> 8HEXDIG <span class="string">"-"</span> 4HEXDIG <span class="string">"-"</span> 4HEXDIG <span class="string">"-"</span> 4HEXDIG <span class="string">"-"</span> 12HEXDIG</span><br><span class="line">nvpair = <span class="string">"_"</span> name <span class="string">":"</span> value sequence = <span class="string">"_"</span> 1*DIGIT</span><br><span class="line">name = 1*ALPHA value = 1*ALPHA</span><br></pre></td></tr></table></figure></p><h4 id="Example"><a href="#Example" class="headerlink" title="Example"></a>Example</h4><p>CIF_550e8400-e29b-41d4-a716-446655440000<br>GETWAY_550e8400-e29b-41d4-a716-446655440000_0<br>FONT_550e8400-e29b-41d4-a716-446655440000_1_1_3<br>MAX_550e8400-e29b-41d4-a716-446655440000_CSS1:1234<br>SER_550e8400-e29b-41d4-a716-446655440000_CSS1:1234_0_1<br>PRE_550e8400-e29b-41d4-a716-446655440000_CSS1:1234_AUDT:5678<br>CIF_550e8400-e29b-41d4-a716-446655440000_CSS1:1234_AUDT:5678_1_2</p><h4 id="Illustration"><a href="#Illustration" class="headerlink" title="Illustration"></a>Illustration</h4><ol><li>TrackingID中的sendertype必须唯一标识请求直接发起方，可以使⽤用系统名称。</li><li>TrackingID中的uuid必须是标准的UUID 16进制8-4-4-4-12字符串。</li><li>如果有nvpair, 必须填充1…n个nvpair, nvpair的语义由service自由决定. (因使用”<em>“作为TrackingID各个component的分隔符, nvpair中不允许key或value中出现”</em>“)。</li><li>下游service必须识别上游service的请求中带的TrackingID. 在下游service代表上游service继续请求其他service时,必须构造新的TrackingID, 其中uuid,nvpair和sequence 从上游service请求所带的TrackingID抽取,sendertype替换为下游service的标识,下游service可以添加新的nvair和sequence, 若添加了sequence,其值须反映由下游service 为响应上游service请求而发出的调用的次数.(如果service A调用service B, 我们称 service A为上游service, service B为下游service)。</li></ol><h4 id="知识点补充："><a href="#知识点补充：" class="headerlink" title="知识点补充："></a>知识点补充：</h4><p>ABNF 基本扩充要点（部分）：<br>ABNF的基本语法： name = elements crlf<br>用字符映射的ASCII码表示一个字符，格式为 %TYPE ，其中TYPE为进制（b/d/x三种）， b for binary（二进制），d for decimal（十进制），x for hexadecimal（十六进制）。如 %d13 和 %x0D 都代表 CR。<br>用句号（.）相连，表示一串连续的字符，如  %d13.10 代表CRLF（即%d13和%d10相连接），再如 %x44.6f.6d.61.69.6e.3a 1*FWS 代表”Domain: “这一个字符串（注意最后还有一个空格）。</p><p>ABNF的核心规则：</p><ul><li>ALPHA = %x41-5A / %x61-7A    ; A-Z / a-z，即 大写和小写 ASCII 字母(A-Z, a-z)</li><li>BIT             =  “0” / “1” ; 即二进制字符</li><li>DQUOTE          =  %x22 ; “ (Double Quote)，即 双引号</li><li>VCHAR           =  %x21-7E ; visible (printing) characters，即 可见字符</li><li>CHAR            =  %x01-7F ; any 7-bit US-ASCII character, excluding NUL，7位</li><li>OCTET           =  %x00-FF ; 8 bits of data，8位</li><li>CTL             =  %x00-1F / %x7F ; controls，即 控制字符</li><li>CR              =  %x0D ; carriage return，即  回车</li><li>LF              =  %x0A ; linefeed，即 换行</li><li>CRLF            =  CR LF ; Internet standard newline，即 互联网标准换行</li><li>DIGIT           =  %x30-39 ; 0-9</li><li>HEXDIG          =  DIGIT / “A” / “B” / “C” / “D” / “E” / “F” ;十六进制数字 (0-9, A-F, a-f)</li><li>SP              =  %x20 ; 即 空行</li><li>HTAB            =  %x09 ; horizontal tab，即 横向制表符（Tab）</li><li>WSP             =  SP / HTAB ; white space，即 空格或横向制表符</li><li>LWSP            =  *(WSP / CRLF WSP) ; 即 直线空白（晚于换行）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">下面是JAVA语言中For语句的定义：</span><br><span class="line">FOR_STATEMENT ::= <span class="string">"for"</span> <span class="string">"("</span> ( variable_declaration | ( expression <span class="string">";"</span> ) | <span class="string">";"</span> ) [ expression ] <span class="string">";"</span> [ expression ] <span class="string">")"</span> statement</span><br></pre></td></tr></table></figure><h3 id="B类"><a href="#B类" class="headerlink" title="B类"></a>B类</h3><p>B类字段主要包含一些经常使用的和比较关键的信息，以@符号为前缀</p><ol><li><p>@marker 日志标识，可以理解为该条日志的业务说明，比如查询绑卡信息，订单入库结果等。<br>204|2014-07-27 14:47:23,443|192.168.2.104|INFO|main|c.e.t.j.LogTest|20| {“TrackingID”:”TRADEENGINE_550e8400-e29b-41d4-a716-446655440000”,”marker”:”测试⽇志”,”otorder”:”2014072710234294234”} </p></li><li><p>@ex 简单异常信息，当有异常抛出时使用<br>204|2014-07-27 14:47:23,443|192.168.2.104|INFO|main|c.e.t.j.LogTest|20|<br>{“TrackingID”:”TRADEENGINE_550e8400-e29b-41d4-a716-446655440000”,”marker”:”测试⽇志”,”ex”:”java.lang.RuntimeException:null”}</p></li><li><p>@mobacc 手机号<br>204|2014-07-27 14:47:23,443|192.168.2.104|INFO|main|c.e.t.j.LogTest|20|<br>{“TrackingID”:”TRADEENGINE_550e8400-e29b-41d4-a716-446655440000”,”marker”:”测试⽇志”,”otorder”:”2014072710234294234”,”mobacc”:”18930572293”}</p></li></ol><p>这里不在一一列举，根据业务需求，项目组内部规定字段。</p><h3 id="配置-Conf"><a href="#配置-Conf" class="headerlink" title="配置 Conf"></a>配置 Conf</h3><p>在logback的appender中配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;encoder&gt;</span><br><span class="line">    &lt;pattern&gt;%relative|%date|%X&#123;ip&#125;|%level|%thread|%logger&#123;0&#125;|%L|%m%n&lt;/pattern&gt;</span><br><span class="line">&lt;/encoder&gt;</span><br></pre></td></tr></table></figure></p><h4 id="Note：ip需要先在程序里设置"><a href="#Note：ip需要先在程序里设置" class="headerlink" title="Note：ip需要先在程序里设置"></a>Note：ip需要先在程序里设置</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">MDC.put(<span class="string">"ip"</span>, InetAddress.getLocalHost().getHostAddress());</span><br></pre></td></tr></table></figure><h3 id="Check-List"><a href="#Check-List" class="headerlink" title="Check List"></a>Check List</h3><ul><li>对于所有接口、方法或函数的入口或返回点，分别打印日志进行标识，并输出入口或返回点的所有参数。</li><li>为便于关联、定位分析日志，涉及参数或数据信息的日志输出行应有唯一标识号，标识号可以是订单号或各类流水号等。</li><li>在方法内的逻辑判断点，如if/else等条件判断点，必须打印日志进行标识，并在同一行内，输出所有参数</li><li>多线程应用应将同一个输出点的输出内容打印在同一行，便于后续查证。</li><li>如果捕获异常，要在日志输出中，将具体异常内容和相关参数一起打印出来。</li><li>在调用外部接口时，需在发起接口调用前和接口返回后，分别输出日志，并输出接口调用前和返回后的相关参数。</li><li>对外提供的服务或接口，应在被调用后，输出调用方的IP地址。</li><li>管理类应用如综管台、业管系统等，需将登录用户名在日志中进行输出。</li><li>涉及银行卡号、密码、身份证号等敏感信息的不允许在日志中进行输出，如确因业务或</li><li>查证需要必须输出到日志中的，需报研发中心安全管理员审核批准，并对敏感信息的中间部分数据位用类似***的掩码输出。</li><li>日志中输出的参数或数据之间，使用“|”符号作为分隔符。</li><li>对于日志的打印，任何情况下都不允许日志错误导致业务失败。</li><li>对于异常堆栈的输出，必须以log.XXX (“msg”,e)的形式输出，禁止log.XXX (“msg”+e)的错误形式。</li><li>对于由于系统原因造成业务处理失败的事件，需要记录错误日志。非系统原因的业务处理失败，不应该记错误日志（推荐使用warn级别），避免错误日志过大，影响紧急情况下的故障分析与诊断。</li><li>生产代码禁止以System及Throwable.printStackTrace的方式输出日志信息，必须用Logger替代。</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;打印日志规范&quot;&gt;&lt;a href=&quot;#打印日志规范&quot; class=&quot;headerlink&quot; title=&quot;打印日志规范&quot;&gt;&lt;/a&gt;打印日志规范&lt;/h1&gt;&lt;h2 id=&quot;Framework&quot;&gt;&lt;a href=&quot;#Framework&quot; class=&quot;headerlink&quot; title=&quot;Framework&quot;&gt;&lt;/a&gt;Framework&lt;/h2&gt;&lt;p&gt;&lt;strong&gt;Slf4j + Logback&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;Pattern&quot;&gt;&lt;a href=&quot;#Pattern&quot; class=&quot;headerlink&quot; title=&quot;Pattern&quot;&gt;&lt;/a&gt;Pattern&lt;/h2&gt;&lt;p&gt;格式：relative|time|ip|level|thread|packagename.classname|linenumber|msg&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;relative：从程序启动到写入日志所耗费的时间。  &lt;/li&gt;
&lt;li&gt;time：当前时间，如：2014-07-23 16:27:04.547。&lt;/li&gt;
&lt;li&gt;ip：本机ip。&lt;/li&gt;
&lt;li&gt;level：日志级别。  &lt;/li&gt;
&lt;li&gt;thread：当前线程名称。 &lt;/li&gt;
&lt;li&gt;packagename.classname：java包名.类名。 &lt;/li&gt;
&lt;li&gt;linenumber：行数。  &lt;/li&gt;
&lt;li&gt;msg：日志详细信息。&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>编写自动化shell脚本 Oracle sql loader 导入数据</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E7%BC%96%E5%86%99%E8%87%AA%E5%8A%A8%E5%8C%96shell%E8%84%9A%E6%9C%AC%20Oracle%20sql%20loader%20%E5%AF%BC%E5%85%A5%E6%95%B0%E6%8D%AE.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/编写自动化shell脚本 Oracle sql loader 导入数据.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="编写自动化shell脚本-Oracle-sql-loader-导入数据"><a href="#编写自动化shell脚本-Oracle-sql-loader-导入数据" class="headerlink" title="编写自动化shell脚本 Oracle sql loader 导入数据"></a>编写自动化shell脚本 Oracle sql loader 导入数据</h1><h2 id="需求"><a href="#需求" class="headerlink" title="需求"></a>需求</h2><ol><li>调度周期：日调度 </li><li>数据源：ODS系统早8:00生成的文件推送到FTP服务器上</li><li>编写自动化shell脚本，使用crontab定时调度实现文件入库。</li><li>更新规则：全量更新</li><li>入库表名 慢必赔新装表（INF_MBP_DRX）慢必赔报障表（INF_MBP_DRZ）</li></ol><h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><h3 id="调度服务器需要安装Oracle客户端，配置tns链接字符串，如下"><a href="#调度服务器需要安装Oracle客户端，配置tns链接字符串，如下" class="headerlink" title="调度服务器需要安装Oracle客户端，配置tns链接字符串，如下"></a>调度服务器需要安装Oracle客户端，配置tns链接字符串，如下</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">EDWDB_NEW =</span><br><span class="line">  (DESCRIPTION =</span><br><span class="line">    (ADDRESS = (PROTOCOL = TCP)(HOST = 137.32.61.13)(PORT = 1521))</span><br><span class="line">    (CONNECT_DATA =</span><br><span class="line">      (SERVER = DEDICATED)</span><br><span class="line">      (SERVICE_NAME = ODSDB)</span><br><span class="line">    )</span><br><span class="line">  )</span><br></pre></td></tr></table></figure><h3 id="调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。"><a href="#调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。" class="headerlink" title="调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。"></a>调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。</h3><p>文件存储路径 /data/manyidu/data<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 data]<span class="comment"># df -h</span></span><br><span class="line">Filesystem            Size  Used Avail Use% Mounted on</span><br><span class="line">/dev/xvda3            128G   28G   94G  23% /</span><br><span class="line">tmpfs                 4.9G   76K  4.9G   1% /dev/shm</span><br><span class="line">/dev/xvda1            194M   44M  140M  24% /boot</span><br><span class="line">/dev/mapper/vgdata-lvdata</span><br><span class="line">                      148G  6.5G  134G   5% /data</span><br></pre></td></tr></table></figure></p><h3 id="文件服务器的网络环境要打通，网络环境配置。"><a href="#文件服务器的网络环境要打通，网络环境配置。" class="headerlink" title="文件服务器的网络环境要打通，网络环境配置。"></a>文件服务器的网络环境要打通，网络环境配置。</h3><p>文件服务器IP：137.32.126.137<br>用户名：zx_order<br>密码：zxOrder_12</p><h3 id="新建目录，存放脚本如下："><a href="#新建目录，存放脚本如下：" class="headerlink" title="新建目录，存放脚本如下："></a>新建目录，存放脚本如下：</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[root@server1 data]<span class="comment"># tree -L 1 /home/oracle/manyidu</span></span><br><span class="line">/home/oracle/manyidu</span><br><span class="line">|-- ctl     <span class="comment">##用于生成oracle控制文件</span></span><br><span class="line">|-- data    <span class="comment">##用于存放下载文件，当然我们现在存储源文件是单独分区/data 这里就不用了</span></span><br><span class="line">|-- <span class="built_in">log</span>     <span class="comment">##输出日志的目录</span></span><br><span class="line">|-- run_log <span class="comment">##输出日志的目录</span></span><br><span class="line">|-- shell   <span class="comment">##存放shell脚本的地方</span></span><br></pre></td></tr></table></figure><a id="more"></a><h2 id="开始写脚本"><a href="#开始写脚本" class="headerlink" title="开始写脚本"></a>开始写脚本</h2><h3 id="文件名：load-table-info-DR-sh"><a href="#文件名：load-table-info-DR-sh" class="headerlink" title="文件名：load_table_info_DR.sh"></a>文件名：load_table_info_DR.sh</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###########################################################################################</span></span><br><span class="line"><span class="comment">#功能： 完成数据导入Oracle表中   </span></span><br><span class="line"><span class="comment">#时间:  2013-08-18</span></span><br><span class="line"><span class="comment">#作者： zhangls</span></span><br><span class="line"><span class="comment">#参数： $1 表名  $2 批次号  传0 表示今天  -1表示昨天 1表示明天  以此类推</span></span><br><span class="line"><span class="comment">#目标： 数据导入Oracle表</span></span><br><span class="line"><span class="comment">###########################################################################################</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#配置环境变量</span></span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/home/oracle/app/oracle/product/10.2.0/client_1</span><br><span class="line"><span class="built_in">export</span> TNS_ADMIN=<span class="variable">$ORACLE_HOME</span>/network/admin</span><br><span class="line"><span class="built_in">export</span> NLS_LANG=AMERICAN_AMERICA.ZHS16GBK</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ORACLE_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="comment">#入参</span></span><br><span class="line">table_name=<span class="variable">$1</span>  <span class="comment">#表名</span></span><br><span class="line">num_date=<span class="variable">$2</span>    <span class="comment">#批次号</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"程序开始:"</span></span><br><span class="line"><span class="built_in">echo</span> ===============================================</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始时间：`date \"+%Y-%m-%d %H:%M:%S\"`"</span>;</span><br><span class="line"><span class="comment">## 定义日期及参数 </span></span><br><span class="line">today=`date +%Y%m%d`    <span class="comment">#今天</span></span><br><span class="line"><span class="built_in">echo</span> today=<span class="variable">$today</span></span><br><span class="line">numday=`date -d <span class="variable">$num_date</span><span class="string">' days'</span> +%Y%m%d` </span><br><span class="line">year_No=`expr substr <span class="variable">$today</span> 1 4`   <span class="comment">#年份2013</span></span><br><span class="line"><span class="comment">#sleep 1</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"the frist param of the script is :<span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"the numday of the value is: <span class="variable">$numday</span>"</span></span><br><span class="line"><span class="built_in">echo</span> ===============================================</span><br><span class="line"></span><br><span class="line">data_name = <span class="variable">$table_name</span>; <span class="comment">#实际处理的表名</span></span><br><span class="line">v_opertion_day = <span class="variable">$numday</span>;  <span class="comment">#实际处理的批次号</span></span><br><span class="line">shell_path = /home/oracle/manyidu/shell;</span><br><span class="line">ctl_path = /home/oracle/manyidu/ctl;</span><br><span class="line">log_path = /home/oracle/manyidu/<span class="built_in">log</span>;</span><br><span class="line"><span class="comment">#下载FTP文件路径</span></span><br><span class="line">pa=/data/manyidu/data</span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$pa</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$pa</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#去远程FTP上下载文件</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;data_name&#125;</span>---<span class="string">"[`date`]获取文件开始"</span>;</span><br><span class="line">lftp -u ods_jk,hnOds_jk12 ftp://137.32.126.137 &lt;&lt;EOF <span class="comment">#登陆FTP服务器</span></span><br><span class="line"><span class="built_in">cd</span> day/<span class="variable">$&#123;v_opertion_day&#125;</span>                             <span class="comment">#进入批次号命名的文件夹</span></span><br><span class="line">mget <span class="variable">$&#123;data_name&#125;</span>_<span class="variable">$&#123;v_opertion_day&#125;</span>*                 <span class="comment">#下载文件名匹配成功的文件到本地，注意本地路径</span></span><br><span class="line"><span class="built_in">bye</span>                                                  <span class="comment">#退出</span></span><br><span class="line">EOF</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;data_name&#125;</span>---<span class="string">"[`date`]获取文件完成"</span> ;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 接口方规定数据文件接口单表会生成两个文件  生成时间早8:00</span></span><br><span class="line"><span class="comment"># 1.表名_批次号.dat （INF_MBP_DRZ_20180821.dat） 数据文件   每行是一条数据，数据项以","分割 </span></span><br><span class="line"><span class="comment"># 2.表名_批次号.flg （INF_MBP_DRZ_20180821.flg） 数据校验文件  </span></span><br><span class="line"><span class="comment"># 校验文件规则 </span></span><br><span class="line"><span class="comment"># [root@server1 data]# cat INF_MBP_DRZ_20180821.flg</span></span><br><span class="line"><span class="comment"># INF_MBP_DRZ_20180821.dat 8403 25 2018-08-22 5:57:16</span></span><br><span class="line"><span class="comment"># 对应的数据文件名 数据文件字节数  总条数  文件生成时间</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里判断数据文件的行数小于1的话就直接退出，否则执行创建控制文件的shell</span></span><br><span class="line"><span class="keyword">if</span> [ `ls <span class="variable">$&#123;data_name&#125;</span>_<span class="variable">$v_opertion_day</span>.dat | awk <span class="string">'END&#123;print NR&#125;'</span>` -lt 1 ]</span><br><span class="line">    <span class="keyword">then</span> </span><br><span class="line">        <span class="built_in">exit</span></span><br><span class="line">        EOF</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">    <span class="variable">$shell_path</span>/mkdir_<span class="variable">$&#123;table_name&#125;</span>_ctl.shell <span class="variable">$&#123;data_name&#125;</span> <span class="variable">$&#123;v_opertion_day&#125;</span>&gt; /dev/null</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"生成控制文件完毕：`date \"+%Y-%m-%d %H:%M:%S\"`"</span>;</span><br><span class="line">    <span class="comment">## 增加一个缓冲时间</span></span><br><span class="line">    sleep 4</span><br><span class="line">    <span class="comment">#统计文件记录数作为比对依据</span></span><br><span class="line">    <span class="built_in">cd</span> <span class="variable">$pa</span></span><br><span class="line">    FN=$(cat <span class="variable">$&#123;data_name&#125;</span>_<span class="variable">$&#123;v_opertion_day&#125;</span>.dat|wc -l)    <span class="comment"># 数据文件的条数</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;data_name&#125;</span>_<span class="variable">$&#123;v_opertion_day&#125;</span>.dat ----- <span class="variable">$&#123;FN&#125;</span></span><br><span class="line">    dbuser=manyidu</span><br><span class="line">    dbconn=manyidu/manyidu_256@newedw</span><br><span class="line"></span><br><span class="line">    <span class="comment">#删除现有数据库中表数据，因为是全量抽取</span></span><br><span class="line">    sqlplus <span class="variable">$&#123;dbconn&#125;</span> &lt;&lt; SQLEND</span><br><span class="line">    delete from TI_<span class="variable">$&#123;table_name&#125;</span> <span class="built_in">where</span> opertion_date=<span class="string">'$&#123;v_opertion_day&#125;'</span>;</span><br><span class="line">    commit;</span><br><span class="line">    SQLEND</span><br><span class="line">    <span class="built_in">echo</span> ===============================================</span><br><span class="line">    </span><br><span class="line">    sqlldr <span class="variable">$&#123;dbconn&#125;</span> control=<span class="variable">$ctl_path</span>/<span class="variable">$&#123;table_name&#125;</span>.ctl errors = 1000                bad=<span class="variable">$log_path</span>/<span class="variable">$&#123;table_name&#125;</span>.bad <span class="built_in">log</span>=<span class="variable">$log_path</span>/<span class="variable">$&#123;table_name&#125;</span>.<span class="built_in">log</span> rows=30000 direct = <span class="literal">true</span>  bindsize=10485760</span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$&#123;table_name&#125;</span>===========<span class="string">'导入成功'</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#登陆执行 分析脚本</span></span><br><span class="line">    sqlplus <span class="variable">$&#123;dbconn&#125;</span> &lt;&lt; SQLEND   </span><br><span class="line">    <span class="built_in">exec</span> dbms_stats.gather_table_stats(ownname=&gt;<span class="string">'$&#123;dbuser&#125;'</span>,tabname=&gt;<span class="string">'TI_$&#123;table_name&#125;'</span>,estimate_percent=&gt;20,degree =&gt; 4,cascade=&gt; TRUE);</span><br><span class="line">    SQLEND</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"执行时间 [`date`] "</span>;</span><br><span class="line"> </span><br><span class="line">    <span class="comment">#登陆执行</span></span><br><span class="line">    sqlplus <span class="variable">$&#123;dbconn&#125;</span>&lt;&lt; SQLEND  </span><br><span class="line">    insert into etl_check_data_info</span><br><span class="line">        ( V_ID,</span><br><span class="line">          v_table_name,</span><br><span class="line">          datafile_cnt, <span class="comment"># 数据接口文件的数据量</span></span><br><span class="line">          table_cnt,  <span class="comment"># 加载入库的数据量</span></span><br><span class="line">          load_date,</span><br><span class="line">          opertion_date,</span><br><span class="line">          remarks  <span class="comment">#数据量差异 差异为0 正常，其他都不正常需要稽核数据</span></span><br><span class="line">        )   </span><br><span class="line">        select</span><br><span class="line">            SEQ_ETL_CHECK_DATA_INFO.Nextval,</span><br><span class="line">            <span class="string">'$&#123;table_name&#125;'</span>,</span><br><span class="line">            <span class="string">'$&#123;FN&#125;'</span>,</span><br><span class="line">            (select count(0) from ti_<span class="variable">$&#123;table_name&#125;</span> <span class="built_in">where</span> opertion_date=<span class="string">'$&#123;v_opertion_day&#125;'</span>),</span><br><span class="line">            sysdate,</span><br><span class="line">            <span class="string">'$v_opertion_day'</span>,</span><br><span class="line">            (select count(0) from ti_<span class="variable">$&#123;table_name&#125;</span> <span class="built_in">where</span>     opertion_date=<span class="string">'$&#123;v_opertion_day&#125;'</span>)-<span class="string">'$&#123;FN&#125;'</span> from dual; </span><br><span class="line">    SQLEND</span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"[`date`] 插入日志表完成！"</span></span><br><span class="line">    <span class="built_in">echo</span> =============================================== </span><br><span class="line"></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$&#123;table_name&#125;</span> <span class="string">"[`date`] 整体完成日志！"</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># rm /data/manyidu/data/$&#123;data_name&#125;_$&#123;v_opertion_day&#125;*</span></span><br><span class="line"><span class="comment"># echo /data/manyidu/data/$&#123;data_name&#125;_$&#123;v_opertion_day&#125;*</span></span><br><span class="line"><span class="comment"># echo $&#123;table_name&#125; "[`date`] 清除三天前记录！"</span></span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h2 id="创建生成控制文件的脚本"><a href="#创建生成控制文件的脚本" class="headerlink" title="创建生成控制文件的脚本"></a>创建生成控制文件的脚本</h2><p>脚本名称 mkdir_${table_name}_ctl.shell， 示例表名INF_MBP_DRX<br>在路径/home/oracle/manyidu/shell 新建mkdir_INF_MBP_DRX_ctl.shell</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">###########################################################################################</span></span><br><span class="line"><span class="comment">#功能： 完成表名INF_MBP_DRX接口控制文件生成   </span></span><br><span class="line"><span class="comment">#时间:  2013-08-18 </span></span><br><span class="line"><span class="comment">#作者： zhangls</span></span><br><span class="line"><span class="comment">#参数： $1 表名 $2 批次号</span></span><br><span class="line"><span class="comment">#目标： 按照日期生成文件 </span></span><br><span class="line"><span class="comment">###########################################################################################</span></span><br><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line"></span><br><span class="line">data_name=<span class="variable">$1</span></span><br><span class="line">opertion_day=<span class="variable">$2</span></span><br><span class="line"><span class="built_in">echo</span> ===============================================</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"生成配置文件...."</span></span><br><span class="line"><span class="built_in">cd</span> /home/oracle/manyidu/ctl</span><br><span class="line">address=<span class="string">'"'</span>/data/manyidu/data/<span class="variable">$&#123;data_name&#125;</span>_<span class="variable">$&#123;opertion_day&#125;</span><span class="string">'"'</span> </span><br><span class="line">parameter=<span class="string">'"'</span>,<span class="string">'"'</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"load data </span></span><br><span class="line"><span class="string">infile <span class="variable">$address</span></span></span><br><span class="line"><span class="string">APPEND INTO table TI_<span class="variable">$&#123;data_name&#125;</span></span></span><br><span class="line"><span class="string">fields terminated by <span class="variable">$parameter</span></span></span><br><span class="line"><span class="string">(</span></span><br><span class="line"><span class="string">  cityname        ,</span></span><br><span class="line"><span class="string">  exchname        ,</span></span><br><span class="line"><span class="string">  orgname         ,</span></span><br><span class="line"><span class="string">  personname      ,</span></span><br><span class="line"><span class="string">  accnbr          ,</span></span><br><span class="line"><span class="string">  contact_name    ,</span></span><br><span class="line"><span class="string">  birthday        ,</span></span><br><span class="line"><span class="string">  gender          ,</span></span><br><span class="line"><span class="string">  menbership_name ,</span></span><br><span class="line"><span class="string">  contact_tel     ,</span></span><br><span class="line"><span class="string">  fix_addr        ,</span></span><br><span class="line"><span class="string">  innet_date      ,</span></span><br><span class="line"><span class="string">  access_type     ,</span></span><br><span class="line"><span class="string">  prod_offer_name ,</span></span><br><span class="line"><span class="string">  is_rh_flag      ,</span></span><br><span class="line"><span class="string">  std_min_consume ,</span></span><br><span class="line"><span class="string">  std_bandwidth   ,</span></span><br><span class="line"><span class="string">  is_itv_flag     ,</span></span><br><span class="line"><span class="string">  order_title     ,</span></span><br><span class="line"><span class="string">  external_no     ,</span></span><br><span class="line"><span class="string">  channel         ,</span></span><br><span class="line"><span class="string">  applicator      ,</span></span><br><span class="line"><span class="string">  applicator_tel  ,</span></span><br><span class="line"><span class="string">  accept_date     ,</span></span><br><span class="line"><span class="string">  ispretend       ,</span></span><br><span class="line"><span class="string">  esp_date        ,</span></span><br><span class="line"><span class="string">  changedate      ,</span></span><br><span class="line"><span class="string">  finishdate      ,</span></span><br><span class="line"><span class="string">  payvalue        , </span></span><br><span class="line"><span class="string"> OPERTION_DATE constant  \"<span class="variable">$opertion_day</span>\")</span></span><br><span class="line"><span class="string">"</span> &gt; <span class="variable">$&#123;data_name&#125;</span>.ctl </span><br><span class="line"><span class="built_in">exit</span></span><br></pre></td></tr></table></figure><h2 id="配置调度crontab"><a href="#配置调度crontab" class="headerlink" title="配置调度crontab"></a>配置调度crontab</h2><p>[root@server1 ~]# crontab -e<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">*/1 * * * * ntpdate 137.32.44.178     时间同步服务器</span><br><span class="line">50 7-11 * * * nohup /home/oracle/manyidu/shell/load_table_INF_MBP_DR.sh INF_MBP_DRX 0 &gt; /home/oracle/manyidu/run_log/INF_MBP_DRX.log &amp;</span><br><span class="line">50 7-11 * * * nohup /home/oracle/manyidu/shell/load_table_INF_MBP_DR.sh INF_MBP_DRZ 0 &gt; /home/oracle/manyidu/run_log/INF_MBP_DRZ.log &amp;</span><br></pre></td></tr></table></figure></p><p>配置规则为 早上7点到11点钟    每到50分钟的时候调用一次<br>即 7:50  8:50  9:50  10:50  11:50 触发调度</p><h2 id="编写总调度shell"><a href="#编写总调度shell" class="headerlink" title="编写总调度shell"></a>编写总调度shell</h2><p>如果同步的表比较多可以写个总调度的shell</p><p>文件名：load_control.sh<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/sh</span></span><br><span class="line">date <span class="string">"+%Y%m%d"</span></span><br><span class="line">v_day=$(date <span class="string">"+%Y%m%d"</span>)</span><br><span class="line">shell_path = /home/oracle/manyidu/shell;</span><br><span class="line">log_path = /home/oracle/manyidu/run_log;</span><br><span class="line"><span class="built_in">export</span> ORACLE_HOME=/home/oracle/app/oracle/product/10.2.0/client_1</span><br><span class="line"><span class="built_in">export</span> TNS_ADMIN=<span class="variable">$ORACLE_HOME</span>/network/admin</span><br><span class="line"><span class="built_in">export</span> NLS_LANG=AMERICAN_AMERICA.ZHS16GBK</span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$ORACLE_HOME</span>/lib</span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$ORACLE_HOME</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"开始时间：`date \"+%Y-%m-%d %H:%M:%S\"`"</span>;</span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_MSG_moble_resp 0 &gt; </span><br><span class="line"><span class="variable">$log_path</span>/INF_TI_BD_MSG_MOBLE_RESP.log &amp;</span><br><span class="line"></span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_STAFF_ORG 0 &gt; </span><br><span class="line"><span class="variable">$log_path</span>/INF_TI_BD_STAFF_ORG.log &amp;</span><br><span class="line"></span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_ORDER_CODE_INFO 0 &gt; <span class="variable">$log_path</span>/INF_TI_BD_ORDER_CODE_INFO.log &amp;</span><br><span class="line"></span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_Fault_ORDER_INFO 0 &gt; <span class="variable">$log_path</span>/INF_TI_BD_Fault_ORDER_INFO.log &amp;</span><br><span class="line"></span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_MSG_TELE_RESP 0 &gt; </span><br><span class="line"><span class="variable">$log_path</span>/INF_TI_BD_MSG_TELE_RESP.log &amp;</span><br><span class="line"></span><br><span class="line">nohup <span class="variable">$shell_path</span>/load_table_info_DR.sh TI_BD_MSG_TELE_SEND 0 &gt; </span><br><span class="line"><span class="variable">$log_path</span>/INF_TI_BD_MSG_TELE_SEND.log &amp;</span><br><span class="line"></span><br><span class="line"><span class="comment">#nohup $shell_path/load_table_info_DR.sh TI_BD_MSG_MOBILE_SEND 0 &gt; /home/oracle/manyidu/run_log$log_path/INF_TI_BD_MSG_MOBILE_SEND.log &amp;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"结束时间：`date \"+%Y-%m-%d %H:%M:%S\"`"</span>;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;编写自动化shell脚本-Oracle-sql-loader-导入数据&quot;&gt;&lt;a href=&quot;#编写自动化shell脚本-Oracle-sql-loader-导入数据&quot; class=&quot;headerlink&quot; title=&quot;编写自动化shell脚本 Oracle sql loader 导入数据&quot;&gt;&lt;/a&gt;编写自动化shell脚本 Oracle sql loader 导入数据&lt;/h1&gt;&lt;h2 id=&quot;需求&quot;&gt;&lt;a href=&quot;#需求&quot; class=&quot;headerlink&quot; title=&quot;需求&quot;&gt;&lt;/a&gt;需求&lt;/h2&gt;&lt;ol&gt;
&lt;li&gt;调度周期：日调度 &lt;/li&gt;
&lt;li&gt;数据源：ODS系统早8:00生成的文件推送到FTP服务器上&lt;/li&gt;
&lt;li&gt;编写自动化shell脚本，使用crontab定时调度实现文件入库。&lt;/li&gt;
&lt;li&gt;更新规则：全量更新&lt;/li&gt;
&lt;li&gt;入库表名 慢必赔新装表（INF_MBP_DRX）慢必赔报障表（INF_MBP_DRZ）&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&quot;准备工作&quot;&gt;&lt;a href=&quot;#准备工作&quot; class=&quot;headerlink&quot; title=&quot;准备工作&quot;&gt;&lt;/a&gt;准备工作&lt;/h2&gt;&lt;h3 id=&quot;调度服务器需要安装Oracle客户端，配置tns链接字符串，如下&quot;&gt;&lt;a href=&quot;#调度服务器需要安装Oracle客户端，配置tns链接字符串，如下&quot; class=&quot;headerlink&quot; title=&quot;调度服务器需要安装Oracle客户端，配置tns链接字符串，如下&quot;&gt;&lt;/a&gt;调度服务器需要安装Oracle客户端，配置tns链接字符串，如下&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;EDWDB_NEW =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  (DESCRIPTION =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (ADDRESS = (PROTOCOL = TCP)(HOST = 137.32.61.13)(PORT = 1521))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    (CONNECT_DATA =&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      (SERVER = DEDICATED)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      (SERVICE_NAME = ODSDB)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    )&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  )&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。&quot;&gt;&lt;a href=&quot;#调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。&quot; class=&quot;headerlink&quot; title=&quot;调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。&quot;&gt;&lt;/a&gt;调度服务器单独划分一块区域存储从FTP下载下来的数据文件和校验文件。&lt;/h3&gt;&lt;p&gt;文件存储路径 /data/manyidu/data&lt;br&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@server1 data]&lt;span class=&quot;comment&quot;&gt;# df -h&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Filesystem            Size  Used Avail Use% Mounted on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvda3            128G   28G   94G  23% /&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;tmpfs                 4.9G   76K  4.9G   1% /dev/shm&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/xvda1            194M   44M  140M  24% /boot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/dev/mapper/vgdata-lvdata&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                      148G  6.5G  134G   5% /data&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;文件服务器的网络环境要打通，网络环境配置。&quot;&gt;&lt;a href=&quot;#文件服务器的网络环境要打通，网络环境配置。&quot; class=&quot;headerlink&quot; title=&quot;文件服务器的网络环境要打通，网络环境配置。&quot;&gt;&lt;/a&gt;文件服务器的网络环境要打通，网络环境配置。&lt;/h3&gt;&lt;p&gt;文件服务器IP：137.32.126.137&lt;br&gt;用户名：zx_order&lt;br&gt;密码：zxOrder_12&lt;/p&gt;
&lt;h3 id=&quot;新建目录，存放脚本如下：&quot;&gt;&lt;a href=&quot;#新建目录，存放脚本如下：&quot; class=&quot;headerlink&quot; title=&quot;新建目录，存放脚本如下：&quot;&gt;&lt;/a&gt;新建目录，存放脚本如下：&lt;/h3&gt;&lt;figure class=&quot;highlight bash&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[root@server1 data]&lt;span class=&quot;comment&quot;&gt;# tree -L 1 /home/oracle/manyidu&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;/home/oracle/manyidu&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- ctl     &lt;span class=&quot;comment&quot;&gt;##用于生成oracle控制文件&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- data    &lt;span class=&quot;comment&quot;&gt;##用于存放下载文件，当然我们现在存储源文件是单独分区/data 这里就不用了&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- &lt;span class=&quot;built_in&quot;&gt;log&lt;/span&gt;     &lt;span class=&quot;comment&quot;&gt;##输出日志的目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- run_log &lt;span class=&quot;comment&quot;&gt;##输出日志的目录&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;|-- shell   &lt;span class=&quot;comment&quot;&gt;##存放shell脚本的地方&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
  <entry>
    <title>项目中代码评审的标准及要点项</title>
    <link href="http://zhanglingsi.github.io/2019/09/10/%E9%A1%B9%E7%9B%AE%E4%B8%AD%E4%BB%A3%E7%A0%81%E8%AF%84%E5%AE%A1%E7%9A%84%E6%A0%87%E5%87%86%E5%8F%8A%E8%A6%81%E7%82%B9%E9%A1%B9.html"/>
    <id>http://zhanglingsi.github.io/2019/09/10/项目中代码评审的标准及要点项.html</id>
    <published>2019-09-10T02:53:38.956Z</published>
    <updated>2019-09-10T02:53:38.956Z</updated>
    
    <content type="html"><![CDATA[<script src="/assets/js/APlayer.min.js"> </script><h1 id="项目中代码评审的标准及要点项"><a href="#项目中代码评审的标准及要点项" class="headerlink" title="项目中代码评审的标准及要点项"></a>项目中代码评审的标准及要点项</h1><h2 id="常规检查"><a href="#常规检查" class="headerlink" title="常规检查"></a>常规检查</h2><h3 id="命名、注释、声明"><a href="#命名、注释、声明" class="headerlink" title="命名、注释、声明"></a>命名、注释、声明</h3><pre><code>1. 命名规则是否与所采用的规范保持一致？2. has/can/is前缀的函数是否返回布尔型？3. 注释是否较清晰4. 复杂的分支流程是否已经被注释5. 函数是否已经有文档注释6. 变量是否已经在定义的同时初始化7. 类属性是否都执行了初始化</code></pre><h3 id="语句、功能分布、规模"><a href="#语句、功能分布、规模" class="headerlink" title="语句、功能分布、规模"></a>语句、功能分布、规模</h3><pre><code>1. 单个函数是否执行了单个功能并与其命名相符2. 单个函数不超过规定行数（不要超过14行） 3. 缩进层数是否不超过规定</code></pre><a id="more"></a><h3 id="可靠性（变量、语句）"><a href="#可靠性（变量、语句）" class="headerlink" title="可靠性（变量、语句）"></a>可靠性（变量、语句）</h3><pre><code>1. 是否已经消除了所有警告2. 常数变量是否声明为final3. 对象使用前是否进行了检查4. 局部对象变量使用后是否被复位为NULL5. 是否确认没有同名变量局部重复定义问题6. 所有判断是否都使用了（常量==变量）的形式7. 是否每个if-else if-else语句都有最后一个else以确保处理了全集8. 对浮点数值的相等判断是否是恰当的？（严禁使用==直接判断）</code></pre><h3 id="可靠性（函数）"><a href="#可靠性（函数）" class="headerlink" title="可靠性（函数）"></a>可靠性（函数）</h3><pre><code>1. 入口对象是否都被进行了判断不为空2. 入口数据的合法范围是否都被进行了判断？(尤其是数组)3. 是否对有异常抛出的方法都执行了try...catch保护？4. 是否函数的所有分支都有返回值？5. 是否对方法返回值对象做了null检查，该返回值定义时是否被初始化?6. 是否对同步对象的遍历访问做了代码同步7. 是否确认在对Map对象使用迭代遍历过程中没有做增减元素操作8. 线程处理函数循环内部是否有异常捕获处理，防止线程抛出异常而退出9. 函数对错误的处理是恰当的</code></pre><h3 id="可维护性"><a href="#可维护性" class="headerlink" title="可维护性"></a>可维护性</h3><pre><code>1. 实现代码中是否消除了直接常量？（用于计数起点的简单常数例外）</code></pre><h2 id="日志输出"><a href="#日志输出" class="headerlink" title="日志输出"></a>日志输出</h2><pre><code>1. 对于所有接口、方法或函数的入口或返回点，分别打印日志进行标识，并输出入口或返回点的所有参数。2. 为便于关联、定位分析日志，涉及参数或数据信息的日志输出行应有唯一标识号，标识号可以是订单号或各类流水号等3. 在方法内的逻辑判断点，如if/else等条件判断点，必须打印日志进行标识，并在同一行内，输出所有参数4. 多线程应用应将同一个输出点的输出内容打印在同一行，便于后续查证5. 如果捕获异常，要在日志输出中，将具体异常内容和相关参数一起打印出来6. 在调用外部接口时，需在发起接口调用前和接口返回后，分别输出日志，并输出接口调用前和返回后的相关参数7. 对外提供的服务或接口，应在被调用后，输出调用方的IP地址8. 管理类应用如综管台、业管系统等，需将登录用户名在日志中进行输出。9. 涉及银行卡号、密码、身份证号等敏感信息的不允许在日志中进行输出，如确因业务或查证需要必须输出到日志中的，需报研发中心安全管理员审核批准，并对敏感信息的中间部分数据位用类似***的掩码输出10. 涉及银行卡号、密码、身份证号等敏感信息的不允许在日志中进行输出，如确因业务或查证需要必须输出到日志中的，需报研发中心安全管理员审核批准，并对敏感信息的中间部分数据位用类似***的掩码输出</code></pre><h2 id="代码审核-checklist"><a href="#代码审核-checklist" class="headerlink" title="代码审核 checklist"></a>代码审核 checklist</h2><pre><code>1. 硬编码  （不变更的内容放置在配置文件或常量类中）2. 方法命名随意  （贴切功能）3. 注释不清楚  （class注释，函数注释，变量注释）4. 日志输出，级别定义  （错误信息用error,基本信息用debug，稳定之后可以不需要再打印。需要查证信息用Info。前端接入模块，每行日志输出都必须加上订单号和订单请求流水号。银行模块，每行日志都必须加上平台流水和银行请求流水。业务模块，每行日志都必须加上平台流水和业务请求流水。 其它模块，每行日志加上平台流水。）5. 工具类重复制造 （common中的工具类，以及开源工具类）6. 简化if结构  （if中判断失败结果，成功不需要else）7. 静态块的走查  （静态变量，静态方法使用）8. response对象使用  （模块之间的调用返回此对象。issuccess成功，里面的范型必须有值）9. 异常处理  （每个模块的入口去捕获异常，模块内的调用不去try，catch，直接抛给入口。函数内有调用外部接口时，需要try，catch。）</code></pre><h2 id="代码评审意见稿"><a href="#代码评审意见稿" class="headerlink" title="代码评审意见稿"></a>代码评审意见稿</h2><table><thead><tr><th style="text-align:left">评审内容</th><th style="text-align:left">评审人员</th><th style="text-align:left">时间</th><th style="text-align:left">审核问题</th><th style="text-align:left">解决方案</th><th style="text-align:left">遗留问题</th></tr></thead><tbody><tr><td style="text-align:left">工单号+业务名称</td><td style="text-align:left">张三，李四等</td><td style="text-align:left">2018-08-18</td><td style="text-align:left">1:硬编码2:方法命名随意3:注释不够详细4:日志输出没有依据,无法给运维人员很好查找错误5:工具类重复制造</td><td style="text-align:left">空</td><td style="text-align:left">异常机制建立，错误码规范</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;项目中代码评审的标准及要点项&quot;&gt;&lt;a href=&quot;#项目中代码评审的标准及要点项&quot; class=&quot;headerlink&quot; title=&quot;项目中代码评审的标准及要点项&quot;&gt;&lt;/a&gt;项目中代码评审的标准及要点项&lt;/h1&gt;&lt;h2 id=&quot;常规检查&quot;&gt;&lt;a href=&quot;#常规检查&quot; class=&quot;headerlink&quot; title=&quot;常规检查&quot;&gt;&lt;/a&gt;常规检查&lt;/h2&gt;&lt;h3 id=&quot;命名、注释、声明&quot;&gt;&lt;a href=&quot;#命名、注释、声明&quot; class=&quot;headerlink&quot; title=&quot;命名、注释、声明&quot;&gt;&lt;/a&gt;命名、注释、声明&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;1. 命名规则是否与所采用的规范保持一致？
2. has/can/is前缀的函数是否返回布尔型？
3. 注释是否较清晰
4. 复杂的分支流程是否已经被注释
5. 函数是否已经有文档注释
6. 变量是否已经在定义的同时初始化
7. 类属性是否都执行了初始化
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&quot;语句、功能分布、规模&quot;&gt;&lt;a href=&quot;#语句、功能分布、规模&quot; class=&quot;headerlink&quot; title=&quot;语句、功能分布、规模&quot;&gt;&lt;/a&gt;语句、功能分布、规模&lt;/h3&gt;&lt;pre&gt;&lt;code&gt;1. 单个函数是否执行了单个功能并与其命名相符
2. 单个函数不超过规定行数（不要超过14行） 
3. 缩进层数是否不超过规定
&lt;/code&gt;&lt;/pre&gt;
    
    </summary>
    
      <category term="编程" scheme="http://zhanglingsi.github.io/categories/programming/"/>
    
    
  </entry>
  
</feed>
